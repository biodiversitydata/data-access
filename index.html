<!DOCTYPE html>
<html lang="en"><head>
<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/tabby.min.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<link href="index_files/libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="index_files/libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<link href="index_files/libs/quarto-contrib/academicons-1.9.2/all.css" rel="stylesheet">
<link href="index_files/libs/quarto-contrib/academicons-1.9.2/size.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.57">

  <title>Data access</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/theme/quarto.css">
  <link href="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">


<section class="slide level2">

<!-- Insert section 'Title slide' -->
<div class="title-slide-container">
<div class="title-slide-content">
<div class="columns">
<!-- Title slide logo --><div class="column logo" style="width:32%;">
<p><img data-src="images/logo-title-slide.png"></p>
</div><!-- Title slide content --><div class="column information" style="width:68%;">
<div class="title">
<p>Accessing biodiversity data</p>
</div>
<div class="subtitle">
<p>Web portals, scripting, API &amp; Web scraping</p>
</div>
<div class="date">
<p>October 2024</p>
</div>
<div class="columns authors">
<div class="column author" style="width:32%;">
<p>Nicolas Casajus<br> <a href="mailto:rdev.nc@gmail.com"><i class="fa-solid fa-envelope" aria-label="envelope"></i></a> <a href="https://nicolascasajus.fr"><i class="fa-solid fa-globe" aria-label="globe"></i></a> <a href="https://github.com/ahasverus"><i class="fa-brands fa-github" aria-label="github"></i></a> <a href="https://orcid.org/0000-0002-5537-5294"><i class="fa-brands fa-orcid" aria-label="orcid"></i></a> <a href="https://scholar.google.fr/citations?user=n1swa1UAAAAJ"><i class="ai  ai-google-scholar"></i></a></p>
</div><!-- Second author --><div class="column author" style="width:32%;">
<p>Camille Coux<br> <a href="mailto:camille.coux@fondationbiodiversite.fr"><i class="fa-solid fa-envelope" aria-label="envelope"></i></a> <a href="https://www.fondationbiodiversite.fr/en/membre/camille-coux/"><i class="fa-solid fa-globe" aria-label="globe"></i></a> <a href="https://github.com/camillecoux"><i class="fa-brands fa-github" aria-label="github"></i></a> <a href="https://orcid.org/0000-0002-6346-9194"><i class="fa-brands fa-orcid" aria-label="orcid"></i></a> <a href="https://scholar.google.fr/citations?user=BGywDqsAAAAJ"><i class="ai  ai-google-scholar"></i></a></p>
</div><!-- Third author --><div class="column author" style="width:32%;">
<!--
Author name<br/>
[](mailto:author-email)
[](author-website)
[](author-github)
[](author-orcid)
-->
</div><!-- Close {.columns .authors} -->
</div>
<div class="columns affiliations">
<div class="column affiliation" style="width:32%;">
<p>Data scientists <br> <code><span class="citation" data-cites="FRB-CESAB">@FRB-CESAB</span></code> &nbsp; <a href="https://www.fondationbiodiversite.fr/en/about-the-foundation/le-cesab/"><i class="fa-solid fa-globe" aria-label="globe"></i></a> &nbsp; <a href="https://github.com/frbcesab"><i class="fa-brands fa-github" aria-label="github"></i></a></p>
</div><!-- Second affiliation --><div class="column affiliation" style="width:32%;">
<!--
Data scientist
<br/>
<code>@FRB-CESAB</code>
&nbsp;
[](https://www.fondationbiodiversite.fr/en/about-the-foundation/le-cesab/)
&nbsp;
[](https://github.com/frbcesab)
-->
</div><!-- Third affiliation --><div class="column affiliation" style="width:32%;">
<!--
 &nbsp;[Affiliation](affiliation-url)
-->
</div><!-- Close {.columns .affiliations} -->
</div>
<!-- Close {.column .information} -->
</div><!-- Close {.columns} -->
</div>
<!-- Close {.title-slide-content} -->
</div>
<!-- Close {.title-slide-container} -->
</div>
<!-- Insert section 'Table of contents' -->
</section>
<section>
<section id="table-of-contents" class="title-slide slide level1 center">
<h1>Table of contents</h1>

</section>
<section id="table-of-contents-1" class="slide level2">
<h2>Table of contents</h2>
<p><br> <br> <br></p>
<div class="columns">
<div class="column center" style="width:20%;">
<p><i class="fa-solid fa-globe fa-2x" aria-label="globe"></i></p>
<p>Web portals</p>
</div><div class="column center" style="width:20%;">

</div><div class="column center" style="width:20%;">
<p><i class="fa-solid fa-code fa-2x" aria-label="code"></i></p>
<p>Scripting</p>
</div><div class="column center" style="width:20%;">

</div><div class="column center" style="width:20%;">
<p><i class="fa-solid fa-wrench fa-2x" aria-label="wrench"></i></p>
<p>API</p>
</div></div>
<p><br><br></p>
<div class="columns">
<div class="column center" style="width:20%;">

</div><div class="column center" style="width:20%;">
<p><i class="fa-solid fa-user-clock fa-2x" aria-label="user-clock"></i></p>
<p>Exercise</p>
</div><div class="column center" style="width:20%;">

</div><div class="column center" style="width:20%;">
<p><i class="fa-brands fa-css3 fa-2x" aria-label="css3"></i></p>
<p>Web scraping</p>
</div><div class="column center" style="width:20%;">

</div></div>
<!-- Insert section 'Web portals' -->
</section></section>
<section>
<section id="web-portals-5-min" class="title-slide slide level1 center">
<h1><i class="fa-solid fa-globe fa-1x" aria-label="globe"></i> &nbsp;&nbsp;Web portals (5 min)</h1>

</section>
<section class="slide level2">

<!--Slide 1 -->
<h3 id="imagine-youre-doing-some-species-distribution-models.">Imagine: you’re doing some species distribution models.</h3>
<blockquote>
<p>You have a <strong>list of species</strong> and their <strong>occurrences in space and time</strong>.</p>
</blockquote>
<p>Now you need:</p>
<ul>
<li><p>spatial data of France, to map the occurrences</p></li>
<li><p>trait information for each species, for 3 specific traits</p></li>
</ul>
<!--Slide 2 -->
</section>
<section id="some-portals-are-more-straight-foraward-than-others" class="slide level2">
<h2>Some portals are more straight-foraward than others…</h2>
<p>Example of GADM maps: <a href="https://gadm.org/" class="uri">https://gadm.org/</a></p>
<!--Slide 3 -->
</section>
<section id="before-anything-else" class="slide level2">
<h2>Before anything else:</h2>
<p>Imagine precisely what kind of data you need. <em>Draw</em> the table you want to get.</p>
<p><img data-src="images/sp_traits.png" style="width:55.0%"></p>
<!--Slide 4 -->
</section>
<section id="try-a-database-for-plant-traits" class="slide level2">
<h2>TRY: a database for plant traits</h2>
<blockquote>
<p><strong>TRY data portal</strong>: <a href="https://www.try-db.org/TryWeb/dp.php">https://www.try-db.org/TryWeb/dp.php</a></p>
</blockquote>
<h3 id="st-step-understanding-how-the-data-is-structured">1st step : understanding how the data is structured</h3>
<p>Check out the <a href="https://www.try-db.org/de/de.php">data explorer</a> section.</p>
<p><em>What are the traits like ? How are they measured ? If there are several measures of the same trait, which one will you choose ?</em></p>
<!--Slide 4 -->
</section>
<section id="try-a-database-for-plant-traits-1" class="slide level2">
<h2>TRY: a database for plant traits</h2>
<blockquote>
<p><strong>TRY data portal</strong>: <a href="https://www.try-db.org/TryWeb/dp.php">https://www.try-db.org/TryWeb/dp.php</a></p>
</blockquote>
<h3 id="st-step-understanding-how-the-data-is-structured-1">1st step : understanding how the data is structured</h3>
<p>Check out the <a href="https://www.try-db.org/de/de.php">data explorer</a> section.</p>
<p><em>What are the traits like ? How are they measured ? If there are several measures of the same trait, which one will you choose ?</em></p>
<p>Explore the `trait table``.</p>
<p>Let’s try <code>leaf area</code> –&gt; 88 traits contain “leaf area” in their description!</p>
<p>Notice the <code>Trait ID</code> column, this is what you’ll need to query the trait(s) you select.</p>
<blockquote>
<p>Trait IDs examples: LAI = 3116 , Flower size = 3568, Photosynthesis : intercellular CO2 concentration = 49</p>
</blockquote>
<!--Slide 4 -->
</section>
<section id="try-a-database-for-plant-traits-2" class="slide level2">
<h2>TRY: a database for plant traits</h2>
<blockquote>
<p><strong>TRY data portal</strong>: <a href="https://www.try-db.org/TryWeb/dp.php">https://www.try-db.org/TryWeb/dp.php</a></p>
</blockquote>
<h3 id="st-step-understanding-how-the-data-is-structured-2">1st step : understanding how the data is structured</h3>
<p>Check out the <a href="https://www.try-db.org/de/de.php">data explorer</a> section.</p>
<p><em>What are the traits like ? How are they measured ? If there are several measures of the same trait, which one will you choose ?</em></p>
<p>Explore the `trait table``.</p>
<p>Let’s try <code>leaf area</code> –&gt; 88 traits contain “leaf area” in their description!</p>
<p>Notice the <code>Trait ID</code> column, this is what you’ll need to query the trait(s) you select.</p>
<blockquote>
<p>Trait IDs examples: LAI = 3116 , Flower size = 3568, Photosynthesis : intercellular CO2 concentration = 49</p>
</blockquote>
<p><strong>Other table fields:</strong></p>
<ul>
<li><p><code>ObsNum</code>: Number of Observations</p></li>
<li><p><code>ObsGRNum</code>: Number of geo-referenced Observations</p></li>
<li><p><code>AccSpecNum</code>: Number of Accepted Species</p></li>
</ul>
<!--Slide 5 -->
</section>
<section id="look-at-the-species-list" class="slide level2">
<h2>2. Look at the species list</h2>
<p>Get species IDS:</p>
<ul>
<li><p>Arabidopsis thaliana : 4341</p></li>
<li><p>Bellis perennis: 7173</p></li>
<li><p>Quercus ilex: 45402</p></li>
</ul>
<!--Slide 5 -->
</section>
<section id="look-at-the-species-list-1" class="slide level2">
<h2>2. Look at the species list</h2>
<p>Get species IDS:</p>
<ul>
<li><p>Arabidopsis thaliana : 4341</p></li>
<li><p>Bellis perennis: 7173</p></li>
<li><p>Quercus ilex: 45402</p></li>
</ul>
<p><strong>Get data</strong></p>
<p>Register, go to <code>request data</code>. Now you can file in the trait IDs.</p>
<p>Submit request. Write a short description of your project. You’ll receive a text file by email within a few days.</p>
<blockquote>
<p>Requesting data can take several days.</p>
</blockquote>
<!--Slide 6 -->
</section>
<section id="also-you-may-encounter-encoding-issues." class="slide level2">
<h2>Also, you may encounter encoding issues.</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href=""></a>t <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/36266.txt"</span>, <span class="at">sep=</span><span class="st">"</span><span class="sc">\t</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>## Error in type.convert.default(data[[i]], as.is = as.is[i], dec = dec, : invalid multibyte string at '&lt;dc&gt;lo'</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href=""></a>readr<span class="sc">::</span><span class="fu">guess_encoding</span>(<span class="st">"data/36266.txt"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 2 × 2
##   encoding   confidence
##   &lt;chr&gt;           &lt;dbl&gt;
## 1 ISO-8859-1       0.4 
## 2 ISO-8859-2       0.21</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href=""></a>t <span class="ot">&lt;-</span> utils<span class="sc">::</span><span class="fu">read.csv2</span>(<span class="at">file =</span> <span class="fu">file</span>(<span class="st">"data/36266.txt"</span>, <span class="at">encoding =</span> <span class="st">'ISO-8859-1'</span>), <span class="at">sep=</span><span class="st">"</span><span class="sc">\t</span><span class="st">"</span>)</span>
<span id="cb5-2"><a href=""></a><span class="fu">colnames</span>(t)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##  [1] "LastName"              "FirstName"             "DatasetID"            
##  [4] "Dataset"               "SpeciesName"           "AccSpeciesID"         
##  [7] "AccSpeciesName"        "ObservationID"         "ObsDataID"            
## [10] "TraitID"               "TraitName"             "DataID"               
## [13] "DataName"              "OriglName"             "OrigValueStr"         
## [16] "OrigUnitStr"           "ValueKindName"         "OrigUncertaintyStr"   
## [19] "UncertaintyName"       "Replicates"            "StdValue"             
## [22] "UnitName"              "RelUncertaintyPercent" "OrigObsDataID"        
## [25] "ErrorRisk"             "Reference"             "Comment"              
## [28] "StdValueStr"           "X"</code></pre>
</div>
</div>
<!-- Side 7 -->
</section>
<section id="alternative-import-via-r" class="slide level2">
<h2>Alternative import <em>via</em> R:</h2>
<p>The quite handy R package <code>rtry</code>.</p>
<p>Solves the encoding problem:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href=""></a>t2 <span class="ot">&lt;-</span> rtry<span class="sc">::</span><span class="fu">rtry_import</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"36266.txt"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And this takes us to the next section…</p>
<!-- Insert section 'Scripting' -->
</section></section>
<section>
<section id="scripting-10-min" class="title-slide slide level1 center">
<h1><i class="fa-solid fa-code fa-1x" aria-label="code"></i> &nbsp;&nbsp;Scripting (10 min)</h1>

</section>
<section id="alternative-to-manual-request-to-try" class="slide level2">
<h2>Alternative to manual request to TRY</h2>
<p>The quite handy R package <code>rtry</code>.</p>
<p>Solves the encoding problem:</p>
<!-- Side 1 -->
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href=""></a>t2 <span class="ot">&lt;-</span> rtry<span class="sc">::</span><span class="fu">rtry_import</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"36266.txt"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- Insert section 'API' -->
</section></section>
<section>
<section id="api-15-min" class="title-slide slide level1 center">
<h1><i class="fa-solid fa-wrench fa-1x" aria-label="wrench"></i> &nbsp;&nbsp;API (15 min)</h1>

</section>
<section id="accessing-data-from-the-web" class="slide level2">
<h2>Accessing data from the Web</h2>
<p><br><br><br><br></p>
<div class="columns">
<div class="column center" style="width:45%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/user-interface.png"></p>
<figcaption><strong>User interface</strong></figcaption>
</figure>
</div>
</div><div class="column center" style="width:10%;">

</div><div class="column center" style="width:45%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/code-interface.png"></p>
<figcaption><strong>Code interface</strong></figcaption>
</figure>
</div>
</div></div>
<div class="columns">
<div class="column center" style="width:45%;">
<p><i class="fa-solid fa-computer-mouse fa-lg" aria-label="computer-mouse"></i></p>
</div><div class="column center" style="width:10%;">

</div><div class="column center" style="width:45%;">
<p><i class="fa-solid fa-code fa-lg" aria-label="code"></i></p>
</div></div>
<!--

## API - Definition

Abbreviation of **Application Programming Interface**[^1]

- It is a type of software interface, offering a service to other pieces of software.
- In contrast to a _user interface_, which connects a software to a person, an API connects pieces of software to each other.
- **_API specification_**: documentation describing how to use such a connection ([Swagger](https://swagger.io/)).

. . .

<br><br>

Different types of API:

- Library and framework API
- Operating systems API
- Remote API
- **Web API**


[^1]: Source: [Wikipedia](https://en.wikipedia.org/wiki/API)
-->
</section>
<section id="restful-web-api" class="slide level2">
<h2>(RESTful) Web API</h2>
<blockquote>
<p><strong>Definition</strong>: A service accessed from a client device (mobile phones, laptops, etc.) to a Web server using the Hypertext Transfer Protocol (HTTP)<sup>1</sup>.</p>
</blockquote>
<ul>
<li>The <strong>client</strong> sends an HTTP <strong>request</strong> to the Web server</li>
<li>The Web <strong>server</strong> sends back a <strong>response</strong> in <a href="https://en.wikipedia.org/wiki/JSON"><strong>JSON</strong></a> or <a href="https://en.wikipedia.org/wiki/XML"><strong>XML</strong></a> format (raw data)</li>
<li>The Web server exposes one or more <strong>endpoints</strong> (predefined request/response)</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/code-interface.png" style="width:50.0%"></p>
<figcaption><strong>Code interface</strong></figcaption>
</figure>
</div>
<aside><ol class="aside-footnotes"><li id="fn1"><p>Source: <a href="https://en.wikipedia.org/wiki/Web_API">Wikipedia</a></p></li></ol></aside></section>
<section id="restful-web-api-1" class="slide level2">
<h2>(RESTful) Web API</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Advantages</strong> (for the user)</p>
<ul>
<li>User can create its own client</li>
<li>Client can be developed in any language</li>
<li>User can include the service in a bigger project</li>
<li>User access raw data</li>
</ul>
<p><br><br></p>
<blockquote>
<p>Writing code means <strong>automation</strong> and <strong>reproducibility</strong></p>
</blockquote>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="restful-web-api-2" class="slide level2">
<h2>(RESTful) Web API</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Advantages</strong> (for the user)</p>
<ul>
<li>User can create its own client</li>
<li>Client can be developed in any language</li>
<li>User can include the service in a bigger project</li>
<li>User access raw data</li>
</ul>
<p><br><br></p>
<blockquote>
<p>Writing code means <strong>automation</strong> and <strong>reproducibility</strong></p>
</blockquote>
</div><div class="column" style="width:50%;">
<p><strong>Limitations</strong></p>
<ul>
<li>Each API has its own specification</li>
<li>Authentication method (free or not)
<ul>
<li>Token</li>
<li>Login and password</li>
</ul></li>
<li>Some restrictions
<ul>
<li>Number of requests per day/month</li>
<li>Number of records per request</li>
<li>Incomplete data</li>
</ul></li>
</ul>
</div></div>
</section>
<section id="example-of-apis" class="slide level2">
<h2>Example of APIs</h2>
<p><em>This is a non-exhaustive list</em></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Biodiversity data</strong></p>
<ul>
<li>Global Biodiversity Information Facility (GBIF) - <a href="https://techdocs.gbif.org/en/openapi/"><code>API</code></a></li>
<li>IUCN Red List - <a href="https://apiv3.iucnredlist.org/api/v3/docs"><code>API</code></a></li>
<li>Fishbase - <a href="https://fishbaseapi.readme.io/reference/getting-started"><code>API</code></a></li>
<li>Species+/CITES Checklist - <a href="https://api.speciesplus.net/"><code>API</code></a></li>
<li>Knowledge Network for Biocomplexity (KNB) - <a href="https://knb.ecoinformatics.org/api"><code>API</code></a></li>
</ul>
<p><strong>Taxonomy</strong></p>
<ul>
<li>Encyclopedia of Life (EOL) - <a href="https://eol.org/docs/what-is-eol/classic-apis"><code>API</code></a></li>
<li>Integrated Taxonomic Information System (ITIS) - <a href="https://www.itis.gov/ws_description.html"><code>API</code></a></li>
<li>Barcode of Life Data (BOLD) - <a href="https://v3.boldsystems.org/index.php/api_home"><code>API</code></a></li>
<li>World Register of Marine Species (WoRMS) - <a href="https://www.marinespecies.org/rest/"><code>API</code></a></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<p><strong>Scientific literature</strong></p>
<ul>
<li>Web of Science - <a href="https://developer.clarivate.com/apis"><code>API</code></a></li>
<li>Scopus - <a href="https://dev.elsevier.com/"><code>API</code></a></li>
<li>CrossRef - <a href="https://www.crossref.org/documentation/retrieve-metadata/rest-api/"><code>API</code></a></li>
<li>OpenAlex - <a href="https://docs.openalex.org/how-to-use-the-api/api-overview"><code>API</code></a></li>
</ul>
<p><strong>Others</strong></p>
<ul>
<li>Wikipedia - <a href="https://www.mediawiki.org/wiki/API:Main_page"><code>API</code></a></li>
<li>OpenStreetMap - <a href="https://wiki.openstreetmap.org/wiki/API"><code>API</code></a></li>
<li>Zenodo - <a href="https://developers.zenodo.org/"><code>API</code></a></li>
</ul>
</div></div>
</section>
<section id="how-does-it-work" class="slide level2">
<h2>How does it work?</h2>
<blockquote>
<p>Requesting an API is based on the <strong>client-server protocol</strong></p>
</blockquote>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/request-response.png" class="quarto-figure quarto-figure-center" style="width:80.0%"></p>
</figure>
</div>
</section>
<section id="api-client" class="slide level2">
<h2>API Client</h2>
<blockquote>
<p>It’s the tool you use to request the API and parse the response (data).</p>
</blockquote>
<p><br></p>
<div class="fragment">
<p>If you are lucky, an API client will <strong>already be available</strong>.</p>
<p><br></p>
<p>Non-exhaustive list of <i class="fa-brands fa-r-project" aria-label="r-project"></i> packages</p>
<div class="columns">
<div class="column" style="width:25%;">
<ul>
<li><a href="https://docs.ropensci.org/rgbif/articles/rgbif.html"><code>rgbif</code></a></li>
<li><a href="https://docs.ropensci.org/taxize/articles/taxize.html"><code>taxize</code></a></li>
<li><a href="https://docs.ropensci.org/rcites/"><code>rcites</code></a></li>
</ul>
</div><div class="column" style="width:25%;">
<ul>
<li><a href="https://docs.ropensci.org/rredlist/"><code>rredlist</code></a></li>
<li><a href="https://docs.ropensci.org/rfishbase/"><code>rfishbase</code></a></li>
<li><a href="https://github.com/Ironholds/WikipediR/"><code>WikipediR</code></a></li>
</ul>
</div><div class="column" style="width:25%;">
<ul>
<li><a href="https://frbcesab.github.io/rwosstarter"><code>rwosstarter</code></a></li>
<li><a href="https://github.com/muschellij2/rscopus"><code>rscopus</code></a></li>
<li><a href="https://docs.ropensci.org/rcrossref/"><code>rcrossref</code></a></li>
</ul>
</div><div class="column" style="width:25%;">
<ul>
<li><a href="https://docs.ropensci.org/openalexR/"><code>openalexR</code></a></li>
<li><a href="https://docs.ropensci.org/osmdata/"><code>osmdata</code></a></li>
</ul>
</div></div>
</div>
<div class="fragment">
<p><br><br></p>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Otherwise you will have to <strong>build your own client</strong>.</p>
</div>
</section>
<section id="building-an-api-client" class="slide level2">
<h2>Building an API client</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="images/httr2-screenshot.png"></p>
<p><br></p>
<p>Available at: <a href="https://httr2.r-lib.org/" class="uri">https://httr2.r-lib.org/</a></p>
</div><div class="column" style="width:50%;">
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href=""></a><span class="co"># Install 'httr2' package ----</span></span>
<span id="cb9-2"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"httr2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<table class="caption-top">
<caption>Table: Main functions of <code>httr2</code></caption>
<thead>
<tr class="header">
<th style="text-align: left;">Function</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>request()</code></td>
<td style="text-align: left;">Create an HTTP request</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>req_url_query()</code></td>
<td style="text-align: left;">Add parameters to an HTTP request</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>req_perform()</code></td>
<td style="text-align: left;">Send HTTP request to an API</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>resp_status()</code></td>
<td style="text-align: left;">Check the HTTP response status</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>resp_content_type()</code></td>
<td style="text-align: left;">Check the content type of the response</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>resp_body_json()</code></td>
<td style="text-align: left;">Parse the response content (JSON format)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>resp_body_xml()</code></td>
<td style="text-align: left;">Parse the response content (XML format)</td>
</tr>
</tbody>
</table>
</div></div>
</section>
<section id="building-an-api-client-1" class="slide level2">
<h2>Building an API client</h2>
<p>Example with the <strong>OpenStreetMap Nominatim</strong> <a href="https://nominatim.org/release-docs/develop/api/Overview/">API</a></p>
<blockquote>
<p>Retrieve coordinates from a location (city, address, building, etc.)</p>
</blockquote>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><a href="https://nominatim.openstreetmap.org/ui/search.html"><img data-src="images/nominatim-screenshot.png" class="quarto-figure quarto-figure-center" style="width:70.0%"></a></p>
</figure>
</div>
</section>
<section id="nominatim-api-client" class="slide level2">
<h2>Nominatim API client</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>1. Build the HTTP request</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href=""></a><span class="co"># Nominatim API endpoint ----</span></span>
<span id="cb10-2"><a href=""></a>endpoint <span class="ot">&lt;-</span> <span class="st">"https://nominatim.openstreetmap.org/search"</span></span>
<span id="cb10-3"><a href=""></a></span>
<span id="cb10-4"><a href=""></a><span class="co"># Prepare the HTTP request ----</span></span>
<span id="cb10-5"><a href=""></a>http_request <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">request</span>(endpoint)</span>
<span id="cb10-6"><a href=""></a></span>
<span id="cb10-7"><a href=""></a>http_request</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search</code></pre>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="nominatim-api-client-1" class="slide level2">
<h2>Nominatim API client</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>1. Build the HTTP request</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href=""></a><span class="co"># Nominatim API endpoint ----</span></span>
<span id="cb12-2"><a href=""></a>endpoint <span class="ot">&lt;-</span> <span class="st">"https://nominatim.openstreetmap.org/search"</span></span>
<span id="cb12-3"><a href=""></a></span>
<span id="cb12-4"><a href=""></a><span class="co"># Prepare the HTTP request ----</span></span>
<span id="cb12-5"><a href=""></a>http_request <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">request</span>(endpoint)</span>
<span id="cb12-6"><a href=""></a></span>
<span id="cb12-7"><a href=""></a>http_request</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search</code></pre>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href=""></a><span class="co"># Append request parameters ----</span></span>
<span id="cb14-2"><a href=""></a>http_request <span class="ot">&lt;-</span> http_request <span class="sc">|&gt;</span> </span>
<span id="cb14-3"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">city    =</span> <span class="st">"Montpellier"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb14-4"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">country =</span> <span class="st">"France"</span>)</span>
<span id="cb14-5"><a href=""></a></span>
<span id="cb14-6"><a href=""></a>http_request</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search?city=Montpellier&amp;country=France</code></pre>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="nominatim-api-client-2" class="slide level2">
<h2>Nominatim API client</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>1. Build the HTTP request</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href=""></a><span class="co"># Nominatim API endpoint ----</span></span>
<span id="cb16-2"><a href=""></a>endpoint <span class="ot">&lt;-</span> <span class="st">"https://nominatim.openstreetmap.org/search"</span></span>
<span id="cb16-3"><a href=""></a></span>
<span id="cb16-4"><a href=""></a><span class="co"># Prepare the HTTP request ----</span></span>
<span id="cb16-5"><a href=""></a>http_request <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">request</span>(endpoint)</span>
<span id="cb16-6"><a href=""></a></span>
<span id="cb16-7"><a href=""></a>http_request</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search</code></pre>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href=""></a><span class="co"># Append request parameters ----</span></span>
<span id="cb18-2"><a href=""></a>http_request <span class="ot">&lt;-</span> http_request <span class="sc">|&gt;</span> </span>
<span id="cb18-3"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">city    =</span> <span class="st">"Montpellier"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb18-4"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">country =</span> <span class="st">"France"</span>)</span>
<span id="cb18-5"><a href=""></a></span>
<span id="cb18-6"><a href=""></a>http_request</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search?city=Montpellier&amp;country=France</code></pre>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href=""></a><span class="co"># Append response parameters ----</span></span>
<span id="cb20-2"><a href=""></a>http_request <span class="ot">&lt;-</span> http_request <span class="sc">|&gt;</span> </span>
<span id="cb20-3"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">format =</span> <span class="st">"json"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb20-4"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">limit  =</span> <span class="dv">1</span>)</span>
<span id="cb20-5"><a href=""></a></span>
<span id="cb20-6"><a href=""></a>http_request</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search?city=Montpellier&amp;country=France&amp;
format=json&amp;limit=1</code></pre>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="nominatim-api-client-3" class="slide level2">
<h2>Nominatim API client</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>1. Build the HTTP request</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href=""></a><span class="co"># Nominatim API endpoint ----</span></span>
<span id="cb22-2"><a href=""></a>endpoint <span class="ot">&lt;-</span> <span class="st">"https://nominatim.openstreetmap.org/search"</span></span>
<span id="cb22-3"><a href=""></a></span>
<span id="cb22-4"><a href=""></a><span class="co"># Prepare the HTTP request ----</span></span>
<span id="cb22-5"><a href=""></a>http_request <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">request</span>(endpoint)</span>
<span id="cb22-6"><a href=""></a></span>
<span id="cb22-7"><a href=""></a>http_request</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search</code></pre>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href=""></a><span class="co"># Append request parameters ----</span></span>
<span id="cb24-2"><a href=""></a>http_request <span class="ot">&lt;-</span> http_request <span class="sc">|&gt;</span> </span>
<span id="cb24-3"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">city    =</span> <span class="st">"Montpellier"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb24-4"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">country =</span> <span class="st">"France"</span>)</span>
<span id="cb24-5"><a href=""></a></span>
<span id="cb24-6"><a href=""></a>http_request</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search?city=Montpellier&amp;country=France</code></pre>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href=""></a><span class="co"># Append response parameters ----</span></span>
<span id="cb26-2"><a href=""></a>http_request <span class="ot">&lt;-</span> http_request <span class="sc">|&gt;</span> </span>
<span id="cb26-3"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">format =</span> <span class="st">"json"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb26-4"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">limit  =</span> <span class="dv">1</span>)</span>
<span id="cb26-5"><a href=""></a></span>
<span id="cb26-6"><a href=""></a>http_request</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search?city=Montpellier&amp;country=France&amp;
format=json&amp;limit=1</code></pre>
</div><div class="column" style="width:50%;">
<p><strong>2. Send the HTTP request</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href=""></a><span class="co"># Send HTTP request  ----</span></span>
<span id="cb28-2"><a href=""></a>http_response <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">req_perform</span>(http_request)</span>
<span id="cb28-3"><a href=""></a></span>
<span id="cb28-4"><a href=""></a>http_response</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>Status: 200 OK
Content-Type: application/json</code></pre>
</div></div>
</section>
<section id="nominatim-api-client-4" class="slide level2">
<h2>Nominatim API client</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>1. Build the HTTP request</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href=""></a><span class="co"># Nominatim API endpoint ----</span></span>
<span id="cb30-2"><a href=""></a>endpoint <span class="ot">&lt;-</span> <span class="st">"https://nominatim.openstreetmap.org/search"</span></span>
<span id="cb30-3"><a href=""></a></span>
<span id="cb30-4"><a href=""></a><span class="co"># Prepare the HTTP request ----</span></span>
<span id="cb30-5"><a href=""></a>http_request <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">request</span>(endpoint)</span>
<span id="cb30-6"><a href=""></a></span>
<span id="cb30-7"><a href=""></a>http_request</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search</code></pre>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href=""></a><span class="co"># Append request parameters ----</span></span>
<span id="cb32-2"><a href=""></a>http_request <span class="ot">&lt;-</span> http_request <span class="sc">|&gt;</span> </span>
<span id="cb32-3"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">city    =</span> <span class="st">"Montpellier"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb32-4"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">country =</span> <span class="st">"France"</span>)</span>
<span id="cb32-5"><a href=""></a></span>
<span id="cb32-6"><a href=""></a>http_request</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search?city=Montpellier&amp;country=France</code></pre>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href=""></a><span class="co"># Append response parameters ----</span></span>
<span id="cb34-2"><a href=""></a>http_request <span class="ot">&lt;-</span> http_request <span class="sc">|&gt;</span> </span>
<span id="cb34-3"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">format =</span> <span class="st">"json"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb34-4"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">limit  =</span> <span class="dv">1</span>)</span>
<span id="cb34-5"><a href=""></a></span>
<span id="cb34-6"><a href=""></a>http_request</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search?city=Montpellier&amp;country=France&amp;
format=json&amp;limit=1</code></pre>
</div><div class="column" style="width:50%;">
<p><strong>2. Send the HTTP request</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href=""></a><span class="co"># Send HTTP request  ----</span></span>
<span id="cb36-2"><a href=""></a>http_response <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">req_perform</span>(http_request)</span>
<span id="cb36-3"><a href=""></a></span>
<span id="cb36-4"><a href=""></a>http_response</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>Status: 200 OK
Content-Type: application/json</code></pre>
<p><br></p>
<p><strong>3. Check response status</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href=""></a><span class="co"># Check response status ----</span></span>
<span id="cb38-2"><a href=""></a>httr2<span class="sc">::</span><span class="fu">resp_status</span>(http_response)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] 200</code></pre>
</div>
</div>
</div></div>
</section>
<section id="nominatim-api-client-5" class="slide level2">
<h2>Nominatim API client</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>1. Build the HTTP request</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href=""></a><span class="co"># Nominatim API endpoint ----</span></span>
<span id="cb40-2"><a href=""></a>endpoint <span class="ot">&lt;-</span> <span class="st">"https://nominatim.openstreetmap.org/search"</span></span>
<span id="cb40-3"><a href=""></a></span>
<span id="cb40-4"><a href=""></a><span class="co"># Prepare the HTTP request ----</span></span>
<span id="cb40-5"><a href=""></a>http_request <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">request</span>(endpoint)</span>
<span id="cb40-6"><a href=""></a></span>
<span id="cb40-7"><a href=""></a>http_request</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search</code></pre>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href=""></a><span class="co"># Append request parameters ----</span></span>
<span id="cb42-2"><a href=""></a>http_request <span class="ot">&lt;-</span> http_request <span class="sc">|&gt;</span> </span>
<span id="cb42-3"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">city    =</span> <span class="st">"Montpellier"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb42-4"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">country =</span> <span class="st">"France"</span>)</span>
<span id="cb42-5"><a href=""></a></span>
<span id="cb42-6"><a href=""></a>http_request</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search?city=Montpellier&amp;country=France</code></pre>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href=""></a><span class="co"># Append response parameters ----</span></span>
<span id="cb44-2"><a href=""></a>http_request <span class="ot">&lt;-</span> http_request <span class="sc">|&gt;</span> </span>
<span id="cb44-3"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">format =</span> <span class="st">"json"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb44-4"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">limit  =</span> <span class="dv">1</span>)</span>
<span id="cb44-5"><a href=""></a></span>
<span id="cb44-6"><a href=""></a>http_request</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search?city=Montpellier&amp;country=France&amp;
format=json&amp;limit=1</code></pre>
</div><div class="column" style="width:50%;">
<p><strong>2. Send the HTTP request</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href=""></a><span class="co"># Send HTTP request  ----</span></span>
<span id="cb46-2"><a href=""></a>http_response <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">req_perform</span>(http_request)</span>
<span id="cb46-3"><a href=""></a></span>
<span id="cb46-4"><a href=""></a>http_response</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>Status: 200 OK
Content-Type: application/json</code></pre>
<p><br></p>
<p><strong>3. Check response status</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href=""></a><span class="co"># Check response status ----</span></span>
<span id="cb48-2"><a href=""></a>httr2<span class="sc">::</span><span class="fu">resp_status</span>(http_response)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] 200</code></pre>
</div>
</div>
<p><br></p>
<p><strong>4. Check response content type</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href=""></a><span class="co"># Check response status ----</span></span>
<span id="cb50-2"><a href=""></a>httr2<span class="sc">::</span><span class="fu">resp_content_type</span>(http_response)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "application/json"</code></pre>
</div>
</div>
</div></div>
</section>
<section id="nominatim-api-client-6" class="slide level2">
<h2>Nominatim API client</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>5. Parse response content</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href=""></a><span class="co"># Parse response content ----</span></span>
<span id="cb52-2"><a href=""></a>content <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">resp_body_json</span>(http_response)</span>
<span id="cb52-3"><a href=""></a></span>
<span id="cb52-4"><a href=""></a>content</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [[1]]
## [[1]]$place_id
## [1] 104509929
## 
## [[1]]$licence
## [1] "Data © OpenStreetMap contributors, ODbL 1.0. http://osm.org/copyright"
## 
## [[1]]$osm_type
## [1] "relation"
## 
## [[1]]$osm_id
## [1] 28722
## 
## [[1]]$lat
## [1] "43.6112422"
## 
## [[1]]$lon
## [1] "3.8767337"
## 
## [[1]]$class
## [1] "boundary"
## 
## [[1]]$type
## [1] "administrative"
## 
## [[1]]$place_rank
## [1] 16
## 
## [[1]]$importance
## [1] 0.6880008
## 
## [[1]]$addresstype
## [1] "city"
## 
## [[1]]$name
## [1] "Montpellier"
## 
## [[1]]$display_name
## [1] "Montpellier, Hérault, Occitanie, France métropolitaine, France"
## 
## [[1]]$boundingbox
## [[1]]$boundingbox[[1]]
## [1] "43.5667083"
## 
## [[1]]$boundingbox[[2]]
## [1] "43.6533580"
## 
## [[1]]$boundingbox[[3]]
## [1] "3.8070597"
## 
## [[1]]$boundingbox[[4]]
## [1] "3.9413208"</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href=""></a><span class="co"># Object type ----</span></span>
<span id="cb54-2"><a href=""></a><span class="fu">class</span>(content)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "list"</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href=""></a><span class="co"># Object dimensions ----</span></span>
<span id="cb56-2"><a href=""></a><span class="fu">length</span>(content)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] 1</code></pre>
</div>
</div>
</div></div>
</section>
<section id="nominatim-api-client-7" class="slide level2">
<h2>Nominatim API client</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>5. Parse response content</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href=""></a><span class="co"># Parse response content ----</span></span>
<span id="cb58-2"><a href=""></a>content <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">resp_body_json</span>(http_response)</span>
<span id="cb58-3"><a href=""></a></span>
<span id="cb58-4"><a href=""></a>content</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [[1]]
## [[1]]$place_id
## [1] 104509929
## 
## [[1]]$licence
## [1] "Data © OpenStreetMap contributors, ODbL 1.0. http://osm.org/copyright"
## 
## [[1]]$osm_type
## [1] "relation"
## 
## [[1]]$osm_id
## [1] 28722
## 
## [[1]]$lat
## [1] "43.6112422"
## 
## [[1]]$lon
## [1] "3.8767337"
## 
## [[1]]$class
## [1] "boundary"
## 
## [[1]]$type
## [1] "administrative"
## 
## [[1]]$place_rank
## [1] 16
## 
## [[1]]$importance
## [1] 0.6880008
## 
## [[1]]$addresstype
## [1] "city"
## 
## [[1]]$name
## [1] "Montpellier"
## 
## [[1]]$display_name
## [1] "Montpellier, Hérault, Occitanie, France métropolitaine, France"
## 
## [[1]]$boundingbox
## [[1]]$boundingbox[[1]]
## [1] "43.5667083"
## 
## [[1]]$boundingbox[[2]]
## [1] "43.6533580"
## 
## [[1]]$boundingbox[[3]]
## [1] "3.8070597"
## 
## [[1]]$boundingbox[[4]]
## [1] "3.9413208"</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href=""></a><span class="co"># Object type ----</span></span>
<span id="cb60-2"><a href=""></a><span class="fu">class</span>(content)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "list"</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href=""></a><span class="co"># Object dimensions ----</span></span>
<span id="cb62-2"><a href=""></a><span class="fu">length</span>(content)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] 1</code></pre>
</div>
</div>
<p><br></p>
<p><strong>6. Clean data</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href=""></a><span class="co"># Clean output ----</span></span>
<span id="cb64-2"><a href=""></a>content <span class="ot">&lt;-</span> content[[<span class="dv">1</span>]]</span>
<span id="cb64-3"><a href=""></a></span>
<span id="cb64-4"><a href=""></a>content <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">"name"</span> <span class="ot">=</span> content<span class="sc">$</span><span class="st">"name"</span>,</span>
<span id="cb64-5"><a href=""></a>                      <span class="st">"lon"</span>  <span class="ot">=</span> <span class="fu">as.numeric</span>(content<span class="sc">$</span><span class="st">"lon"</span>),</span>
<span id="cb64-6"><a href=""></a>                      <span class="st">"lat"</span>  <span class="ot">=</span> <span class="fu">as.numeric</span>(content<span class="sc">$</span><span class="st">"lat"</span>))</span>
<span id="cb64-7"><a href=""></a>content</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##          name      lon      lat
## 1 Montpellier 3.876734 43.61124</code></pre>
</div>
</div>
</div></div>
</section>
<section id="visualization" class="slide level2">
<h2>Visualization</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href=""></a><span class="co"># Install required package ----</span></span>
<span id="cb66-2"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"maps"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href=""></a><span class="co"># Map France boundary ----</span></span>
<span id="cb67-2"><a href=""></a>maps<span class="sc">::</span><span class="fu">map</span>(<span class="at">regions =</span> <span class="st">"France"</span>, </span>
<span id="cb67-3"><a href=""></a>          <span class="at">fill    =</span> <span class="cn">TRUE</span>, </span>
<span id="cb67-4"><a href=""></a>          <span class="at">col     =</span> <span class="st">"black"</span>)</span>
<span id="cb67-5"><a href=""></a></span>
<span id="cb67-6"><a href=""></a><span class="co"># Add retrieved coordinates ----</span></span>
<span id="cb67-7"><a href=""></a><span class="fu">points</span>(<span class="at">x   =</span> content<span class="sc">$</span><span class="st">"lon"</span>, </span>
<span id="cb67-8"><a href=""></a>       <span class="at">y   =</span> content<span class="sc">$</span><span class="st">"lat"</span>, </span>
<span id="cb67-9"><a href=""></a>       <span class="at">pch =</span> <span class="dv">19</span>, </span>
<span id="cb67-10"><a href=""></a>       <span class="at">cex =</span> <span class="dv">1</span>, </span>
<span id="cb67-11"><a href=""></a>       <span class="at">col =</span> <span class="st">"red"</span>)</span>
<span id="cb67-12"><a href=""></a></span>
<span id="cb67-13"><a href=""></a><span class="co"># Add retrieved name ----</span></span>
<span id="cb67-14"><a href=""></a><span class="fu">text</span>(<span class="at">x      =</span> content<span class="sc">$</span><span class="st">"lon"</span>, </span>
<span id="cb67-15"><a href=""></a>     <span class="at">y      =</span> content<span class="sc">$</span><span class="st">"lat"</span>, </span>
<span id="cb67-16"><a href=""></a>     <span class="at">labels =</span> content<span class="sc">$</span><span class="st">"name"</span>, </span>
<span id="cb67-17"><a href=""></a>     <span class="at">pos    =</span> <span class="dv">2</span>, </span>
<span id="cb67-18"><a href=""></a>     <span class="at">col    =</span> <span class="st">"white"</span>, </span>
<span id="cb67-19"><a href=""></a>     <span class="at">family =</span> <span class="st">"serif"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column center" style="width:50%;">
<div class="cell" data-layout-align="right">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-right">
<figure>
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-59-1.png" class="quarto-figure quarto-figure-right" width="384"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="code-factorisation" class="slide level2">
<h2>Code factorisation</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Function definition</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href=""></a>get_coords_from_location <span class="ot">&lt;-</span> <span class="cf">function</span>(city, country) {</span>
<span id="cb68-2"><a href=""></a>  </span>
<span id="cb68-3"><a href=""></a>  <span class="co"># Nominatim API endpoint ----</span></span>
<span id="cb68-4"><a href=""></a>  endpoint <span class="ot">&lt;-</span> <span class="st">"https://nominatim.openstreetmap.org/search"</span></span>
<span id="cb68-5"><a href=""></a></span>
<span id="cb68-6"><a href=""></a>  <span class="co"># Prepare the HTTP request ----</span></span>
<span id="cb68-7"><a href=""></a>  http_request <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">request</span>(endpoint)</span>
<span id="cb68-8"><a href=""></a>  </span>
<span id="cb68-9"><a href=""></a>  <span class="co"># Append request parameters ----</span></span>
<span id="cb68-10"><a href=""></a>  http_request <span class="ot">&lt;-</span> http_request <span class="sc">|&gt;</span> </span>
<span id="cb68-11"><a href=""></a>    httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">city    =</span> city) <span class="sc">|&gt;</span> </span>
<span id="cb68-12"><a href=""></a>    httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">country =</span> country) <span class="sc">|&gt;</span> </span>
<span id="cb68-13"><a href=""></a>    httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">format =</span> <span class="st">"json"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb68-14"><a href=""></a>    httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">limit  =</span> <span class="dv">1</span>)</span>
<span id="cb68-15"><a href=""></a>  </span>
<span id="cb68-16"><a href=""></a>  <span class="co"># Send HTTP request  ----</span></span>
<span id="cb68-17"><a href=""></a>  http_response <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">req_perform</span>(http_request)</span>
<span id="cb68-18"><a href=""></a>  </span>
<span id="cb68-19"><a href=""></a>  <span class="co"># Check response status ----</span></span>
<span id="cb68-20"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">resp_check_status</span>(http_response)</span>
<span id="cb68-21"><a href=""></a>  </span>
<span id="cb68-22"><a href=""></a>  <span class="co"># Parse response content ----</span></span>
<span id="cb68-23"><a href=""></a>  content <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">resp_body_json</span>(http_response)</span>
<span id="cb68-24"><a href=""></a>  </span>
<span id="cb68-25"><a href=""></a>  <span class="co"># Clean output ----</span></span>
<span id="cb68-26"><a href=""></a>  content <span class="ot">&lt;-</span> content[[<span class="dv">1</span>]]</span>
<span id="cb68-27"><a href=""></a>  content <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">"name"</span> <span class="ot">=</span> content<span class="sc">$</span><span class="st">"name"</span>,</span>
<span id="cb68-28"><a href=""></a>                        <span class="st">"lon"</span>  <span class="ot">=</span> <span class="fu">as.numeric</span>(content<span class="sc">$</span><span class="st">"lon"</span>),</span>
<span id="cb68-29"><a href=""></a>                        <span class="st">"lat"</span>  <span class="ot">=</span> <span class="fu">as.numeric</span>(content<span class="sc">$</span><span class="st">"lat"</span>))</span>
<span id="cb68-30"><a href=""></a>  content</span>
<span id="cb68-31"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="code-factorisation-1" class="slide level2">
<h2>Code factorisation</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Function definition</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href=""></a>get_coords_from_location <span class="ot">&lt;-</span> <span class="cf">function</span>(city, country) {</span>
<span id="cb69-2"><a href=""></a>  </span>
<span id="cb69-3"><a href=""></a>  <span class="co"># Nominatim API endpoint ----</span></span>
<span id="cb69-4"><a href=""></a>  endpoint <span class="ot">&lt;-</span> <span class="st">"https://nominatim.openstreetmap.org/search"</span></span>
<span id="cb69-5"><a href=""></a></span>
<span id="cb69-6"><a href=""></a>  <span class="co"># Prepare the HTTP request ----</span></span>
<span id="cb69-7"><a href=""></a>  http_request <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">request</span>(endpoint)</span>
<span id="cb69-8"><a href=""></a>  </span>
<span id="cb69-9"><a href=""></a>  <span class="co"># Append request parameters ----</span></span>
<span id="cb69-10"><a href=""></a>  http_request <span class="ot">&lt;-</span> http_request <span class="sc">|&gt;</span> </span>
<span id="cb69-11"><a href=""></a>    httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">city    =</span> city) <span class="sc">|&gt;</span> </span>
<span id="cb69-12"><a href=""></a>    httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">country =</span> country) <span class="sc">|&gt;</span> </span>
<span id="cb69-13"><a href=""></a>    httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">format =</span> <span class="st">"json"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb69-14"><a href=""></a>    httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">limit  =</span> <span class="dv">1</span>)</span>
<span id="cb69-15"><a href=""></a>  </span>
<span id="cb69-16"><a href=""></a>  <span class="co"># Send HTTP request  ----</span></span>
<span id="cb69-17"><a href=""></a>  http_response <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">req_perform</span>(http_request)</span>
<span id="cb69-18"><a href=""></a>  </span>
<span id="cb69-19"><a href=""></a>  <span class="co"># Check response status ----</span></span>
<span id="cb69-20"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">resp_check_status</span>(http_response)</span>
<span id="cb69-21"><a href=""></a>  </span>
<span id="cb69-22"><a href=""></a>  <span class="co"># Parse response content ----</span></span>
<span id="cb69-23"><a href=""></a>  content <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">resp_body_json</span>(http_response)</span>
<span id="cb69-24"><a href=""></a>  </span>
<span id="cb69-25"><a href=""></a>  <span class="co"># Clean output ----</span></span>
<span id="cb69-26"><a href=""></a>  content <span class="ot">&lt;-</span> content[[<span class="dv">1</span>]]</span>
<span id="cb69-27"><a href=""></a>  content <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">"name"</span> <span class="ot">=</span> content<span class="sc">$</span><span class="st">"name"</span>,</span>
<span id="cb69-28"><a href=""></a>                        <span class="st">"lon"</span>  <span class="ot">=</span> <span class="fu">as.numeric</span>(content<span class="sc">$</span><span class="st">"lon"</span>),</span>
<span id="cb69-29"><a href=""></a>                        <span class="st">"lat"</span>  <span class="ot">=</span> <span class="fu">as.numeric</span>(content<span class="sc">$</span><span class="st">"lat"</span>))</span>
<span id="cb69-30"><a href=""></a>  content</span>
<span id="cb69-31"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Function usage</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href=""></a><span class="co"># Retrieve coordinates ----</span></span>
<span id="cb70-2"><a href=""></a><span class="fu">get_coords_from_location</span>(<span class="at">city =</span> <span class="st">"Montpellier"</span>, <span class="at">country =</span> <span class="st">"France"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##          name      lon      lat
## 1 Montpellier 3.876734 43.61124</code></pre>
</div>
</div>
</div></div>
</section>
<section id="code-factorisation-2" class="slide level2">
<h2>Code factorisation</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Function definition</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href=""></a>get_coords_from_location <span class="ot">&lt;-</span> <span class="cf">function</span>(city, country) {</span>
<span id="cb72-2"><a href=""></a>  </span>
<span id="cb72-3"><a href=""></a>  <span class="co"># Nominatim API endpoint ----</span></span>
<span id="cb72-4"><a href=""></a>  endpoint <span class="ot">&lt;-</span> <span class="st">"https://nominatim.openstreetmap.org/search"</span></span>
<span id="cb72-5"><a href=""></a></span>
<span id="cb72-6"><a href=""></a>  <span class="co"># Prepare the HTTP request ----</span></span>
<span id="cb72-7"><a href=""></a>  http_request <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">request</span>(endpoint)</span>
<span id="cb72-8"><a href=""></a>  </span>
<span id="cb72-9"><a href=""></a>  <span class="co"># Append request parameters ----</span></span>
<span id="cb72-10"><a href=""></a>  http_request <span class="ot">&lt;-</span> http_request <span class="sc">|&gt;</span> </span>
<span id="cb72-11"><a href=""></a>    httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">city    =</span> city) <span class="sc">|&gt;</span> </span>
<span id="cb72-12"><a href=""></a>    httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">country =</span> country) <span class="sc">|&gt;</span> </span>
<span id="cb72-13"><a href=""></a>    httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">format =</span> <span class="st">"json"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb72-14"><a href=""></a>    httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">limit  =</span> <span class="dv">1</span>)</span>
<span id="cb72-15"><a href=""></a>  </span>
<span id="cb72-16"><a href=""></a>  <span class="co"># Send HTTP request  ----</span></span>
<span id="cb72-17"><a href=""></a>  http_response <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">req_perform</span>(http_request)</span>
<span id="cb72-18"><a href=""></a>  </span>
<span id="cb72-19"><a href=""></a>  <span class="co"># Check response status ----</span></span>
<span id="cb72-20"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">resp_check_status</span>(http_response)</span>
<span id="cb72-21"><a href=""></a>  </span>
<span id="cb72-22"><a href=""></a>  <span class="co"># Parse response content ----</span></span>
<span id="cb72-23"><a href=""></a>  content <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">resp_body_json</span>(http_response)</span>
<span id="cb72-24"><a href=""></a>  </span>
<span id="cb72-25"><a href=""></a>  <span class="co"># Clean output ----</span></span>
<span id="cb72-26"><a href=""></a>  content <span class="ot">&lt;-</span> content[[<span class="dv">1</span>]]</span>
<span id="cb72-27"><a href=""></a>  content <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">"name"</span> <span class="ot">=</span> content<span class="sc">$</span><span class="st">"name"</span>,</span>
<span id="cb72-28"><a href=""></a>                        <span class="st">"lon"</span>  <span class="ot">=</span> <span class="fu">as.numeric</span>(content<span class="sc">$</span><span class="st">"lon"</span>),</span>
<span id="cb72-29"><a href=""></a>                        <span class="st">"lat"</span>  <span class="ot">=</span> <span class="fu">as.numeric</span>(content<span class="sc">$</span><span class="st">"lat"</span>))</span>
<span id="cb72-30"><a href=""></a>  content</span>
<span id="cb72-31"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Function usage</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href=""></a><span class="co"># Retrieve coordinates ----</span></span>
<span id="cb73-2"><a href=""></a><span class="fu">get_coords_from_location</span>(<span class="at">city =</span> <span class="st">"Montpellier"</span>, <span class="at">country =</span> <span class="st">"France"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##          name      lon      lat
## 1 Montpellier 3.876734 43.61124</code></pre>
</div>
</div>
<p><br></p>
<p><strong>Automation</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href=""></a><span class="co"># List of cities ----</span></span>
<span id="cb75-2"><a href=""></a>cities <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Montpellier"</span>, <span class="st">"Paris"</span>, <span class="st">"Strasbourg"</span>, <span class="st">"Grenoble"</span>, <span class="st">"Bourges"</span>)</span>
<span id="cb75-3"><a href=""></a></span>
<span id="cb75-4"><a href=""></a><span class="co"># Retrieve coordinates ----</span></span>
<span id="cb75-5"><a href=""></a>coords <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb75-6"><a href=""></a></span>
<span id="cb75-7"><a href=""></a><span class="cf">for</span> (city <span class="cf">in</span> cities) {</span>
<span id="cb75-8"><a href=""></a>  </span>
<span id="cb75-9"><a href=""></a>  coord <span class="ot">&lt;-</span> <span class="fu">get_coords_from_location</span>(<span class="at">city =</span> city, <span class="at">country =</span> <span class="st">"France"</span>)</span>
<span id="cb75-10"><a href=""></a>  coords <span class="ot">&lt;-</span> <span class="fu">rbind</span>(coords, coord)</span>
<span id="cb75-11"><a href=""></a>}</span>
<span id="cb75-12"><a href=""></a></span>
<span id="cb75-13"><a href=""></a>coords</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>##          name      lon      lat
## 1 Montpellier 3.876734 43.61124
## 2       Paris 2.348391 48.85350
## 3  Strasbourg 7.750713 48.58461
## 4    Grenoble 5.735782 45.18756
## 5     Bourges 2.399125 47.08117</code></pre>
</div>
</div>
</div></div>
<!-- Insert section 'Exercise' -->
</section></section>
<section>
<section id="exercise-40-min" class="title-slide slide level1 center">
<h1><i class="fa-solid fa-user-clock fa-1x" aria-label="user-clock"></i> &nbsp;&nbsp;Exercise (40 min)</h1>

</section>
<section id="coming-soon" class="slide level2">
<h2>Coming soon</h2>
<p>Work in progress…</p>
<!-- Insert section 'Web scraping' -->
</section></section>
<section>
<section id="web-scraping-15-min" class="title-slide slide level1 center">
<h1><i class="fa-brands fa-css3 fa-1x" aria-label="css3"></i> &nbsp;&nbsp;Web scraping (15 min)</h1>

</section>
<section id="what-is-web-scraping" class="slide level2">
<h2>What is web scraping?</h2>
<ul>
<li>A method to automatically extract data from web pages</li>
<li>Converts unstructured web content into structured data</li>
<li>Also known as <strong><em>screen scraping</em></strong></li>
</ul>
<p><br></p>
<div class="fragment">
<blockquote>
<p><i class="fa-solid fa-triangle-exclamation" aria-label="triangle-exclamation"></i> &nbsp;If available, you should use API: it will give you more reliable data.</p>
</blockquote>
</div>
<div class="fragment">
<p><br></p>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;<strong>What is a web page?</strong></p>
</div>
<div class="fragment">
<p><br><br></p>
<div class="columns">
<div class="column center" style="width:33%;">
<p><i class="fa-brands fa-html5 fa-2x" aria-label="html5"></i></p>
<p><strong>HTML</strong><br> Content structuration</p>
</div><div class="column center" style="width:33%;">
<p><i class="fa-brands fa-css3-alt fa-2x" aria-label="css3-alt"></i></p>
<p><strong>CSS</strong><br> Formatting</p>
</div><div class="column center" style="width:33%;">
<p><i class="fa-brands fa-js fa-2x" aria-label="js"></i></p>
<p><strong>JavaScript</strong><br> Dynamism &amp; interactivity</p>
</div></div>
</div>
</section>
<section id="html-basics" class="slide level2">
<h2>HTML basics</h2>
<p>A web page is described and structured by the <strong>HTML</strong> language (<strong>H</strong>yper<strong>T</strong>ext <strong>M</strong>arkup <strong>L</strong>anguage)</p>
<p><br></p>
<div class="columns">
<div class="column" style="width:45%;">
<p><strong>HTML code</strong></p>
<div class="sourceCode" id="cb77"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb77-1"><a href=""></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb77-2"><a href=""></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb77-3"><a href=""></a>  </span>
<span id="cb77-4"><a href=""></a>  ...</span>
<span id="cb77-5"><a href=""></a>      </span>
<span id="cb77-6"><a href=""></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:45%;">
<p><br></p>
<p>An HTML page has always this structure</p>
</div></div>
</section>
<section id="html-basics-1" class="slide level2">
<h2>HTML basics</h2>
<p>A web page is described and structured by the <strong>HTML</strong> language (<strong>H</strong>yper<strong>T</strong>ext <strong>M</strong>arkup <strong>L</strong>anguage)</p>
<p><br></p>
<div class="columns">
<div class="column" style="width:45%;">
<p><strong>HTML code</strong></p>
<div class="sourceCode" id="cb78"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb78-1"><a href=""></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb78-2"><a href=""></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb78-3"><a href=""></a>  </span>
<span id="cb78-4"><a href=""></a>  <span class="co">&lt;!-- Document metadata --&gt;</span></span>
<span id="cb78-5"><a href=""></a>  <span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb78-6"><a href=""></a>    ...</span>
<span id="cb78-7"><a href=""></a>  <span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb78-8"><a href=""></a>  </span>
<span id="cb78-9"><a href=""></a>  <span class="co">&lt;!-- Document content --&gt;</span></span>
<span id="cb78-10"><a href=""></a>  <span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb78-11"><a href=""></a>    ...</span>
<span id="cb78-12"><a href=""></a>  <span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb78-13"><a href=""></a>      </span>
<span id="cb78-14"><a href=""></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:45%;">
<p><br></p>
<p>The tag <code>&lt;html&gt;</code> contains two children:</p>
<ul>
<li><code>&lt;head&gt;</code> contains page metadata</li>
<li><code>&lt;body&gt;</code> contains page content</li>
</ul>
</div></div>
</section>
<section id="html-basics-2" class="slide level2">
<h2>HTML basics</h2>
<p>A web page is described and structured by the <strong>HTML</strong> language (<strong>H</strong>yper<strong>T</strong>ext <strong>M</strong>arkup <strong>L</strong>anguage)</p>
<p><br></p>
<div class="columns">
<div class="column" style="width:45%;">
<p><strong>HTML code</strong></p>
<div class="sourceCode" id="cb79"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb79-1"><a href=""></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb79-2"><a href=""></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb79-3"><a href=""></a>  </span>
<span id="cb79-4"><a href=""></a>  <span class="co">&lt;!-- Document metadata --&gt;</span></span>
<span id="cb79-5"><a href=""></a>  <span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb79-6"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">meta</span><span class="ot"> charset</span><span class="op">=</span><span class="st">"UTF-8"</span><span class="dt">&gt;</span></span>
<span id="cb79-7"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Page title<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb79-8"><a href=""></a>  <span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb79-9"><a href=""></a>  </span>
<span id="cb79-10"><a href=""></a>  <span class="co">&lt;!-- Document content --&gt;</span></span>
<span id="cb79-11"><a href=""></a>  <span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb79-12"><a href=""></a>    ...</span>
<span id="cb79-13"><a href=""></a>  <span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb79-14"><a href=""></a>      </span>
<span id="cb79-15"><a href=""></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:45%;">
<p><br></p>
<p>The tag <code>&lt;head&gt;</code> can contain different metadata:</p>
<ul>
<li><code>&lt;title&gt;</code> contains the page title</li>
<li><code>&lt;meta&gt;</code> is used to specify the encoding, authors, keywords, etc.</li>
<li><code>&lt;link&gt;</code> is used to call external resources</li>
</ul>
<p><strong>N.B.</strong> This section is not necessary interesting for web scraping</p>
</div></div>
</section>
<section id="html-basics-3" class="slide level2">
<h2>HTML basics</h2>
<p>A web page is described and structured by the <strong>HTML</strong> language (<strong>H</strong>yper<strong>T</strong>ext <strong>M</strong>arkup <strong>L</strong>anguage)</p>
<p><br></p>
<div class="columns">
<div class="column" style="width:45%;">
<p><strong>HTML code</strong></p>
<div class="sourceCode" id="cb80"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb80-1"><a href=""></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb80-2"><a href=""></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb80-3"><a href=""></a>  </span>
<span id="cb80-4"><a href=""></a>  <span class="co">&lt;!-- Document metadata --&gt;</span></span>
<span id="cb80-5"><a href=""></a>  <span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb80-6"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">meta</span><span class="ot"> charset</span><span class="op">=</span><span class="st">"UTF-8"</span><span class="dt">&gt;</span></span>
<span id="cb80-7"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Page title<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb80-8"><a href=""></a>  <span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb80-9"><a href=""></a>  </span>
<span id="cb80-10"><a href=""></a>  <span class="co">&lt;!-- Document content --&gt;</span></span>
<span id="cb80-11"><a href=""></a>  <span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb80-12"><a href=""></a>  </span>
<span id="cb80-13"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">h1</span><span class="ot"> id</span><span class="op">=</span><span class="st">'section-1'</span><span class="dt">&gt;</span>Header A<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<span id="cb80-14"><a href=""></a>    </span>
<span id="cb80-15"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="ot"> class</span><span class="op">=</span><span class="st">'my-class'</span><span class="dt">&gt;</span>A paragraph with <span class="dt">&lt;</span><span class="kw">b</span><span class="dt">&gt;</span>bold text<span class="dt">&lt;/</span><span class="kw">b</span><span class="dt">&gt;</span>.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb80-16"><a href=""></a>    </span>
<span id="cb80-17"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb80-18"><a href=""></a>      A second paragraph with a </span>
<span id="cb80-19"><a href=""></a>      <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">'https://google.com'</span><span class="dt">&gt;</span>link<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span>.</span>
<span id="cb80-20"><a href=""></a>    <span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb80-21"><a href=""></a>    </span>
<span id="cb80-22"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">img</span><span class="ot"> src</span><span class="op">=</span><span class="st">'images/my-img.png'</span><span class="ot"> width</span><span class="op">=</span><span class="st">'150'</span><span class="ot"> height</span><span class="op">=</span><span class="st">'150'</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb80-23"><a href=""></a>    </span>
<span id="cb80-24"><a href=""></a>  <span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb80-25"><a href=""></a>      </span>
<span id="cb80-26"><a href=""></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:45%;">

</div></div>
</section>
<section id="html-basics-4" class="slide level2">
<h2>HTML basics</h2>
<p>A web page is described and structured by the <strong>HTML</strong> language (<strong>H</strong>yper<strong>T</strong>ext <strong>M</strong>arkup <strong>L</strong>anguage)</p>
<p><br></p>
<div class="columns">
<div class="column" style="width:45%;">
<p><strong>HTML code</strong></p>
<div class="sourceCode" id="cb81"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb81-1"><a href=""></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb81-2"><a href=""></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb81-3"><a href=""></a>  </span>
<span id="cb81-4"><a href=""></a>  <span class="co">&lt;!-- Document metadata --&gt;</span></span>
<span id="cb81-5"><a href=""></a>  <span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb81-6"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">meta</span><span class="ot"> charset</span><span class="op">=</span><span class="st">"UTF-8"</span><span class="dt">&gt;</span></span>
<span id="cb81-7"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Page title<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb81-8"><a href=""></a>  <span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb81-9"><a href=""></a>  </span>
<span id="cb81-10"><a href=""></a>  <span class="co">&lt;!-- Document content --&gt;</span></span>
<span id="cb81-11"><a href=""></a>  <span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb81-12"><a href=""></a>  </span>
<span id="cb81-13"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">h1</span><span class="ot"> id</span><span class="op">=</span><span class="st">'section-1'</span><span class="dt">&gt;</span>Header A<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<span id="cb81-14"><a href=""></a>    </span>
<span id="cb81-15"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="ot"> class</span><span class="op">=</span><span class="st">'my-class'</span><span class="dt">&gt;</span>A paragraph with <span class="dt">&lt;</span><span class="kw">b</span><span class="dt">&gt;</span>bold text<span class="dt">&lt;/</span><span class="kw">b</span><span class="dt">&gt;</span>.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb81-16"><a href=""></a>    </span>
<span id="cb81-17"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb81-18"><a href=""></a>      A second paragraph with a </span>
<span id="cb81-19"><a href=""></a>      <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">'https://google.com'</span><span class="dt">&gt;</span>link<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span>.</span>
<span id="cb81-20"><a href=""></a>    <span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb81-21"><a href=""></a>    </span>
<span id="cb81-22"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">img</span><span class="ot"> src</span><span class="op">=</span><span class="st">'images/my-img.png'</span><span class="ot"> width</span><span class="op">=</span><span class="st">'150'</span><span class="ot"> height</span><span class="op">=</span><span class="st">'150'</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb81-23"><a href=""></a>    </span>
<span id="cb81-24"><a href=""></a>  <span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb81-25"><a href=""></a>      </span>
<span id="cb81-26"><a href=""></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:45%;">
<p><br></p>
<ul>
<li>Except for some elements (<code>&lt;img /&gt;</code>), all HTML tags are <strong>double</strong>.</li>
<li>Some elements are <strong>block</strong> tags (<code>&lt;h1&gt;</code>, <code>&lt;p&gt;</code>, etc.), other are <strong>inline</strong> tags (<code>&lt;b&gt;</code>, <code>&lt;a&gt;</code>, etc.)</li>
<li>Some elements can have <strong>attributes</strong>: <code>id</code>, <code>class</code>, <code>href</code>, <code>src</code>, etc.</li>
</ul>
<p><br></p>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Web scraping consists in detecting HTML elements by the <code>tag</code>, <code>class</code> or the <code>id</code> (unique) to extract contents or attributes (<code>href</code>, <code>src</code>, etc.).</p>
</div></div>
</section>
<section id="the-rvest-package" class="slide level2">
<h2>The rvest package</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="images/rvest-screenshot.png"></p>
<p><br></p>
<p>Available at: <a href="https://rvest.tidyverse.org/" class="uri">https://rvest.tidyverse.org/</a></p>
</div><div class="column" style="width:50%;">
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href=""></a><span class="co"># Install 'rvest' package ----</span></span>
<span id="cb82-2"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"rvest"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<table class="caption-top">
<caption>Table: Main functions of <code>rvest</code></caption>
<thead>
<tr class="header">
<th style="text-align: left;">Function</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>read_html()</code></td>
<td style="text-align: left;">Read and parse HTML content</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>html_element()</code></td>
<td style="text-align: left;">Extract an HTML element(s)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>html_attr()</code></td>
<td style="text-align: left;">Extract an HTML attribute(s)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>html_text2()</code></td>
<td style="text-align: left;">Extract the content of element(s)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>html_table()</code></td>
<td style="text-align: left;">Extract a table &amp; convert into a <code>data.frame</code></td>
</tr>
</tbody>
</table>
</div></div>
</section>
<section id="scrap-a-table" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>0. Install additional packages</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href=""></a><span class="co"># 'janitor' to clean dirty data ----</span></span>
<span id="cb83-2"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"janitor"</span>)</span>
<span id="cb83-3"><a href=""></a></span>
<span id="cb83-4"><a href=""></a><span class="co"># 'dplyr' to handle data ----</span></span>
<span id="cb83-5"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="scrap-a-table-1" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>0. Install additional packages</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href=""></a><span class="co"># 'janitor' to clean dirty data ----</span></span>
<span id="cb84-2"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"janitor"</span>)</span>
<span id="cb84-3"><a href=""></a></span>
<span id="cb84-4"><a href=""></a><span class="co"># 'dplyr' to handle data ----</span></span>
<span id="cb84-5"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<p><strong>1. Build the HTTP request</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href=""></a><span class="co"># Wikipedia URL ----</span></span>
<span id="cb85-2"><a href=""></a>base_url <span class="ot">&lt;-</span> <span class="st">"https://fr.wikipedia.org"</span></span>
<span id="cb85-3"><a href=""></a></span>
<span id="cb85-4"><a href=""></a><span class="co"># Page URL ----</span></span>
<span id="cb85-5"><a href=""></a>page_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(base_url,</span>
<span id="cb85-6"><a href=""></a>                   <span class="st">"/wiki/"</span>,</span>
<span id="cb85-7"><a href=""></a>                   <span class="st">"Liste_des_communes_de_France_les_plus_peuplées"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peuplées</code></pre>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="scrap-a-table-2" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>0. Install additional packages</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href=""></a><span class="co"># 'janitor' to clean dirty data ----</span></span>
<span id="cb87-2"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"janitor"</span>)</span>
<span id="cb87-3"><a href=""></a></span>
<span id="cb87-4"><a href=""></a><span class="co"># 'dplyr' to handle data ----</span></span>
<span id="cb87-5"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<p><strong>1. Build the HTTP request</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href=""></a><span class="co"># Wikipedia URL ----</span></span>
<span id="cb88-2"><a href=""></a>base_url <span class="ot">&lt;-</span> <span class="st">"https://fr.wikipedia.org"</span></span>
<span id="cb88-3"><a href=""></a></span>
<span id="cb88-4"><a href=""></a><span class="co"># Page URL ----</span></span>
<span id="cb88-5"><a href=""></a>page_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(base_url,</span>
<span id="cb88-6"><a href=""></a>                   <span class="st">"/wiki/"</span>,</span>
<span id="cb88-7"><a href=""></a>                   <span class="st">"Liste_des_communes_de_France_les_plus_peuplées"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peuplées</code></pre>
<p><br></p>
<p><strong>2. Scrap the HTML page</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href=""></a><span class="co"># Scrap web page ----</span></span>
<span id="cb90-2"><a href=""></a>content <span class="ot">&lt;-</span> rvest<span class="sc">::</span><span class="fu">read_html</span>(page_url)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>{html_document}</code></pre>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="scrap-a-table-3" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>0. Install additional packages</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href=""></a><span class="co"># 'janitor' to clean dirty data ----</span></span>
<span id="cb92-2"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"janitor"</span>)</span>
<span id="cb92-3"><a href=""></a></span>
<span id="cb92-4"><a href=""></a><span class="co"># 'dplyr' to handle data ----</span></span>
<span id="cb92-5"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<p><strong>1. Build the HTTP request</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href=""></a><span class="co"># Wikipedia URL ----</span></span>
<span id="cb93-2"><a href=""></a>base_url <span class="ot">&lt;-</span> <span class="st">"https://fr.wikipedia.org"</span></span>
<span id="cb93-3"><a href=""></a></span>
<span id="cb93-4"><a href=""></a><span class="co"># Page URL ----</span></span>
<span id="cb93-5"><a href=""></a>page_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(base_url,</span>
<span id="cb93-6"><a href=""></a>                   <span class="st">"/wiki/"</span>,</span>
<span id="cb93-7"><a href=""></a>                   <span class="st">"Liste_des_communes_de_France_les_plus_peuplées"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peuplées</code></pre>
<p><br></p>
<p><strong>2. Scrap the HTML page</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href=""></a><span class="co"># Scrap web page ----</span></span>
<span id="cb95-2"><a href=""></a>content <span class="ot">&lt;-</span> rvest<span class="sc">::</span><span class="fu">read_html</span>(page_url)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>{html_document}</code></pre>
</div><div class="column" style="width:50%;">
<p><strong>3. Extract HTML tables</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href=""></a><span class="co"># Scrap web page ----</span></span>
<span id="cb97-2"><a href=""></a>tables <span class="ot">&lt;-</span> rvest<span class="sc">::</span><span class="fu">html_table</span>(content)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div></div>
</section>
<section id="scrap-a-table-4" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>0. Install additional packages</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href=""></a><span class="co"># 'janitor' to clean dirty data ----</span></span>
<span id="cb98-2"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"janitor"</span>)</span>
<span id="cb98-3"><a href=""></a></span>
<span id="cb98-4"><a href=""></a><span class="co"># 'dplyr' to handle data ----</span></span>
<span id="cb98-5"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<p><strong>1. Build the HTTP request</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href=""></a><span class="co"># Wikipedia URL ----</span></span>
<span id="cb99-2"><a href=""></a>base_url <span class="ot">&lt;-</span> <span class="st">"https://fr.wikipedia.org"</span></span>
<span id="cb99-3"><a href=""></a></span>
<span id="cb99-4"><a href=""></a><span class="co"># Page URL ----</span></span>
<span id="cb99-5"><a href=""></a>page_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(base_url,</span>
<span id="cb99-6"><a href=""></a>                   <span class="st">"/wiki/"</span>,</span>
<span id="cb99-7"><a href=""></a>                   <span class="st">"Liste_des_communes_de_France_les_plus_peuplées"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peuplées</code></pre>
<p><br></p>
<p><strong>2. Scrap the HTML page</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href=""></a><span class="co"># Scrap web page ----</span></span>
<span id="cb101-2"><a href=""></a>content <span class="ot">&lt;-</span> rvest<span class="sc">::</span><span class="fu">read_html</span>(page_url)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>{html_document}</code></pre>
</div><div class="column" style="width:50%;">
<p><strong>3. Extract HTML tables</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href=""></a><span class="co"># Scrap web page ----</span></span>
<span id="cb103-2"><a href=""></a>tables <span class="ot">&lt;-</span> rvest<span class="sc">::</span><span class="fu">html_table</span>(content)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href=""></a><span class="co"># Type of output ----</span></span>
<span id="cb104-2"><a href=""></a><span class="fu">class</span>(tables)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "list"</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href=""></a><span class="co"># Element length ----</span></span>
<span id="cb106-2"><a href=""></a><span class="fu">length</span>(tables)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] 6</code></pre>
</div>
</div>
</div></div>
</section>
<section id="scrap-a-table-5" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>0. Install additional packages</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href=""></a><span class="co"># 'janitor' to clean dirty data ----</span></span>
<span id="cb108-2"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"janitor"</span>)</span>
<span id="cb108-3"><a href=""></a></span>
<span id="cb108-4"><a href=""></a><span class="co"># 'dplyr' to handle data ----</span></span>
<span id="cb108-5"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<p><strong>1. Build the HTTP request</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href=""></a><span class="co"># Wikipedia URL ----</span></span>
<span id="cb109-2"><a href=""></a>base_url <span class="ot">&lt;-</span> <span class="st">"https://fr.wikipedia.org"</span></span>
<span id="cb109-3"><a href=""></a></span>
<span id="cb109-4"><a href=""></a><span class="co"># Page URL ----</span></span>
<span id="cb109-5"><a href=""></a>page_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(base_url,</span>
<span id="cb109-6"><a href=""></a>                   <span class="st">"/wiki/"</span>,</span>
<span id="cb109-7"><a href=""></a>                   <span class="st">"Liste_des_communes_de_France_les_plus_peuplées"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peuplées</code></pre>
<p><br></p>
<p><strong>2. Scrap the HTML page</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href=""></a><span class="co"># Scrap web page ----</span></span>
<span id="cb111-2"><a href=""></a>content <span class="ot">&lt;-</span> rvest<span class="sc">::</span><span class="fu">read_html</span>(page_url)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>{html_document}</code></pre>
</div><div class="column" style="width:50%;">
<p><strong>3. Extract HTML tables</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href=""></a><span class="co"># Scrap web page ----</span></span>
<span id="cb113-2"><a href=""></a>tables <span class="ot">&lt;-</span> rvest<span class="sc">::</span><span class="fu">html_table</span>(content)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href=""></a><span class="co"># Type of output ----</span></span>
<span id="cb114-2"><a href=""></a><span class="fu">class</span>(tables)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "list"</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href=""></a><span class="co"># Element length ----</span></span>
<span id="cb116-2"><a href=""></a><span class="fu">length</span>(tables)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] 6</code></pre>
</div>
</div>
<p><br></p>
<p><strong>4. Extract the good table</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href=""></a><span class="co"># Extract second table ----</span></span>
<span id="cb118-2"><a href=""></a>datas <span class="ot">&lt;-</span> tables[[<span class="dv">2</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div></div>
</section>
<section id="scrap-a-table-6" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>5. Clean output</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href=""></a><span class="co"># Explore data ----</span></span>
<span id="cb119-2"><a href=""></a>datas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 288 × 14
##    Rang2024 CodeInsee Commune     Département  Statut Région `Population légale`
##    &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;              
##  1 Rang2024 CodeInsee Commune     Département  Statut Région 2021[1]            
##  2 1        75056     Paris[a]    Paris[a]     Préfe… Île-d… 2&nbsp;133&nbsp;111          
##  3 2        13055     Marseille   Bouches-du-… Préfe… Prove… 873&nbsp;076            
##  4 3        69123     Lyon        Métropole d… Préfe… Auver… 522&nbsp;250            
##  5 4        31555     Toulouse    Haute-Garon… Préfe… Occit… 504&nbsp;078            
##  6 5        06088     Nice        Alpes-Marit… Préfe… Prove… 348&nbsp;085            
##  7 6        44109     Nantes      Loire-Atlan… Préfe… Pays … 323&nbsp;204            
##  8 7        34172     Montpellier Hérault      Préfe… Occit… 302&nbsp;454            
##  9 8        67482     Strasbourg  Bas-Rhin     Préfe… Grand… 291&nbsp;313            
## 10 9        33063     Bordeaux    Gironde      Préfe… Nouve… 261&nbsp;804            
## # ℹ 278 more rows
## # ℹ 7 more variables: `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;,
## #   `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;,
## #   `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;,
## #   `Population légale` &lt;chr&gt;</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="scrap-a-table-7" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>5. Clean output</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href=""></a><span class="co"># Explore data ----</span></span>
<span id="cb121-2"><a href=""></a>datas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 288 × 14
##    Rang2024 CodeInsee Commune     Département  Statut Région `Population légale`
##    &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;              
##  1 Rang2024 CodeInsee Commune     Département  Statut Région 2021[1]            
##  2 1        75056     Paris[a]    Paris[a]     Préfe… Île-d… 2&nbsp;133&nbsp;111          
##  3 2        13055     Marseille   Bouches-du-… Préfe… Prove… 873&nbsp;076            
##  4 3        69123     Lyon        Métropole d… Préfe… Auver… 522&nbsp;250            
##  5 4        31555     Toulouse    Haute-Garon… Préfe… Occit… 504&nbsp;078            
##  6 5        06088     Nice        Alpes-Marit… Préfe… Prove… 348&nbsp;085            
##  7 6        44109     Nantes      Loire-Atlan… Préfe… Pays … 323&nbsp;204            
##  8 7        34172     Montpellier Hérault      Préfe… Occit… 302&nbsp;454            
##  9 8        67482     Strasbourg  Bas-Rhin     Préfe… Grand… 291&nbsp;313            
## 10 9        33063     Bordeaux    Gironde      Préfe… Nouve… 261&nbsp;804            
## # ℹ 278 more rows
## # ℹ 7 more variables: `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;,
## #   `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;,
## #   `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;,
## #   `Population légale` &lt;chr&gt;</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href=""></a><span class="co"># Select top 10 cities ----</span></span>
<span id="cb123-2"><a href=""></a>top10 <span class="ot">&lt;-</span> datas[<span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>, ]</span>
<span id="cb123-3"><a href=""></a></span>
<span id="cb123-4"><a href=""></a><span class="co"># Filter columns ----</span></span>
<span id="cb123-5"><a href=""></a>top10 <span class="ot">&lt;-</span> top10[ , <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">7</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="scrap-a-table-8" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>5. Clean output</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href=""></a><span class="co"># Explore data ----</span></span>
<span id="cb124-2"><a href=""></a>datas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 288 × 14
##    Rang2024 CodeInsee Commune     Département  Statut Région `Population légale`
##    &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;              
##  1 Rang2024 CodeInsee Commune     Département  Statut Région 2021[1]            
##  2 1        75056     Paris[a]    Paris[a]     Préfe… Île-d… 2&nbsp;133&nbsp;111          
##  3 2        13055     Marseille   Bouches-du-… Préfe… Prove… 873&nbsp;076            
##  4 3        69123     Lyon        Métropole d… Préfe… Auver… 522&nbsp;250            
##  5 4        31555     Toulouse    Haute-Garon… Préfe… Occit… 504&nbsp;078            
##  6 5        06088     Nice        Alpes-Marit… Préfe… Prove… 348&nbsp;085            
##  7 6        44109     Nantes      Loire-Atlan… Préfe… Pays … 323&nbsp;204            
##  8 7        34172     Montpellier Hérault      Préfe… Occit… 302&nbsp;454            
##  9 8        67482     Strasbourg  Bas-Rhin     Préfe… Grand… 291&nbsp;313            
## 10 9        33063     Bordeaux    Gironde      Préfe… Nouve… 261&nbsp;804            
## # ℹ 278 more rows
## # ℹ 7 more variables: `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;,
## #   `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;,
## #   `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;,
## #   `Population légale` &lt;chr&gt;</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href=""></a><span class="co"># Select top 10 cities ----</span></span>
<span id="cb126-2"><a href=""></a>top10 <span class="ot">&lt;-</span> datas[<span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>, ]</span>
<span id="cb126-3"><a href=""></a></span>
<span id="cb126-4"><a href=""></a><span class="co"># Filter columns ----</span></span>
<span id="cb126-5"><a href=""></a>top10 <span class="ot">&lt;-</span> top10[ , <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">7</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href=""></a><span class="co"># Clean column names ----</span></span>
<span id="cb127-2"><a href=""></a>top10 <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(top10)</span>
<span id="cb127-3"><a href=""></a>top10</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 10 × 4
##    rang2024 commune     departement          population_legale
##    &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;                &lt;chr&gt;            
##  1 1        Paris[a]    Paris[a]             2&nbsp;133&nbsp;111        
##  2 2        Marseille   Bouches-du-Rhône     873&nbsp;076          
##  3 3        Lyon        Métropole de Lyon[b] 522&nbsp;250          
##  4 4        Toulouse    Haute-Garonne        504&nbsp;078          
##  5 5        Nice        Alpes-Maritimes      348&nbsp;085          
##  6 6        Nantes      Loire-Atlantique     323&nbsp;204          
##  7 7        Montpellier Hérault              302&nbsp;454          
##  8 8        Strasbourg  Bas-Rhin             291&nbsp;313          
##  9 9        Bordeaux    Gironde              261&nbsp;804          
## 10 10       Lille       Nord                 236&nbsp;710</code></pre>
</div>
</div>
</div></div>
</section>
<section id="scrap-a-table-9" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>5. Clean output</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href=""></a><span class="co"># Explore data ----</span></span>
<span id="cb129-2"><a href=""></a>datas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 288 × 14
##    Rang2024 CodeInsee Commune     Département  Statut Région `Population légale`
##    &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;              
##  1 Rang2024 CodeInsee Commune     Département  Statut Région 2021[1]            
##  2 1        75056     Paris[a]    Paris[a]     Préfe… Île-d… 2&nbsp;133&nbsp;111          
##  3 2        13055     Marseille   Bouches-du-… Préfe… Prove… 873&nbsp;076            
##  4 3        69123     Lyon        Métropole d… Préfe… Auver… 522&nbsp;250            
##  5 4        31555     Toulouse    Haute-Garon… Préfe… Occit… 504&nbsp;078            
##  6 5        06088     Nice        Alpes-Marit… Préfe… Prove… 348&nbsp;085            
##  7 6        44109     Nantes      Loire-Atlan… Préfe… Pays … 323&nbsp;204            
##  8 7        34172     Montpellier Hérault      Préfe… Occit… 302&nbsp;454            
##  9 8        67482     Strasbourg  Bas-Rhin     Préfe… Grand… 291&nbsp;313            
## 10 9        33063     Bordeaux    Gironde      Préfe… Nouve… 261&nbsp;804            
## # ℹ 278 more rows
## # ℹ 7 more variables: `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;,
## #   `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;,
## #   `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;,
## #   `Population légale` &lt;chr&gt;</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href=""></a><span class="co"># Select top 10 cities ----</span></span>
<span id="cb131-2"><a href=""></a>top10 <span class="ot">&lt;-</span> datas[<span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>, ]</span>
<span id="cb131-3"><a href=""></a></span>
<span id="cb131-4"><a href=""></a><span class="co"># Filter columns ----</span></span>
<span id="cb131-5"><a href=""></a>top10 <span class="ot">&lt;-</span> top10[ , <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">7</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href=""></a><span class="co"># Clean column names ----</span></span>
<span id="cb132-2"><a href=""></a>top10 <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(top10)</span>
<span id="cb132-3"><a href=""></a>top10</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 10 × 4
##    rang2024 commune     departement          population_legale
##    &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;                &lt;chr&gt;            
##  1 1        Paris[a]    Paris[a]             2&nbsp;133&nbsp;111        
##  2 2        Marseille   Bouches-du-Rhône     873&nbsp;076          
##  3 3        Lyon        Métropole de Lyon[b] 522&nbsp;250          
##  4 4        Toulouse    Haute-Garonne        504&nbsp;078          
##  5 5        Nice        Alpes-Maritimes      348&nbsp;085          
##  6 6        Nantes      Loire-Atlantique     323&nbsp;204          
##  7 7        Montpellier Hérault              302&nbsp;454          
##  8 8        Strasbourg  Bas-Rhin             291&nbsp;313          
##  9 9        Bordeaux    Gironde              261&nbsp;804          
## 10 10       Lille       Nord                 236&nbsp;710</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href=""></a><span class="co"># Rename specific column ----</span></span>
<span id="cb134-2"><a href=""></a>top10 <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">rename</span>(top10,</span>
<span id="cb134-3"><a href=""></a>                       <span class="at">pop2021 =</span> population_legale)</span>
<span id="cb134-4"><a href=""></a></span>
<span id="cb134-5"><a href=""></a><span class="fu">colnames</span>(top10)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "rang2024"    "commune"     "departement" "pop2021"</code></pre>
</div>
</div>
</div></div>
</section>
<section id="scrap-a-table-10" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>5. Clean output (continued)</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href=""></a><span class="co"># Explore data ----</span></span>
<span id="cb136-2"><a href=""></a>top10</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 10 × 4
##    rang2024 commune     departement          pop2021  
##    &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;                &lt;chr&gt;    
##  1 1        Paris[a]    Paris[a]             2&nbsp;133&nbsp;111
##  2 2        Marseille   Bouches-du-Rhône     873&nbsp;076  
##  3 3        Lyon        Métropole de Lyon[b] 522&nbsp;250  
##  4 4        Toulouse    Haute-Garonne        504&nbsp;078  
##  5 5        Nice        Alpes-Maritimes      348&nbsp;085  
##  6 6        Nantes      Loire-Atlantique     323&nbsp;204  
##  7 7        Montpellier Hérault              302&nbsp;454  
##  8 8        Strasbourg  Bas-Rhin             291&nbsp;313  
##  9 9        Bordeaux    Gironde              261&nbsp;804  
## 10 10       Lille       Nord                 236&nbsp;710</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="scrap-a-table-11" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>5. Clean output (continued)</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href=""></a><span class="co"># Explore data ----</span></span>
<span id="cb138-2"><a href=""></a>top10</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 10 × 4
##    rang2024 commune     departement          pop2021  
##    &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;                &lt;chr&gt;    
##  1 1        Paris[a]    Paris[a]             2&nbsp;133&nbsp;111
##  2 2        Marseille   Bouches-du-Rhône     873&nbsp;076  
##  3 3        Lyon        Métropole de Lyon[b] 522&nbsp;250  
##  4 4        Toulouse    Haute-Garonne        504&nbsp;078  
##  5 5        Nice        Alpes-Maritimes      348&nbsp;085  
##  6 6        Nantes      Loire-Atlantique     323&nbsp;204  
##  7 7        Montpellier Hérault              302&nbsp;454  
##  8 8        Strasbourg  Bas-Rhin             291&nbsp;313  
##  9 9        Bordeaux    Gironde              261&nbsp;804  
## 10 10       Lille       Nord                 236&nbsp;710</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href=""></a><span class="co"># Convert 'rang2024' to numeric ----</span></span>
<span id="cb140-2"><a href=""></a>top10<span class="sc">$</span><span class="st">"rang2024"</span> <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(top10<span class="sc">$</span><span class="st">"rang2024"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="scrap-a-table-12" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>5. Clean output (continued)</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href=""></a><span class="co"># Explore data ----</span></span>
<span id="cb141-2"><a href=""></a>top10</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 10 × 4
##    rang2024 commune     departement          pop2021  
##    &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;                &lt;chr&gt;    
##  1 1        Paris[a]    Paris[a]             2&nbsp;133&nbsp;111
##  2 2        Marseille   Bouches-du-Rhône     873&nbsp;076  
##  3 3        Lyon        Métropole de Lyon[b] 522&nbsp;250  
##  4 4        Toulouse    Haute-Garonne        504&nbsp;078  
##  5 5        Nice        Alpes-Maritimes      348&nbsp;085  
##  6 6        Nantes      Loire-Atlantique     323&nbsp;204  
##  7 7        Montpellier Hérault              302&nbsp;454  
##  8 8        Strasbourg  Bas-Rhin             291&nbsp;313  
##  9 9        Bordeaux    Gironde              261&nbsp;804  
## 10 10       Lille       Nord                 236&nbsp;710</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href=""></a><span class="co"># Convert 'rang2024' to numeric ----</span></span>
<span id="cb143-2"><a href=""></a>top10<span class="sc">$</span><span class="st">"rang2024"</span> <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(top10<span class="sc">$</span><span class="st">"rang2024"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href=""></a><span class="co"># Remove footnotes in 'commune' ----</span></span>
<span id="cb144-2"><a href=""></a>top10<span class="sc">$</span><span class="st">"commune"</span>     <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">[[a-z]</span><span class="sc">\\</span><span class="st">]"</span>, <span class="st">""</span>, top10<span class="sc">$</span><span class="st">"commune"</span>)</span>
<span id="cb144-3"><a href=""></a></span>
<span id="cb144-4"><a href=""></a><span class="co"># Remove footnotes in 'departement' ----</span></span>
<span id="cb144-5"><a href=""></a>top10<span class="sc">$</span><span class="st">"departement"</span> <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">[[a-z]</span><span class="sc">\\</span><span class="st">]"</span>, <span class="st">""</span>, top10<span class="sc">$</span><span class="st">"departement"</span>)</span>
<span id="cb144-6"><a href=""></a></span>
<span id="cb144-7"><a href=""></a>top10</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 10 × 4
##    rang2024 commune     departement       pop2021  
##       &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;             &lt;chr&gt;    
##  1        1 Paris       Paris             2&nbsp;133&nbsp;111
##  2        2 Marseille   Bouches-du-Rhône  873&nbsp;076  
##  3        3 Lyon        Métropole de Lyon 522&nbsp;250  
##  4        4 Toulouse    Haute-Garonne     504&nbsp;078  
##  5        5 Nice        Alpes-Maritimes   348&nbsp;085  
##  6        6 Nantes      Loire-Atlantique  323&nbsp;204  
##  7        7 Montpellier Hérault           302&nbsp;454  
##  8        8 Strasbourg  Bas-Rhin          291&nbsp;313  
##  9        9 Bordeaux    Gironde           261&nbsp;804  
## 10       10 Lille       Nord              236&nbsp;710</code></pre>
</div>
</div>
</div></div>
</section>
<section id="scrap-a-table-13" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>5. Clean output (continued)</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href=""></a><span class="co"># Convert 'pop2021' to numeric ----</span></span>
<span id="cb146-2"><a href=""></a>top10<span class="sc">$</span><span class="st">"pop2021"</span> <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"&nbsp;"</span>, <span class="st">""</span>, top10<span class="sc">$</span><span class="st">"pop2021"</span>)</span>
<span id="cb146-3"><a href=""></a>top10<span class="sc">$</span><span class="st">"pop2021"</span> <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(top10<span class="sc">$</span><span class="st">"pop2021"</span>)</span>
<span id="cb146-4"><a href=""></a></span>
<span id="cb146-5"><a href=""></a>top10</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 10 × 4
##    rang2024 commune     departement       pop2021
##       &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;               &lt;dbl&gt;
##  1        1 Paris       Paris             2133111
##  2        2 Marseille   Bouches-du-Rhône   873076
##  3        3 Lyon        Métropole de Lyon  522250
##  4        4 Toulouse    Haute-Garonne      504078
##  5        5 Nice        Alpes-Maritimes    348085
##  6        6 Nantes      Loire-Atlantique   323204
##  7        7 Montpellier Hérault            302454
##  8        8 Strasbourg  Bas-Rhin           291313
##  9        9 Bordeaux    Gironde            261804
## 10       10 Lille       Nord               236710</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="scrap-other-elements" class="slide level2">
<h2>Scrap other elements</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Detect HTML element by tag</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href=""></a><span class="co"># Extract content of h1 element ----</span></span>
<span id="cb148-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"h1"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb148-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Liste des communes de France les plus peuplées"</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="scrap-other-elements-1" class="slide level2">
<h2>Scrap other elements</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Detect HTML element by tag</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href=""></a><span class="co"># Extract content of h1 element ----</span></span>
<span id="cb150-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"h1"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb150-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Liste des communes de France les plus peuplées"</code></pre>
</div>
</div>
<p><br></p>
<p><strong>Detect HTML elements by tag</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href=""></a><span class="co"># Extract content of the first h2 element ----</span></span>
<span id="cb152-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"h2"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb152-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Sommaire"</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href=""></a><span class="co"># Extract content of all h2 elements ----</span></span>
<span id="cb154-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_elements</span>(content, <span class="at">css =</span> <span class="st">"h2"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb154-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Sommaire"                                                 
## [2] "Cadre des données"                                        
## [3] "Vue d'ensemble"                                           
## [4] "Communes de plus de 30 000 habitants"                     
## [5] "Communes ayant compté plus de 30 000 habitants avant 2024"
## [6] "Notes et références"                                      
## [7] "Voir aussi"</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="scrap-other-elements-2" class="slide level2">
<h2>Scrap other elements</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Detect HTML element by tag</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href=""></a><span class="co"># Extract content of h1 element ----</span></span>
<span id="cb156-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"h1"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb156-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Liste des communes de France les plus peuplées"</code></pre>
</div>
</div>
<p><br></p>
<p><strong>Detect HTML elements by tag</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href=""></a><span class="co"># Extract content of the first h2 element ----</span></span>
<span id="cb158-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"h2"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb158-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Sommaire"</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href=""></a><span class="co"># Extract content of all h2 elements ----</span></span>
<span id="cb160-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_elements</span>(content, <span class="at">css =</span> <span class="st">"h2"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb160-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Sommaire"                                                 
## [2] "Cadre des données"                                        
## [3] "Vue d'ensemble"                                           
## [4] "Communes de plus de 30 000 habitants"                     
## [5] "Communes ayant compté plus de 30 000 habitants avant 2024"
## [6] "Notes et références"                                      
## [7] "Voir aussi"</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Detect HTML element by ID</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href=""></a><span class="co"># Extract content of the h2 element detected by its id ----</span></span>
<span id="cb162-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"#Cadre_des_données"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb162-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Cadre des données"</code></pre>
</div>
</div>
</div></div>
</section>
<section id="scrap-other-elements-3" class="slide level2">
<h2>Scrap other elements</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Detect HTML element by tag</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href=""></a><span class="co"># Extract content of h1 element ----</span></span>
<span id="cb164-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"h1"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb164-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Liste des communes de France les plus peuplées"</code></pre>
</div>
</div>
<p><br></p>
<p><strong>Detect HTML elements by tag</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href=""></a><span class="co"># Extract content of the first h2 element ----</span></span>
<span id="cb166-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"h2"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb166-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Sommaire"</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href=""></a><span class="co"># Extract content of all h2 elements ----</span></span>
<span id="cb168-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_elements</span>(content, <span class="at">css =</span> <span class="st">"h2"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb168-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Sommaire"                                                 
## [2] "Cadre des données"                                        
## [3] "Vue d'ensemble"                                           
## [4] "Communes de plus de 30 000 habitants"                     
## [5] "Communes ayant compté plus de 30 000 habitants avant 2024"
## [6] "Notes et références"                                      
## [7] "Voir aussi"</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Detect HTML element by ID</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href=""></a><span class="co"># Extract content of the h2 element detected by its id ----</span></span>
<span id="cb170-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"#Cadre_des_données"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb170-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Cadre des données"</code></pre>
</div>
</div>
<p><br></p>
<p><strong>Extract attribute</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb172-1"><a href=""></a><span class="co"># Extract URL of the first image ----</span></span>
<span id="cb172-2"><a href=""></a>image_url <span class="ot">&lt;-</span> rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"img"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb172-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_attr</span>(<span class="at">name =</span> <span class="st">"src"</span>)</span>
<span id="cb172-4"><a href=""></a>image_url</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "/static/images/icons/wikipedia.png"</code></pre>
</div>
</div>
</div></div>
</section>
<section id="scrap-other-elements-4" class="slide level2">
<h2>Scrap other elements</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Detect HTML element by tag</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href=""></a><span class="co"># Extract content of h1 element ----</span></span>
<span id="cb174-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"h1"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb174-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Liste des communes de France les plus peuplées"</code></pre>
</div>
</div>
<p><br></p>
<p><strong>Detect HTML elements by tag</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href=""></a><span class="co"># Extract content of the first h2 element ----</span></span>
<span id="cb176-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"h2"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb176-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Sommaire"</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href=""></a><span class="co"># Extract content of all h2 elements ----</span></span>
<span id="cb178-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_elements</span>(content, <span class="at">css =</span> <span class="st">"h2"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb178-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Sommaire"                                                 
## [2] "Cadre des données"                                        
## [3] "Vue d'ensemble"                                           
## [4] "Communes de plus de 30 000 habitants"                     
## [5] "Communes ayant compté plus de 30 000 habitants avant 2024"
## [6] "Notes et références"                                      
## [7] "Voir aussi"</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Detect HTML element by ID</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href=""></a><span class="co"># Extract content of the h2 element detected by its id ----</span></span>
<span id="cb180-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"#Cadre_des_données"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb180-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Cadre des données"</code></pre>
</div>
</div>
<p><br></p>
<p><strong>Extract attribute</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb182"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb182-1"><a href=""></a><span class="co"># Extract URL of the first image ----</span></span>
<span id="cb182-2"><a href=""></a>image_url <span class="ot">&lt;-</span> rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"img"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb182-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_attr</span>(<span class="at">name =</span> <span class="st">"src"</span>)</span>
<span id="cb182-4"><a href=""></a>image_url</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "/static/images/icons/wikipedia.png"</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb184-1"><a href=""></a><span class="co"># Build image full URL ----</span></span>
<span id="cb184-2"><a href=""></a>image_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(base_url, image_url)</span>
<span id="cb184-3"><a href=""></a>image_url</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "https://fr.wikipedia.org/static/images/icons/wikipedia.png"</code></pre>
</div>
</div>
</div></div>
</section>
<section id="scrap-other-elements-5" class="slide level2">
<h2>Scrap other elements</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Detect HTML element by tag</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href=""></a><span class="co"># Extract content of h1 element ----</span></span>
<span id="cb186-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"h1"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb186-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Liste des communes de France les plus peuplées"</code></pre>
</div>
</div>
<p><br></p>
<p><strong>Detect HTML elements by tag</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href=""></a><span class="co"># Extract content of the first h2 element ----</span></span>
<span id="cb188-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"h2"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb188-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Sommaire"</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href=""></a><span class="co"># Extract content of all h2 elements ----</span></span>
<span id="cb190-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_elements</span>(content, <span class="at">css =</span> <span class="st">"h2"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb190-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Sommaire"                                                 
## [2] "Cadre des données"                                        
## [3] "Vue d'ensemble"                                           
## [4] "Communes de plus de 30 000 habitants"                     
## [5] "Communes ayant compté plus de 30 000 habitants avant 2024"
## [6] "Notes et références"                                      
## [7] "Voir aussi"</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Detect HTML element by ID</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb192"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a href=""></a><span class="co"># Extract content of the h2 element detected by its id ----</span></span>
<span id="cb192-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"#Cadre_des_données"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb192-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Cadre des données"</code></pre>
</div>
</div>
<p><br></p>
<p><strong>Extract attribute</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb194"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb194-1"><a href=""></a><span class="co"># Extract URL of the first image ----</span></span>
<span id="cb194-2"><a href=""></a>image_url <span class="ot">&lt;-</span> rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"img"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb194-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_attr</span>(<span class="at">name =</span> <span class="st">"src"</span>)</span>
<span id="cb194-4"><a href=""></a>image_url</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "/static/images/icons/wikipedia.png"</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb196"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb196-1"><a href=""></a><span class="co"># Build image full URL ----</span></span>
<span id="cb196-2"><a href=""></a>image_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(base_url, image_url)</span>
<span id="cb196-3"><a href=""></a>image_url</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "https://fr.wikipedia.org/static/images/icons/wikipedia.png"</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb198-1"><a href=""></a><span class="co"># Download image ----</span></span>
<span id="cb198-2"><a href=""></a><span class="fu">download.file</span>(<span class="at">url      =</span> image_url,</span>
<span id="cb198-3"><a href=""></a>              <span class="at">destfile =</span> <span class="st">"wikipedia_logo.png"</span>,</span>
<span id="cb198-4"><a href=""></a>              <span class="at">mode     =</span> <span class="st">"wb"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div></div>
</section>
<section id="getting-the-good-selector" class="slide level2">
<h2>Getting the good selector</h2>
<ul>
<li>Press <code>CTRL</code> + <code>U</code> (Firefox) to display the HTML code of the page</li>
<li>Right click on a page element and click on <code>Inspect</code></li>
<li>Install <a href="https://rvest.tidyverse.org/articles/selectorgadget.html"><strong>SelectorGadget</strong></a> bookmarklet in your browser</li>
</ul>
<div class="fragment">
<p><br></p>
<p><strong>Dynamic web pages</strong></p>
<ul>
<li>Have a look at the function <a href="https://rvest.tidyverse.org/reference/session.html"><code>session()</code></a> of the package <code>rvest</code>.</li>
<li>Have a look at the package <a href="https://docs.ropensci.org/RSelenium/"><strong><code>RSelenium</code></strong></a></li>
</ul>
</div>
</section>
<section id="ethics-and-legalities" class="slide level2">
<h2>Ethics and legalities</h2>
<p>Well… it’s complicated.</p>
<p><br> <br></p>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Read the <a href="https://r4ds.hadley.nz/webscraping#scraping-ethics-and-legalities"><strong>Chapter 24.2</strong></a> of the book <a href="https://r4ds.hadley.nz/">R for Data Science</a> by Wickham, Cetinkaya-Rundel &amp; Grolemund.</p>
<div class="fragment">
<p><br></p>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Be nice on the web with the package <a href="https://dmi3kno.github.io/polite/"><strong><code>polite</code></strong></a></p>
</div>
</section>
<section id="links" class="slide level2">
<h2>Links</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Some resources</p>
<ul>
<li><a href="https://rvest.tidyverse.org/articles/rvest.html"><strong>Web scraping 101</strong></a> by H. Wickham</li>
<li><a href="https://r4ds.hadley.nz/webscraping"><strong>R for Data Science</strong></a> (Chapter 24.2) by H. Wickham, M. Cetinkaya-Rundel &amp; G. Grolemund</li>
<li><a href="https://jakobtures.github.io/web-scraping/"><strong>Web Scraping using R</strong></a> by J. Tures</li>
<li><a href="https://bookdown.org/f_lennert/workshop-ukraine/introduction-to-how-the-web-is-written-and-rvest.html"><strong>Intermediate Web Scraping</strong></a> by F. Lennert</li>
</ul>
</section></section>
<section id="thanks" class="title-slide slide level1 center">
<h1>Thanks</h1>
<div class="quarto-auto-generated-content">
<p><img src="images/logo-affiliation.png" class="slide-logo"></p>
<div class="footer footer-default">
<p><i class="fa-brands fa-github" aria-label="github"></i> &nbsp;<a href="https://github.com/biodiversitydata/data-access"><code>biodiversitydata/data-access</code></a> &nbsp; • &nbsp; <i class="fa-brands fa-creative-commons" aria-label="creative-commons"></i> <i class="fa-brands fa-creative-commons-by" aria-label="creative-commons-by"></i> &nbsp;<a href="https://creativecommons.org/licenses/by/4.0/deed.en"><code>cc-by-4.0</code></a></p>
</div>
</div>
</section>


    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="index_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="index_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="index_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="index_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="index_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="index_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="index_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': true,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>