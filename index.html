<!DOCTYPE html>
<html lang="en"><head>
<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/tabby.min.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<link href="index_files/libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="index_files/libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<link href="index_files/libs/quarto-contrib/academicons-1.9.2/all.css" rel="stylesheet">
<link href="index_files/libs/quarto-contrib/academicons-1.9.2/size.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.8.25">

  <title>Data access</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/theme/quarto-7e9783838747aff8f3e1fd2788a0d82a.css">
  <link href="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">


<section class="slide level2">

<!-- Insert section 'Title slide' -->
<div class="title-slide-container">
<div class="title-slide-content">
<div class="columns">
<!-- Title slide logo --><div class="column logo" style="width:32%;">
<p><img data-src="images/logo-title-slide.png"></p>
</div><!-- Title slide content --><div class="column information" style="width:68%;">
<div class="title">
<p>Accessing biodiversity data</p>
</div>
<div class="subtitle">
<p>Web portals, scripting, API &amp; Web scraping</p>
</div>
<div class="date">
<p>October 2025</p>
</div>
<div class="columns authors">
<div class="column author" style="width:32%;">
<p>Nicolas Casajus<br> <a href="mailto:rdev.nc@gmail.com"><i class="fa-solid fa-envelope" aria-label="envelope"></i></a> <a href="https://nicolascasajus.fr"><i class="fa-solid fa-globe" aria-label="globe"></i></a> <a href="https://github.com/ahasverus"><i class="fa-brands fa-github" aria-label="github"></i></a> <a href="https://orcid.org/0000-0002-5537-5294"><i class="fa-brands fa-orcid" aria-label="orcid"></i></a> <a href="https://scholar.google.fr/citations?user=n1swa1UAAAAJ"><i class="ai  ai-google-scholar"></i></a></p>
</div><!-- Second author --><div class="column author" style="width:32%;">
<p>Camille Coux<br> <a href="mailto:camille.coux@fondationbiodiversite.fr"><i class="fa-solid fa-envelope" aria-label="envelope"></i></a> <a href="https://www.fondationbiodiversite.fr/en/membre/camille-coux/"><i class="fa-solid fa-globe" aria-label="globe"></i></a> <a href="https://github.com/camillecoux"><i class="fa-brands fa-github" aria-label="github"></i></a> <a href="https://orcid.org/0000-0002-6346-9194"><i class="fa-brands fa-orcid" aria-label="orcid"></i></a> <a href="https://scholar.google.fr/citations?user=BGywDqsAAAAJ"><i class="ai  ai-google-scholar"></i></a></p>
</div><!-- Third author --><div class="column author" style="width:32%;">
<!--
Author name<br/>
[](mailto:author-email)
[](author-website)
[](author-github)
[](author-orcid)
-->
</div><!-- Close {.columns .authors} -->
</div>
<div class="columns affiliations">
<div class="column affiliation" style="width:32%;">
<p>Data scientists <br> <code><span class="citation" data-cites="FRB-CESAB">@FRB-CESAB</span></code> &nbsp; <a href="https://www.fondationbiodiversite.fr/en/about-the-foundation/le-cesab/"><i class="fa-solid fa-globe" aria-label="globe"></i></a> &nbsp; <a href="https://github.com/frbcesab"><i class="fa-brands fa-github" aria-label="github"></i></a></p>
</div><!-- Second affiliation --><div class="column affiliation" style="width:32%;">
<!--
Data scientist
<br/>
<code>@FRB-CESAB</code>
&nbsp;
[](https://www.fondationbiodiversite.fr/en/about-the-foundation/le-cesab/)
&nbsp;
[](https://github.com/frbcesab)
-->
</div><!-- Third affiliation --><div class="column affiliation" style="width:32%;">
<!--
 &nbsp;[Affiliation](affiliation-url)
-->
</div><!-- Close {.columns .affiliations} -->
</div>
<!-- Close {.column .information} -->
</div><!-- Close {.columns} -->
</div>
<!-- Close {.title-slide-content} -->
</div>
<!-- Close {.title-slide-container} -->
</div>
<!-- Insert section 'Where are we?' -->
</section>
<section id="data-lifecycle" class="slide level2">
<h2>Data lifecycle</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/data-lifecycle-0.png" class="quarto-figure quarto-figure-center" style="width:50.0%"></p>
</figure>
</div>
</section>
<section id="data-lifecycle-1" class="slide level2">
<h2>Data lifecycle</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/data-lifecycle-2_6.png" class="quarto-figure quarto-figure-center" style="width:50.0%"></p>
</figure>
</div>
<!-- Insert section 'Table of contents' -->
</section>
<section>
<section id="table-of-contents" class="title-slide slide level1 center">
<h1>Table of contents</h1>

</section>
<section id="table-of-contents-1" class="slide level2">
<h2>Table of contents</h2>
<p><br> <br> <br></p>
<div class="columns">
<div class="column center" style="width:20%;">
<p><i class="fa-solid fa-globe fa-2x" aria-label="globe"></i><br></p>
<p>Web portals</p>
</div><div class="column center" style="width:20%;">

</div><div class="column center" style="width:20%;">
<p><i class="fa-solid fa-code fa-2x" aria-label="code"></i><br></p>
<p>Scripting</p>
</div><div class="column center" style="width:20%;">

</div><div class="column center" style="width:20%;">
<p><i class="fa-solid fa-wrench fa-2x" aria-label="wrench"></i><br></p>
<p>API</p>
</div></div>
<p><br><br></p>
<div class="columns">
<div class="column center" style="width:20%;">

</div><div class="column center" style="width:20%;">
<p><i class="fa-solid fa-user-clock fa-2x" aria-label="user-clock"></i><br></p>
<p>Exercise</p>
</div><div class="column center" style="width:20%;">

</div><div class="column center" style="width:20%;">
<p><i class="fa-brands fa-css3 fa-2x" aria-label="css3"></i><br></p>
<p>Web scraping</p>
</div><div class="column center" style="width:20%;">

</div></div>
<!-- Insert section 'Web portals' -->
</section></section>
<section>
<section id="web-portals" class="title-slide slide level1 center">
<h1><i class="fa-solid fa-globe fa-1x" aria-label="globe"></i> &nbsp;&nbsp;Web portals</h1>
<!--Slide 0 -->
</section>
<section id="web-portals-1" class="slide level2">
<h2>Web portals</h2>
<blockquote>
<p>Any online platform (website) which supports users in accessing collections of open data. They can be governmental (e.g.&nbsp;<a href="www.data.gouv.fr">data.gouv.fr</a>), or from organizations, NGOs, or from an individual initiative.</p>
</blockquote>
<div class="fragment">
<p><br></p>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;You access data in a web browser (by clicking)</p>
</div>
<div class="fragment">
<p><br></p>
<ul>
<li>Click on a ready-to-download file (e.g.&nbsp;GADM)</li>
<li>Fill a form to download a user-specific file (e.g.&nbsp;GBIF)</li>
<li>Fill a form to get data through a URL (e.g.&nbsp;BirdLife)</li>
<li>Sometimes, you need to registrer (e.g.&nbsp;TRY)</li>
</ul>
<!--Slide 1 -->
</div>
</section>
<section id="case-study" class="slide level2">
<h2>Case study</h2>
<blockquote>
<p>You’re doing some species distribution models for metropolitan France. You already have a <strong>list of species</strong> and their <strong>occurrences in space and time</strong>.</p>
</blockquote>
<p>Now, you need to retrieve:</p>
<ul>
<li>Spatial boundaries of <strong>France regions</strong> to map the species occurrences</li>
<li><strong>Climate data</strong> (temperature and precipitation) to fit models</li>
</ul>
<!--Slide 2bis -->
</section>
<section id="access-data---france-regions" class="slide level2">
<h2>Access data - France regions</h2>
<p>The <a href="https://gadm.org/">GADM data portal</a> is a good option to get spatial boundaries of any country in the World at different administrative levels.</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/gadm-portal.png" class="quarto-figure quarto-figure-center" style="width:50.0%"></p>
</figure>
</div>
<blockquote>
<p>They have a nice description of <a href="https://gadm.org/formats.html">file formats</a>.</p>
</blockquote>
<div class="fragment">
<p><br></p>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Let’s use the <strong>Geopackage</strong> format (<code>.gpkg</code>)</p>
<!--Slide 3 -->
</div>
</section>
<section id="access-data---france-regions-1" class="slide level2">
<h2>Access data - France regions</h2>
<p>Let’s list the layers available in the <code>gadm41_FRA.gpkg</code> file</p>
<p><br></p>
<div class="columns">
<div class="column" style="width:45%;">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href=""></a>sf<span class="sc">::</span><span class="fu">st_layers</span>(</span>
<span id="cb1-2"><a href=""></a>  here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"gadm41_FRA.gpkg"</span>)</span>
<span id="cb1-3"><a href=""></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## Driver: GPKG 
## Available layers:
##   layer_name geometry_type features fields crs_name
## 1  ADM_ADM_0 Multi Polygon        1      2   WGS 84
## 2  ADM_ADM_1 Multi Polygon       13     11   WGS 84
## 3  ADM_ADM_2 Multi Polygon       96     13   WGS 84
## 4  ADM_ADM_3 Multi Polygon      350     16   WGS 84
## 5  ADM_ADM_4 Multi Polygon     3728     14   WGS 84
## 6  ADM_ADM_5 Multi Polygon    36611     15   WGS 84</code></pre>
</div>
</div>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:45%;">
<p>All these layers correspond to different levels of subdivisions.</p>
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;">Layer name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">ADM_ADM_0</td>
<td style="text-align: left;">France contours</td>
</tr>
<tr class="even">
<td style="text-align: left;">ADM_ADM_1</td>
<td style="text-align: left;">Region countours</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ADM_ADM_2</td>
<td style="text-align: left;">Departments contours</td>
</tr>
<tr class="even">
<td style="text-align: left;">ADM_ADM_3</td>
<td style="text-align: left;">Communes contours</td>
</tr>
</tbody>
</table>
</div></div>
<!--Slide 4 -->
</section>
<section id="access-data---france-regions-2" class="slide level2">
<h2>Access data - France regions</h2>
<p>Let’s import the regional subdivision</p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href=""></a>regions <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_read</span>(</span>
<span id="cb3-2"><a href=""></a>  <span class="at">dsn =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"gadm41_FRA.gpkg"</span>),</span>
<span id="cb3-3"><a href=""></a>  <span class="at">layer =</span> <span class="st">"ADM_ADM_1"</span></span>
<span id="cb3-4"><a href=""></a>)</span>
<span id="cb3-5"><a href=""></a></span>
<span id="cb3-6"><a href=""></a><span class="fu">head</span>(regions)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column" style="width:50%;">

</div></div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>## Simple feature collection with 6 features and 11 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -5.143751 ymin: 41.33375 xmax: 9.560416 ymax: 50.16764
## Geodetic CRS:  WGS 84
##     GID_1 GID_0 COUNTRY                  NAME_1 VARNAME_1 NL_NAME_1 TYPE_1
## 1 FRA.1_1   FRA  France    Auvergne-Rhône-Alpes        NA        NA Région
## 2 FRA.2_1   FRA  France Bourgogne-Franche-Comté        NA        NA Région
## 3 FRA.3_1   FRA  France                Bretagne        NA        NA Région
## 4 FRA.4_1   FRA  France     Centre-Val de Loire        NA        NA Région
## 5 FRA.5_1   FRA  France                   Corse   Corsica        NA Région
## 6 FRA.6_1   FRA  France               Grand Est        NA        NA Région
##   ENGTYPE_1 CC_1 HASC_1  ISO_1                           geom
## 1    Region   NA  FR.AR     NA MULTIPOLYGON (((5.415834 44...
## 2    Region   NA  FR.BF     NA MULTIPOLYGON (((5.256271 46...
## 3    Region   NA  FR.BT FR-BRE MULTIPOLYGON (((-3.248194 4...
## 4    Region   NA  FR.CN FR-CVL MULTIPOLYGON (((2.063459 46...
## 5    Region   NA  FR.CE FR-20R MULTIPOLYGON (((9.102084 41...
## 6    Region   NA  FR.AO     NA MULTIPOLYGON (((7.178251 47...</code></pre>
</div>
</div>
</section>
<section id="access-data---france-regions-3" class="slide level2">
<h2>Access data - France regions</h2>
<p>Let’s import the regional subdivision</p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href=""></a>regions <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_read</span>(</span>
<span id="cb5-2"><a href=""></a>  <span class="at">dsn =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"gadm41_FRA.gpkg"</span>),</span>
<span id="cb5-3"><a href=""></a>  <span class="at">layer =</span> <span class="st">"ADM_ADM_1"</span></span>
<span id="cb5-4"><a href=""></a>)</span>
<span id="cb5-5"><a href=""></a></span>
<span id="cb5-6"><a href=""></a><span class="fu">head</span>(regions)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href=""></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb6-2"><a href=""></a></span>
<span id="cb6-3"><a href=""></a><span class="fu">ggplot</span>(regions) <span class="sc">+</span> </span>
<span id="cb6-4"><a href=""></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> NAME_1)) <span class="sc">+</span> </span>
<span id="cb6-5"><a href=""></a>  <span class="fu">theme_bw</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div></div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>## Simple feature collection with 6 features and 11 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -5.143751 ymin: 41.33375 xmax: 9.560416 ymax: 50.16764
## Geodetic CRS:  WGS 84
##     GID_1 GID_0 COUNTRY                  NAME_1 VARNAME_1 NL_NAME_1 TYPE_1
## 1 FRA.1_1   FRA  France    Auvergne-Rhône-Alpes        NA        NA Région
## 2 FRA.2_1   FRA  France Bourgogne-Franche-Comté        NA        NA Région
## 3 FRA.3_1   FRA  France                Bretagne        NA        NA Région
## 4 FRA.4_1   FRA  France     Centre-Val de Loire        NA        NA Région
## 5 FRA.5_1   FRA  France                   Corse   Corsica        NA Région
## 6 FRA.6_1   FRA  France               Grand Est        NA        NA Région
##   ENGTYPE_1 CC_1 HASC_1  ISO_1                           geom
## 1    Region   NA  FR.AR     NA MULTIPOLYGON (((5.415834 44...
## 2    Region   NA  FR.BF     NA MULTIPOLYGON (((5.256271 46...
## 3    Region   NA  FR.BT FR-BRE MULTIPOLYGON (((-3.248194 4...
## 4    Region   NA  FR.CN FR-CVL MULTIPOLYGON (((2.063459 46...
## 5    Region   NA  FR.CE FR-20R MULTIPOLYGON (((9.102084 41...
## 6    Region   NA  FR.AO     NA MULTIPOLYGON (((7.178251 47...</code></pre>
</div>
</div>
<!--Slide 5 -->
</section>
<section id="access-data---france-regions-4" class="slide level2">
<h2>Access data - France regions</h2>
<p><br></p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-24-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
<!--Slide 6 -->
</section>
<section id="access-data---climate-data" class="slide level2">
<h2>Access data - Climate data</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/worldclim.png"></p>
<figcaption><a href="https://worldclim.org/">WorldClim portal</a></figcaption>
</figure>
</div>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/chelsa.png"></p>
<figcaption><a href="https://www.chelsa-climate.org/">Chelsa portal</a></figcaption>
</figure>
</div>
</div></div>
<div class="fragment">
<p><br></p>
<blockquote>
<p>You need to know what you are looking for: resolution, time period, monthly or yearly averages, geographic coverage, etc.</p>
</blockquote>
<!--Slide 12 -->
</div>
</section>
<section id="trait-data---the-pandora-box" class="slide level2">
<h2>Trait data - The Pandora box</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;<a href="https://www.try-db.org/TryWeb/dp.php">TRY data portal</a> for plant traits</p>
<p>To access <strong>TRY</strong> database, you’ll need to:</p>
<ol type="1">
<li>register</li>
<li>fill a request for which you write a short description of your project</li>
<li>wait for a text file by email within a few days</li>
</ol>
<div class="fragment">
<p><br> <br></p>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;<a href="https://opentraits.org/datasets.html">OpenTraits portal</a></p>
<!--Slide 13 -->
</div>
</section>
<section id="retrieving-data-from-repositories" class="slide level2 nostretch">
<h2>Retrieving data from repositories</h2>
<p><br></p>
<div class="columns">
<div class="column center" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/Zenodo_Logo.jpg" style="width:50.0%"></p>
<figcaption><a href="https://zenodo.org/">Zenodo</a></figcaption>
</figure>
</div>
</div><div class="column center" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/figshare_logo.jpeg" style="width:50.0%"></p>
<figcaption><a href="https://figshare.com/">FigShare</a></figcaption>
</figure>
</div>
</div></div>
<p><br></p>
<blockquote>
<p>This usually happens when you want to retrieve data from a paper or study.</p>
</blockquote>
<p><br> <br></p>
<p>FORCIS, from <a href="https://www.nature.com/articles/s41597-023-02264-2">Chaabane <em>et al.</em> (2023)</a>, published their <a href="https://zenodo.org/records/10640925">database</a> on Zenodo.</p>
<!-- Insert section 'Scripting' -->
</section></section>
<section>
<section id="scripting" class="title-slide slide level1 center">
<h1><i class="fa-solid fa-code fa-1x" aria-label="code"></i> &nbsp;&nbsp;Scripting</h1>
<!-- Side 1 -->
</section>
<section id="download-data-directly-from" class="slide level2">
<h2>Download data directly from <i class="fa-brands fa-r-project" aria-label="r-project"></i></h2>
<p>In the previous section, we saw how to manually download data from a web browser. However, when possible, we recommend you to perfom this task using code (<strong>scripting</strong>).</p>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;<strong>Reproducibility</strong> &amp; <strong>Automation</strong></p>
<div class="fragment">
<p><br></p>
<p>In <i class="fa-brands fa-r-project" aria-label="r-project"></i>, the function <a href="https://rdrr.io/r/utils/download.file.html"><code>download.file()</code></a> can be used to download a file from Internet.</p>
<p><br></p>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href=""></a><span class="fu">download.file</span>(</span>
<span id="cb8-2"><a href=""></a>  <span class="at">url =</span> <span class="st">"https://geodata.ucdavis.edu/gadm/gadm4.1/gpkg/gadm41_FRA.gpkg"</span>,</span>
<span id="cb8-3"><a href=""></a>  <span class="at">destfile =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"fr_2.gpkg"</span>),</span>
<span id="cb8-4"><a href=""></a>  <span class="at">mode =</span> <span class="st">"wb"</span></span>
<span id="cb8-5"><a href=""></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column" style="width:40%;">

</div></div>
<blockquote>
<p><em>Set the argument <code>mode</code> to <code>wb</code>, especially if you use Windows</em></p>
</blockquote>
<!-- Side 5 -->
</div>
</section>
<section id="where-can-i-find-the-file-url" class="slide level2">
<h2>Where can I find the file URL?</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Just right-click on a link and copy the URL.</p>
<div class="quarto-figure quarto-figure-right">
<figure>
<p><img data-src="images/gadm-rightclick.png" class="quarto-figure quarto-figure-right" style="width:60.0%"></p>
</figure>
</div>
</section>
<section id="what-about-compressed-file" class="slide level2">
<h2>What about compressed file?</h2>
<p>You can use the helper functions <a href="https://rdrr.io/r/utils/unzip.html"><code>unzip()</code></a> and <a href="https://rdrr.io/r/base/connections.html"><code>gzfile()</code></a> after downloading the compressed file.</p>
<p><br></p>
<div class="columns">
<div class="column" style="width:70%;">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href=""></a><span class="fu">download.file</span>(</span>
<span id="cb9-2"><a href=""></a>  <span class="at">url =</span> <span class="st">"http://www.sociopatterns.org/wp-content/uploads/2015/07/Friendship-network_data_2013.csv.gz"</span>,</span>
<span id="cb9-3"><a href=""></a>  <span class="at">destfile =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"friends.gz"</span>),</span>
<span id="cb9-4"><a href=""></a>  <span class="at">mode =</span> <span class="st">"wb"</span></span>
<span id="cb9-5"><a href=""></a>)</span>
<span id="cb9-6"><a href=""></a></span>
<span id="cb9-7"><a href=""></a>friends <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="fu">gzfile</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"friends.gz"</span>)))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column" style="width:30%;">

</div></div>
<div class="fragment">
<p><br></p>
<p>But it’s unnecessary for most <i class="fa-brands fa-r-project" aria-label="r-project"></i> reading functions</p>
<p><br></p>
<div class="columns">
<div class="column" style="width:70%;">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href=""></a>friends <span class="ot">&lt;-</span> <span class="fu">read.table</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"friends.gz"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column" style="width:30%;">

</div></div>
</div>
<div class="fragment">
<p><br></p>
<p>Other useful <i class="fa-brands fa-r-project" aria-label="r-project"></i> packages: <a href="https://r-datatable.com/"><code>data.table</code></a>, <a href="https://vroom.r-lib.org/"><code>vroom</code></a>, <a href="https://readr.tidyverse.org/"><code>readr</code></a>, etc.</p>
<!-- Side 6 -->
</div>
</section>
<section id="the-package-geodata" class="slide level2">
<h2>The <i class="fa-brands fa-r-project" aria-label="r-project"></i> package <code>geodata</code></h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>Some <i class="fa-brands fa-r-project" aria-label="r-project"></i> packages have been tailored specifically to facilitate the data access using the <a href="https://rdrr.io/r/utils/download.file.html"><code>download.file()</code></a> function (internally).</p>
<p><br></p>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;This is the case of the <a href="https://github.com/rspatial/geodata"><code>geodata</code></a> package</p>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<p><img data-src="images/geodata.png" style="width:100.0%"></p>
</div></div>
<!-- Side 7 -->
</section>
<section id="the-package-geodata-1" class="slide level2">
<h2>The <i class="fa-brands fa-r-project" aria-label="r-project"></i> package <code>geodata</code></h2>
<p>For <strong>WorldClim</strong> data</p>
<p><br></p>
<div class="columns">
<div class="column" data-with="50%">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href=""></a>fr <span class="ot">&lt;-</span> geodata<span class="sc">::</span><span class="fu">worldclim_country</span>(</span>
<span id="cb11-2"><a href=""></a>  <span class="at">country =</span> <span class="st">"France"</span>,</span>
<span id="cb11-3"><a href=""></a>  <span class="at">var =</span> <span class="st">"tavg"</span>,</span>
<span id="cb11-4"><a href=""></a>  <span class="at">path =</span> <span class="st">"temp.tif"</span></span>
<span id="cb11-5"><a href=""></a>)</span>
<span id="cb11-6"><a href=""></a></span>
<span id="cb11-7"><a href=""></a><span class="co"># Have a look at this object:</span></span>
<span id="cb11-8"><a href=""></a>fr</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column" style="width:50%;">

</div></div>
<p><img data-src="images/spatraster.png" style="width:80.0%"></p>
<!-- Side 8 -->
</section>
<section id="the-package-geodata-2" class="slide level2">
<h2>The <i class="fa-brands fa-r-project" aria-label="r-project"></i> package <code>geodata</code></h2>
<p>Use the <a href="https://rspatial.github.io/terra/"><code>terra</code></a> package to handle and plot the raster (GeoTIFF format)</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href=""></a><span class="co"># plot the first monthly average:</span></span>
<span id="cb12-2"><a href=""></a>terra<span class="sc">::</span><span class="fu">plot</span>(fr<span class="sc">$</span><span class="st">"FRA_wc2.1_30s_tavg_1"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column">

</div></div>
<div class="quarto-figure quarto-figure-right">
<figure>
<p><img data-src="images/worldclim_fr_tavg.png" class="quarto-figure quarto-figure-right" style="width:50.0%"></p>
</figure>
</div>
<!-- Insert section 'API' -->
</section></section>
<section>
<section id="api" class="title-slide slide level1 center">
<h1><i class="fa-solid fa-wrench fa-1x" aria-label="wrench"></i> &nbsp;&nbsp;API</h1>

</section>
<section id="accessing-data-from-the-web" class="slide level2">
<h2>Accessing data from the Web</h2>
<p><br><br><br><br></p>
<div class="columns">
<div class="column center" style="width:45%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/user-interface.png"></p>
<figcaption><strong>User interface</strong></figcaption>
</figure>
</div>
</div><div class="column center" style="width:10%;">

</div><div class="column center" style="width:45%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/code-interface.png"></p>
<figcaption><strong>Code interface</strong></figcaption>
</figure>
</div>
</div></div>
<div class="columns">
<div class="column center" style="width:45%;">
<p><i class="fa-solid fa-computer-mouse fa-lg" aria-label="computer-mouse"></i></p>
</div><div class="column center" style="width:10%;">

</div><div class="column center" style="width:45%;">
<p><i class="fa-solid fa-code fa-lg" aria-label="code"></i></p>
</div></div>
<!--

## API - Definition

Abbreviation of **Application Programming Interface**[^1]

- It is a type of software interface, offering a service to other pieces of software.
- In contrast to a _user interface_, which connects a software to a person, an API connects pieces of software to each other.
- **_API specification_**: documentation describing how to use such a connection ([Swagger](https://swagger.io/)).

. . .

<br><br>

Different types of API:

- Library and framework API
- Operating systems API
- Remote API
- **Web API**


[^1]: Source: [Wikipedia](https://en.wikipedia.org/wiki/API)
-->
</section>
<section id="restful-web-api" class="slide level2">
<h2>(RESTful) Web API</h2>
<blockquote>
<p><strong>Definition</strong>: A service accessed from a client device (mobile phones, laptops, etc.) to a Web server using the Hypertext Transfer Protocol (HTTP)<sup>1</sup>.</p>
</blockquote>
<ul>
<li>The <strong>client</strong> sends an HTTP <strong>request</strong> to the Web server</li>
<li>The Web <strong>server</strong> sends back a <strong>response</strong> in <a href="https://en.wikipedia.org/wiki/JSON"><strong>JSON</strong></a> or <a href="https://en.wikipedia.org/wiki/XML"><strong>XML</strong></a> format (raw data)</li>
<li>The Web server exposes one or more <strong>endpoints</strong> (predefined request/response)</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/code-interface.png" style="width:50.0%"></p>
<figcaption><strong>Code interface</strong></figcaption>
</figure>
</div>
<aside><ol class="aside-footnotes"><li id="fn1"><p>Source: <a href="https://en.wikipedia.org/wiki/Web_API">Wikipedia</a></p></li></ol></aside></section>
<section id="restful-web-api-1" class="slide level2">
<h2>(RESTful) Web API</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Advantages</strong> (for the user)</p>
<ul>
<li>User can create its own client</li>
<li>Client can be developed in any language</li>
<li>User can include the service in a bigger project</li>
<li>User access raw data</li>
</ul>
<p><br><br></p>
<blockquote>
<p>Writing code means <strong>automation</strong> and <strong>reproducibility</strong></p>
</blockquote>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="restful-web-api-2" class="slide level2">
<h2>(RESTful) Web API</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Advantages</strong> (for the user)</p>
<ul>
<li>User can create its own client</li>
<li>Client can be developed in any language</li>
<li>User can include the service in a bigger project</li>
<li>User access raw data</li>
</ul>
<p><br><br></p>
<blockquote>
<p>Writing code means <strong>automation</strong> and <strong>reproducibility</strong></p>
</blockquote>
</div><div class="column" style="width:50%;">
<p><strong>Limitations</strong></p>
<ul>
<li>Each API has its own specification</li>
<li>Authentication method (free or not)
<ul>
<li>Token</li>
<li>Login and password</li>
</ul></li>
<li>Some restrictions
<ul>
<li>Number of requests per day/month</li>
<li>Number of records per request</li>
<li>Incomplete data</li>
</ul></li>
</ul>
</div></div>
</section>
<section id="example-of-apis" class="slide level2">
<h2>Example of APIs</h2>
<p><em>This is a non-exhaustive list</em></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Biodiversity data</strong></p>
<ul>
<li>Global Biodiversity Information Facility (GBIF) - <a href="https://techdocs.gbif.org/en/openapi/"><code>API</code></a></li>
<li>IUCN Red List - <a href="https://apiv3.iucnredlist.org/api/v3/docs"><code>API</code></a></li>
<li>Fishbase - <a href="https://fishbaseapi.readme.io/reference/getting-started"><code>API</code></a></li>
<li>Species+/CITES Checklist - <a href="https://api.speciesplus.net/"><code>API</code></a></li>
<li>Knowledge Network for Biocomplexity (KNB) - <a href="https://knb.ecoinformatics.org/api"><code>API</code></a></li>
</ul>
<p><strong>Taxonomy</strong></p>
<ul>
<li>Encyclopedia of Life (EOL) - <a href="https://eol.org/docs/what-is-eol/classic-apis"><code>API</code></a></li>
<li>Integrated Taxonomic Information System (ITIS) - <a href="https://www.itis.gov/ws_description.html"><code>API</code></a></li>
<li>Barcode of Life Data (BOLD) - <a href="https://v3.boldsystems.org/index.php/api_home"><code>API</code></a></li>
<li>World Register of Marine Species (WoRMS) - <a href="https://www.marinespecies.org/rest/"><code>API</code></a></li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<p><strong>Scientific literature</strong></p>
<ul>
<li>Web of Science - <a href="https://developer.clarivate.com/apis"><code>API</code></a></li>
<li>Scopus - <a href="https://dev.elsevier.com/"><code>API</code></a></li>
<li>CrossRef - <a href="https://www.crossref.org/documentation/retrieve-metadata/rest-api/"><code>API</code></a></li>
<li>OpenAlex - <a href="https://docs.openalex.org/how-to-use-the-api/api-overview"><code>API</code></a></li>
</ul>
<p><strong>Others</strong></p>
<ul>
<li>Wikipedia - <a href="https://www.mediawiki.org/wiki/API:Main_page"><code>API</code></a></li>
<li>OpenStreetMap - <a href="https://wiki.openstreetmap.org/wiki/API"><code>API</code></a></li>
<li>Zenodo - <a href="https://developers.zenodo.org/"><code>API</code></a></li>
</ul>
</div></div>
</section>
<section id="how-does-it-work" class="slide level2">
<h2>How does it work?</h2>
<blockquote>
<p>Requesting an API is based on the <strong>client-server protocol</strong></p>
</blockquote>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/request-response.png" class="quarto-figure quarto-figure-center" style="width:80.0%"></p>
</figure>
</div>
</section>
<section id="api-client" class="slide level2">
<h2>API Client</h2>
<blockquote>
<p>It’s the tool you use to request the API and parse the response (data).</p>
</blockquote>
<p><br></p>
<div class="fragment">
<p>If you are lucky, an API client will <strong>already be available</strong>.</p>
<p><br></p>
<p>Non-exhaustive list of <i class="fa-brands fa-r-project" aria-label="r-project"></i> packages</p>
<div class="columns">
<div class="column" style="width:25%;">
<ul>
<li><a href="https://docs.ropensci.org/rgbif/articles/rgbif.html"><code>rgbif</code></a></li>
<li><a href="https://docs.ropensci.org/taxize/articles/taxize.html"><code>taxize</code></a></li>
<li><a href="https://docs.ropensci.org/rcites/"><code>rcites</code></a></li>
</ul>
</div><div class="column" style="width:25%;">
<ul>
<li><a href="https://docs.ropensci.org/rredlist/"><code>rredlist</code></a></li>
<li><a href="https://docs.ropensci.org/rfishbase/"><code>rfishbase</code></a></li>
<li><a href="https://github.com/Ironholds/WikipediR/"><code>WikipediR</code></a></li>
</ul>
</div><div class="column" style="width:25%;">
<ul>
<li><a href="https://frbcesab.github.io/rwosstarter"><code>rwosstarter</code></a></li>
<li><a href="https://github.com/muschellij2/rscopus"><code>rscopus</code></a></li>
<li><a href="https://docs.ropensci.org/rcrossref/"><code>rcrossref</code></a></li>
</ul>
</div><div class="column" style="width:25%;">
<ul>
<li><a href="https://docs.ropensci.org/openalexR/"><code>openalexR</code></a></li>
<li><a href="https://docs.ropensci.org/osmdata/"><code>osmdata</code></a></li>
</ul>
</div></div>
</div>
<div class="fragment">
<p><br><br></p>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Otherwise you will have to <strong>build your own client</strong>.</p>
</div>
</section>
<section id="building-an-api-client" class="slide level2">
<h2>Building an API client</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="images/httr2-screenshot.png"></p>
<p><br></p>
<p>Available at: <a href="https://httr2.r-lib.org/" class="uri">https://httr2.r-lib.org/</a></p>
</div><div class="column" style="width:50%;">
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href=""></a><span class="co"># Install 'httr2' package ----</span></span>
<span id="cb13-2"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"httr2"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><br></p>
<table class="caption-top">
<caption>Table: Main functions of <code>httr2</code></caption>
<thead>
<tr class="header">
<th style="text-align: left;">Function</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>request()</code></td>
<td style="text-align: left;">Create an HTTP request</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>req_url_query()</code></td>
<td style="text-align: left;">Add parameters to an HTTP request</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>req_perform()</code></td>
<td style="text-align: left;">Send HTTP request to an API</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>resp_status()</code></td>
<td style="text-align: left;">Check the HTTP response status</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>resp_content_type()</code></td>
<td style="text-align: left;">Check the content type of the response</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>resp_body_json()</code></td>
<td style="text-align: left;">Parse the response content (JSON format)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>resp_body_xml()</code></td>
<td style="text-align: left;">Parse the response content (XML format)</td>
</tr>
</tbody>
</table>
</div></div>
</section>
<section id="building-an-api-client-1" class="slide level2">
<h2>Building an API client</h2>
<p>Example with the <strong>OpenStreetMap Nominatim</strong> <a href="https://nominatim.org/release-docs/develop/api/Overview/">API</a></p>
<blockquote>
<p>Retrieve coordinates from a location (city, address, building, etc.)</p>
</blockquote>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><a href="https://nominatim.openstreetmap.org/ui/search.html"><img data-src="images/nominatim-screenshot.png" class="quarto-figure quarto-figure-center" style="width:70.0%"></a></p>
</figure>
</div>
</section>
<section id="nominatim-api-client" class="slide level2">
<h2>Nominatim API client</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>1. Build the HTTP request</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href=""></a><span class="co"># Nominatim API endpoint ----</span></span>
<span id="cb14-2"><a href=""></a>endpoint <span class="ot">&lt;-</span> <span class="st">"https://nominatim.openstreetmap.org/search"</span></span>
<span id="cb14-3"><a href=""></a></span>
<span id="cb14-4"><a href=""></a><span class="co"># Prepare the HTTP request ----</span></span>
<span id="cb14-5"><a href=""></a>http_request <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">request</span>(endpoint)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search</code></pre>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="nominatim-api-client-1" class="slide level2">
<h2>Nominatim API client</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>1. Build the HTTP request</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href=""></a><span class="co"># Nominatim API endpoint ----</span></span>
<span id="cb16-2"><a href=""></a>endpoint <span class="ot">&lt;-</span> <span class="st">"https://nominatim.openstreetmap.org/search"</span></span>
<span id="cb16-3"><a href=""></a></span>
<span id="cb16-4"><a href=""></a><span class="co"># Prepare the HTTP request ----</span></span>
<span id="cb16-5"><a href=""></a>http_request <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">request</span>(endpoint)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search</code></pre>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href=""></a><span class="co"># Append request parameters ----</span></span>
<span id="cb18-2"><a href=""></a>http_request <span class="ot">&lt;-</span> http_request <span class="sc">|&gt;</span> </span>
<span id="cb18-3"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">city    =</span> <span class="st">"Montpellier"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb18-4"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">country =</span> <span class="st">"France"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search?city=Montpellier&amp;country=France</code></pre>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="nominatim-api-client-2" class="slide level2">
<h2>Nominatim API client</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>1. Build the HTTP request</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href=""></a><span class="co"># Nominatim API endpoint ----</span></span>
<span id="cb20-2"><a href=""></a>endpoint <span class="ot">&lt;-</span> <span class="st">"https://nominatim.openstreetmap.org/search"</span></span>
<span id="cb20-3"><a href=""></a></span>
<span id="cb20-4"><a href=""></a><span class="co"># Prepare the HTTP request ----</span></span>
<span id="cb20-5"><a href=""></a>http_request <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">request</span>(endpoint)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search</code></pre>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href=""></a><span class="co"># Append request parameters ----</span></span>
<span id="cb22-2"><a href=""></a>http_request <span class="ot">&lt;-</span> http_request <span class="sc">|&gt;</span> </span>
<span id="cb22-3"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">city    =</span> <span class="st">"Montpellier"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb22-4"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">country =</span> <span class="st">"France"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search?city=Montpellier&amp;country=France</code></pre>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href=""></a><span class="co"># Append response parameters ----</span></span>
<span id="cb24-2"><a href=""></a>http_request <span class="ot">&lt;-</span> http_request <span class="sc">|&gt;</span> </span>
<span id="cb24-3"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">format =</span> <span class="st">"json"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb24-4"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">limit  =</span> <span class="dv">1</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search?city=Montpellier&amp;country=France&amp;
format=json&amp;limit=1</code></pre>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="nominatim-api-client-3" class="slide level2">
<h2>Nominatim API client</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>1. Build the HTTP request</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href=""></a><span class="co"># Nominatim API endpoint ----</span></span>
<span id="cb26-2"><a href=""></a>endpoint <span class="ot">&lt;-</span> <span class="st">"https://nominatim.openstreetmap.org/search"</span></span>
<span id="cb26-3"><a href=""></a></span>
<span id="cb26-4"><a href=""></a><span class="co"># Prepare the HTTP request ----</span></span>
<span id="cb26-5"><a href=""></a>http_request <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">request</span>(endpoint)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search</code></pre>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href=""></a><span class="co"># Append request parameters ----</span></span>
<span id="cb28-2"><a href=""></a>http_request <span class="ot">&lt;-</span> http_request <span class="sc">|&gt;</span> </span>
<span id="cb28-3"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">city    =</span> <span class="st">"Montpellier"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb28-4"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">country =</span> <span class="st">"France"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search?city=Montpellier&amp;country=France</code></pre>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href=""></a><span class="co"># Append response parameters ----</span></span>
<span id="cb30-2"><a href=""></a>http_request <span class="ot">&lt;-</span> http_request <span class="sc">|&gt;</span> </span>
<span id="cb30-3"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">format =</span> <span class="st">"json"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb30-4"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">limit  =</span> <span class="dv">1</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search?city=Montpellier&amp;country=France&amp;
format=json&amp;limit=1</code></pre>
</div><div class="column" style="width:50%;">
<p><strong>2. Send the HTTP request</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href=""></a><span class="co"># Send HTTP request  ----</span></span>
<span id="cb32-2"><a href=""></a>http_response <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">req_perform</span>(http_request)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code>Status: 200 OK
Content-Type: application/json</code></pre>
</div></div>
</section>
<section id="nominatim-api-client-4" class="slide level2">
<h2>Nominatim API client</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>1. Build the HTTP request</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href=""></a><span class="co"># Nominatim API endpoint ----</span></span>
<span id="cb34-2"><a href=""></a>endpoint <span class="ot">&lt;-</span> <span class="st">"https://nominatim.openstreetmap.org/search"</span></span>
<span id="cb34-3"><a href=""></a></span>
<span id="cb34-4"><a href=""></a><span class="co"># Prepare the HTTP request ----</span></span>
<span id="cb34-5"><a href=""></a>http_request <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">request</span>(endpoint)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search</code></pre>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href=""></a><span class="co"># Append request parameters ----</span></span>
<span id="cb36-2"><a href=""></a>http_request <span class="ot">&lt;-</span> http_request <span class="sc">|&gt;</span> </span>
<span id="cb36-3"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">city    =</span> <span class="st">"Montpellier"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb36-4"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">country =</span> <span class="st">"France"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search?city=Montpellier&amp;country=France</code></pre>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href=""></a><span class="co"># Append response parameters ----</span></span>
<span id="cb38-2"><a href=""></a>http_request <span class="ot">&lt;-</span> http_request <span class="sc">|&gt;</span> </span>
<span id="cb38-3"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">format =</span> <span class="st">"json"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb38-4"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">limit  =</span> <span class="dv">1</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search?city=Montpellier&amp;country=France&amp;
format=json&amp;limit=1</code></pre>
</div><div class="column" style="width:50%;">
<p><strong>2. Send the HTTP request</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href=""></a><span class="co"># Send HTTP request  ----</span></span>
<span id="cb40-2"><a href=""></a>http_response <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">req_perform</span>(http_request)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code>Status: 200 OK
Content-Type: application/json</code></pre>
<p><br></p>
<p><strong>3. Check response status</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href=""></a><span class="co"># Check response status ----</span></span>
<span id="cb42-2"><a href=""></a>httr2<span class="sc">::</span><span class="fu">resp_status</span>(http_response)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] 200</code></pre>
</div>
</div>
</div></div>
</section>
<section id="nominatim-api-client-5" class="slide level2">
<h2>Nominatim API client</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>1. Build the HTTP request</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href=""></a><span class="co"># Nominatim API endpoint ----</span></span>
<span id="cb44-2"><a href=""></a>endpoint <span class="ot">&lt;-</span> <span class="st">"https://nominatim.openstreetmap.org/search"</span></span>
<span id="cb44-3"><a href=""></a></span>
<span id="cb44-4"><a href=""></a><span class="co"># Prepare the HTTP request ----</span></span>
<span id="cb44-5"><a href=""></a>http_request <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">request</span>(endpoint)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search</code></pre>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href=""></a><span class="co"># Append request parameters ----</span></span>
<span id="cb46-2"><a href=""></a>http_request <span class="ot">&lt;-</span> http_request <span class="sc">|&gt;</span> </span>
<span id="cb46-3"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">city    =</span> <span class="st">"Montpellier"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb46-4"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">country =</span> <span class="st">"France"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search?city=Montpellier&amp;country=France</code></pre>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href=""></a><span class="co"># Append response parameters ----</span></span>
<span id="cb48-2"><a href=""></a>http_request <span class="ot">&lt;-</span> http_request <span class="sc">|&gt;</span> </span>
<span id="cb48-3"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">format =</span> <span class="st">"json"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb48-4"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">limit  =</span> <span class="dv">1</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code>https://nominatim.openstreetmap.org/search?city=Montpellier&amp;country=France&amp;
format=json&amp;limit=1</code></pre>
</div><div class="column" style="width:50%;">
<p><strong>2. Send the HTTP request</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href=""></a><span class="co"># Send HTTP request  ----</span></span>
<span id="cb50-2"><a href=""></a>http_response <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">req_perform</span>(http_request)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code>Status: 200 OK
Content-Type: application/json</code></pre>
<p><br></p>
<p><strong>3. Check response status</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href=""></a><span class="co"># Check response status ----</span></span>
<span id="cb52-2"><a href=""></a>httr2<span class="sc">::</span><span class="fu">resp_status</span>(http_response)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] 200</code></pre>
</div>
</div>
<p><br></p>
<p><strong>4. Check response content type</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href=""></a><span class="co"># Check response status ----</span></span>
<span id="cb54-2"><a href=""></a>httr2<span class="sc">::</span><span class="fu">resp_content_type</span>(http_response)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "application/json"</code></pre>
</div>
</div>
</div></div>
</section>
<section id="nominatim-api-client-6" class="slide level2">
<h2>Nominatim API client</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>5. Parse response content</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href=""></a><span class="co"># Parse response content ----</span></span>
<span id="cb56-2"><a href=""></a>content <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">resp_body_json</span>(http_response)</span>
<span id="cb56-3"><a href=""></a></span>
<span id="cb56-4"><a href=""></a>content</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [[1]]
## [[1]]$place_id
## [1] 77908475
## 
## [[1]]$licence
## [1] "Data © OpenStreetMap contributors, ODbL 1.0. http://osm.org/copyright"
## 
## [[1]]$osm_type
## [1] "relation"
## 
## [[1]]$osm_id
## [1] 28722
## 
## [[1]]$lat
## [1] "43.6112422"
## 
## [[1]]$lon
## [1] "3.8767337"
## 
## [[1]]$class
## [1] "boundary"
## 
## [[1]]$type
## [1] "administrative"
## 
## [[1]]$place_rank
## [1] 16
## 
## [[1]]$importance
## [1] 0.6880008
## 
## [[1]]$addresstype
## [1] "city"
## 
## [[1]]$name
## [1] "Montpellier"
## 
## [[1]]$display_name
## [1] "Montpellier, Hérault, Occitanie, France métropolitaine, France"
## 
## [[1]]$boundingbox
## [[1]]$boundingbox[[1]]
## [1] "43.5667083"
## 
## [[1]]$boundingbox[[2]]
## [1] "43.6533580"
## 
## [[1]]$boundingbox[[3]]
## [1] "3.8070597"
## 
## [[1]]$boundingbox[[4]]
## [1] "3.9413208"</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href=""></a><span class="co"># Object type ----</span></span>
<span id="cb58-2"><a href=""></a><span class="fu">class</span>(content)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "list"</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href=""></a><span class="co"># Object dimensions ----</span></span>
<span id="cb60-2"><a href=""></a><span class="fu">length</span>(content)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] 1</code></pre>
</div>
</div>
</div></div>
</section>
<section id="nominatim-api-client-7" class="slide level2">
<h2>Nominatim API client</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>5. Parse response content</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href=""></a><span class="co"># Parse response content ----</span></span>
<span id="cb62-2"><a href=""></a>content <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">resp_body_json</span>(http_response)</span>
<span id="cb62-3"><a href=""></a></span>
<span id="cb62-4"><a href=""></a>content</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [[1]]
## [[1]]$place_id
## [1] 77908475
## 
## [[1]]$licence
## [1] "Data © OpenStreetMap contributors, ODbL 1.0. http://osm.org/copyright"
## 
## [[1]]$osm_type
## [1] "relation"
## 
## [[1]]$osm_id
## [1] 28722
## 
## [[1]]$lat
## [1] "43.6112422"
## 
## [[1]]$lon
## [1] "3.8767337"
## 
## [[1]]$class
## [1] "boundary"
## 
## [[1]]$type
## [1] "administrative"
## 
## [[1]]$place_rank
## [1] 16
## 
## [[1]]$importance
## [1] 0.6880008
## 
## [[1]]$addresstype
## [1] "city"
## 
## [[1]]$name
## [1] "Montpellier"
## 
## [[1]]$display_name
## [1] "Montpellier, Hérault, Occitanie, France métropolitaine, France"
## 
## [[1]]$boundingbox
## [[1]]$boundingbox[[1]]
## [1] "43.5667083"
## 
## [[1]]$boundingbox[[2]]
## [1] "43.6533580"
## 
## [[1]]$boundingbox[[3]]
## [1] "3.8070597"
## 
## [[1]]$boundingbox[[4]]
## [1] "3.9413208"</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href=""></a><span class="co"># Object type ----</span></span>
<span id="cb64-2"><a href=""></a><span class="fu">class</span>(content)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "list"</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href=""></a><span class="co"># Object dimensions ----</span></span>
<span id="cb66-2"><a href=""></a><span class="fu">length</span>(content)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] 1</code></pre>
</div>
</div>
<p><br></p>
<p><strong>6. Clean data</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href=""></a><span class="co"># Clean output ----</span></span>
<span id="cb68-2"><a href=""></a>content <span class="ot">&lt;-</span> content[[<span class="dv">1</span>]]</span>
<span id="cb68-3"><a href=""></a></span>
<span id="cb68-4"><a href=""></a>content <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb68-5"><a href=""></a>  <span class="st">"name"</span> <span class="ot">=</span> content<span class="sc">$</span><span class="st">"name"</span>,</span>
<span id="cb68-6"><a href=""></a>  <span class="st">"lon"</span> <span class="ot">=</span> <span class="fu">as.numeric</span>(content<span class="sc">$</span><span class="st">"lon"</span>),</span>
<span id="cb68-7"><a href=""></a>  <span class="st">"lat"</span> <span class="ot">=</span> <span class="fu">as.numeric</span>(content<span class="sc">$</span><span class="st">"lat"</span>)</span>
<span id="cb68-8"><a href=""></a>)</span>
<span id="cb68-9"><a href=""></a></span>
<span id="cb68-10"><a href=""></a>content</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>##          name      lon      lat
## 1 Montpellier 3.876734 43.61124</code></pre>
</div>
</div>
</div></div>
</section>
<section id="visualization" class="slide level2">
<h2>Visualization</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href=""></a><span class="co"># Install required package ----</span></span>
<span id="cb70-2"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"maps"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href=""></a><span class="co"># Map France boundary ----</span></span>
<span id="cb71-2"><a href=""></a>maps<span class="sc">::</span><span class="fu">map</span>(</span>
<span id="cb71-3"><a href=""></a>  <span class="at">regions =</span> <span class="st">"France"</span>, </span>
<span id="cb71-4"><a href=""></a>  <span class="at">fill =</span> <span class="cn">TRUE</span>, </span>
<span id="cb71-5"><a href=""></a>  <span class="at">col =</span> <span class="st">"black"</span></span>
<span id="cb71-6"><a href=""></a>)</span>
<span id="cb71-7"><a href=""></a></span>
<span id="cb71-8"><a href=""></a><span class="co"># Add retrieved coordinates ----</span></span>
<span id="cb71-9"><a href=""></a><span class="fu">points</span>(</span>
<span id="cb71-10"><a href=""></a>  <span class="at">x =</span> content<span class="sc">$</span><span class="st">"lon"</span>, </span>
<span id="cb71-11"><a href=""></a>  <span class="at">y =</span> content<span class="sc">$</span><span class="st">"lat"</span>, </span>
<span id="cb71-12"><a href=""></a>  <span class="at">pch =</span> <span class="dv">19</span>, </span>
<span id="cb71-13"><a href=""></a>  <span class="at">cex =</span> <span class="dv">1</span>, </span>
<span id="cb71-14"><a href=""></a>  <span class="at">col =</span> <span class="st">"red"</span></span>
<span id="cb71-15"><a href=""></a>)</span>
<span id="cb71-16"><a href=""></a></span>
<span id="cb71-17"><a href=""></a><span class="co"># Add retrieved name ----</span></span>
<span id="cb71-18"><a href=""></a><span class="fu">text</span>(</span>
<span id="cb71-19"><a href=""></a>  <span class="at">x =</span> content<span class="sc">$</span><span class="st">"lon"</span>, </span>
<span id="cb71-20"><a href=""></a>  <span class="at">y =</span> content<span class="sc">$</span><span class="st">"lat"</span>, </span>
<span id="cb71-21"><a href=""></a>  <span class="at">labels =</span> content<span class="sc">$</span><span class="st">"name"</span>, </span>
<span id="cb71-22"><a href=""></a>  <span class="at">pos =</span> <span class="dv">2</span>, </span>
<span id="cb71-23"><a href=""></a>  <span class="at">col =</span> <span class="st">"white"</span>, </span>
<span id="cb71-24"><a href=""></a>  <span class="at">family =</span> <span class="st">"serif"</span></span>
<span id="cb71-25"><a href=""></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column center" style="width:50%;">
<div class="cell" data-layout-align="right">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-right">
<figure>
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-77-1.png" class="quarto-figure quarto-figure-right" width="384"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="code-factorisation" class="slide level2">
<h2>Code factorisation</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Function definition</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href=""></a>get_coords_from_location <span class="ot">&lt;-</span> <span class="cf">function</span>(city, country) {</span>
<span id="cb72-2"><a href=""></a>  </span>
<span id="cb72-3"><a href=""></a>  <span class="co"># Nominatim API endpoint ----</span></span>
<span id="cb72-4"><a href=""></a>  endpoint <span class="ot">&lt;-</span> <span class="st">"https://nominatim.openstreetmap.org/search"</span></span>
<span id="cb72-5"><a href=""></a></span>
<span id="cb72-6"><a href=""></a>  <span class="co"># Prepare the HTTP request ----</span></span>
<span id="cb72-7"><a href=""></a>  http_request <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">request</span>(endpoint)</span>
<span id="cb72-8"><a href=""></a>  </span>
<span id="cb72-9"><a href=""></a>  <span class="co"># Append request parameters ----</span></span>
<span id="cb72-10"><a href=""></a>  http_request <span class="ot">&lt;-</span> http_request <span class="sc">|&gt;</span> </span>
<span id="cb72-11"><a href=""></a>    httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">city    =</span> city) <span class="sc">|&gt;</span> </span>
<span id="cb72-12"><a href=""></a>    httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">country =</span> country) <span class="sc">|&gt;</span> </span>
<span id="cb72-13"><a href=""></a>    httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">format =</span> <span class="st">"json"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb72-14"><a href=""></a>    httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">limit  =</span> <span class="dv">1</span>)</span>
<span id="cb72-15"><a href=""></a>  </span>
<span id="cb72-16"><a href=""></a>  <span class="co"># Send HTTP request  ----</span></span>
<span id="cb72-17"><a href=""></a>  http_response <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">req_perform</span>(http_request)</span>
<span id="cb72-18"><a href=""></a>  </span>
<span id="cb72-19"><a href=""></a>  <span class="co"># Check response status ----</span></span>
<span id="cb72-20"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">resp_check_status</span>(http_response)</span>
<span id="cb72-21"><a href=""></a>  </span>
<span id="cb72-22"><a href=""></a>  <span class="co"># Parse response content ----</span></span>
<span id="cb72-23"><a href=""></a>  content <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">resp_body_json</span>(http_response)</span>
<span id="cb72-24"><a href=""></a>  </span>
<span id="cb72-25"><a href=""></a>  <span class="co"># Clean output ----</span></span>
<span id="cb72-26"><a href=""></a>  content <span class="ot">&lt;-</span> content[[<span class="dv">1</span>]]</span>
<span id="cb72-27"><a href=""></a>  content <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb72-28"><a href=""></a>    <span class="st">"name"</span> <span class="ot">=</span> content<span class="sc">$</span><span class="st">"name"</span>,</span>
<span id="cb72-29"><a href=""></a>    <span class="st">"lon"</span> <span class="ot">=</span> <span class="fu">as.numeric</span>(content<span class="sc">$</span><span class="st">"lon"</span>),</span>
<span id="cb72-30"><a href=""></a>    <span class="st">"lat"</span> <span class="ot">=</span> <span class="fu">as.numeric</span>(content<span class="sc">$</span><span class="st">"lat"</span>)</span>
<span id="cb72-31"><a href=""></a>  )</span>
<span id="cb72-32"><a href=""></a></span>
<span id="cb72-33"><a href=""></a>  content</span>
<span id="cb72-34"><a href=""></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="code-factorisation-1" class="slide level2">
<h2>Code factorisation</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Function definition</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href=""></a>get_coords_from_location <span class="ot">&lt;-</span> <span class="cf">function</span>(city, country) {</span>
<span id="cb73-2"><a href=""></a>  </span>
<span id="cb73-3"><a href=""></a>  <span class="co"># Nominatim API endpoint ----</span></span>
<span id="cb73-4"><a href=""></a>  endpoint <span class="ot">&lt;-</span> <span class="st">"https://nominatim.openstreetmap.org/search"</span></span>
<span id="cb73-5"><a href=""></a></span>
<span id="cb73-6"><a href=""></a>  <span class="co"># Prepare the HTTP request ----</span></span>
<span id="cb73-7"><a href=""></a>  http_request <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">request</span>(endpoint)</span>
<span id="cb73-8"><a href=""></a>  </span>
<span id="cb73-9"><a href=""></a>  <span class="co"># Append request parameters ----</span></span>
<span id="cb73-10"><a href=""></a>  http_request <span class="ot">&lt;-</span> http_request <span class="sc">|&gt;</span> </span>
<span id="cb73-11"><a href=""></a>    httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">city    =</span> city) <span class="sc">|&gt;</span> </span>
<span id="cb73-12"><a href=""></a>    httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">country =</span> country) <span class="sc">|&gt;</span> </span>
<span id="cb73-13"><a href=""></a>    httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">format =</span> <span class="st">"json"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb73-14"><a href=""></a>    httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">limit  =</span> <span class="dv">1</span>)</span>
<span id="cb73-15"><a href=""></a>  </span>
<span id="cb73-16"><a href=""></a>  <span class="co"># Send HTTP request  ----</span></span>
<span id="cb73-17"><a href=""></a>  http_response <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">req_perform</span>(http_request)</span>
<span id="cb73-18"><a href=""></a>  </span>
<span id="cb73-19"><a href=""></a>  <span class="co"># Check response status ----</span></span>
<span id="cb73-20"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">resp_check_status</span>(http_response)</span>
<span id="cb73-21"><a href=""></a>  </span>
<span id="cb73-22"><a href=""></a>  <span class="co"># Parse response content ----</span></span>
<span id="cb73-23"><a href=""></a>  content <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">resp_body_json</span>(http_response)</span>
<span id="cb73-24"><a href=""></a>  </span>
<span id="cb73-25"><a href=""></a>  <span class="co"># Clean output ----</span></span>
<span id="cb73-26"><a href=""></a>  content <span class="ot">&lt;-</span> content[[<span class="dv">1</span>]]</span>
<span id="cb73-27"><a href=""></a>  content <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb73-28"><a href=""></a>    <span class="st">"name"</span> <span class="ot">=</span> content<span class="sc">$</span><span class="st">"name"</span>,</span>
<span id="cb73-29"><a href=""></a>    <span class="st">"lon"</span> <span class="ot">=</span> <span class="fu">as.numeric</span>(content<span class="sc">$</span><span class="st">"lon"</span>),</span>
<span id="cb73-30"><a href=""></a>    <span class="st">"lat"</span> <span class="ot">=</span> <span class="fu">as.numeric</span>(content<span class="sc">$</span><span class="st">"lat"</span>)</span>
<span id="cb73-31"><a href=""></a>  )</span>
<span id="cb73-32"><a href=""></a>  </span>
<span id="cb73-33"><a href=""></a>  content</span>
<span id="cb73-34"><a href=""></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Function usage</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb74"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href=""></a><span class="co"># Retrieve coordinates ----</span></span>
<span id="cb74-2"><a href=""></a><span class="fu">get_coords_from_location</span>(<span class="at">city =</span> <span class="st">"Montpellier"</span>, <span class="at">country =</span> <span class="st">"France"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>##          name      lon      lat
## 1 Montpellier 3.876734 43.61124</code></pre>
</div>
</div>
</div></div>
</section>
<section id="code-factorisation-2" class="slide level2">
<h2>Code factorisation</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Function definition</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb76"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href=""></a>get_coords_from_location <span class="ot">&lt;-</span> <span class="cf">function</span>(city, country) {</span>
<span id="cb76-2"><a href=""></a>  </span>
<span id="cb76-3"><a href=""></a>  <span class="co"># Nominatim API endpoint ----</span></span>
<span id="cb76-4"><a href=""></a>  endpoint <span class="ot">&lt;-</span> <span class="st">"https://nominatim.openstreetmap.org/search"</span></span>
<span id="cb76-5"><a href=""></a></span>
<span id="cb76-6"><a href=""></a>  <span class="co"># Prepare the HTTP request ----</span></span>
<span id="cb76-7"><a href=""></a>  http_request <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">request</span>(endpoint)</span>
<span id="cb76-8"><a href=""></a>  </span>
<span id="cb76-9"><a href=""></a>  <span class="co"># Append request parameters ----</span></span>
<span id="cb76-10"><a href=""></a>  http_request <span class="ot">&lt;-</span> http_request <span class="sc">|&gt;</span> </span>
<span id="cb76-11"><a href=""></a>    httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">city    =</span> city) <span class="sc">|&gt;</span> </span>
<span id="cb76-12"><a href=""></a>    httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">country =</span> country) <span class="sc">|&gt;</span> </span>
<span id="cb76-13"><a href=""></a>    httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">format =</span> <span class="st">"json"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb76-14"><a href=""></a>    httr2<span class="sc">::</span><span class="fu">req_url_query</span>(<span class="at">limit  =</span> <span class="dv">1</span>)</span>
<span id="cb76-15"><a href=""></a>  </span>
<span id="cb76-16"><a href=""></a>  <span class="co"># Send HTTP request  ----</span></span>
<span id="cb76-17"><a href=""></a>  http_response <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">req_perform</span>(http_request)</span>
<span id="cb76-18"><a href=""></a>  </span>
<span id="cb76-19"><a href=""></a>  <span class="co"># Check response status ----</span></span>
<span id="cb76-20"><a href=""></a>  httr2<span class="sc">::</span><span class="fu">resp_check_status</span>(http_response)</span>
<span id="cb76-21"><a href=""></a>  </span>
<span id="cb76-22"><a href=""></a>  <span class="co"># Parse response content ----</span></span>
<span id="cb76-23"><a href=""></a>  content <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">resp_body_json</span>(http_response)</span>
<span id="cb76-24"><a href=""></a>  </span>
<span id="cb76-25"><a href=""></a>  <span class="co"># Clean output ----</span></span>
<span id="cb76-26"><a href=""></a>  content <span class="ot">&lt;-</span> content[[<span class="dv">1</span>]]</span>
<span id="cb76-27"><a href=""></a>  content <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb76-28"><a href=""></a>    <span class="st">"name"</span> <span class="ot">=</span> content<span class="sc">$</span><span class="st">"name"</span>,</span>
<span id="cb76-29"><a href=""></a>    <span class="st">"lon"</span> <span class="ot">=</span> <span class="fu">as.numeric</span>(content<span class="sc">$</span><span class="st">"lon"</span>),</span>
<span id="cb76-30"><a href=""></a>    <span class="st">"lat"</span> <span class="ot">=</span> <span class="fu">as.numeric</span>(content<span class="sc">$</span><span class="st">"lat"</span>)</span>
<span id="cb76-31"><a href=""></a>  )</span>
<span id="cb76-32"><a href=""></a>  </span>
<span id="cb76-33"><a href=""></a>  content</span>
<span id="cb76-34"><a href=""></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Function usage</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href=""></a><span class="co"># Retrieve coordinates ----</span></span>
<span id="cb77-2"><a href=""></a><span class="fu">get_coords_from_location</span>(<span class="at">city =</span> <span class="st">"Montpellier"</span>, <span class="at">country =</span> <span class="st">"France"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>##          name      lon      lat
## 1 Montpellier 3.876734 43.61124</code></pre>
</div>
</div>
<p><br></p>
<p><strong>Automation</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href=""></a><span class="co"># List of cities ----</span></span>
<span id="cb79-2"><a href=""></a>cities <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Montpellier"</span>, <span class="st">"Paris"</span>, <span class="st">"Strasbourg"</span>, <span class="st">"Grenoble"</span>, <span class="st">"Bourges"</span>)</span>
<span id="cb79-3"><a href=""></a></span>
<span id="cb79-4"><a href=""></a><span class="co"># Retrieve coordinates ----</span></span>
<span id="cb79-5"><a href=""></a>coords <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb79-6"><a href=""></a></span>
<span id="cb79-7"><a href=""></a><span class="cf">for</span> (city <span class="cf">in</span> cities) {</span>
<span id="cb79-8"><a href=""></a>  coord <span class="ot">&lt;-</span> <span class="fu">get_coords_from_location</span>(<span class="at">city =</span> city, <span class="at">country =</span> <span class="st">"France"</span>)</span>
<span id="cb79-9"><a href=""></a>  coords <span class="ot">&lt;-</span> <span class="fu">rbind</span>(coords, coord)</span>
<span id="cb79-10"><a href=""></a>}</span>
<span id="cb79-11"><a href=""></a></span>
<span id="cb79-12"><a href=""></a>coords</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>##          name      lon      lat
## 1 Montpellier 3.876734 43.61124
## 2       Paris 2.348391 48.85350
## 3  Strasbourg 7.750713 48.58461
## 4    Grenoble 5.735782 45.18756
## 5     Bourges 2.399125 47.08117</code></pre>
</div>
</div>
</div></div>
<!-- Insert section 'Exercise' -->
</section></section>
<section>
<section id="exercise-40-min" class="title-slide slide level1 center">
<h1><i class="fa-solid fa-user-clock fa-1x" aria-label="user-clock"></i> &nbsp;&nbsp;Exercise (40 min)</h1>

</section>
<section id="exercise---accessing-data" class="slide level2">
<h2>Exercise - Accessing data</h2>
<p><strong>Part 1</strong>: Download the <a href="https://esajournals.onlinelibrary.wiley.com/doi/10.1890/08-1494.1">PanTHERIA database</a>, a species-level database of life history, ecology, and geography of extant and recently extinct mammals available <a href="https://esapubs.org/archive/ecol/E090/184/PanTHERIA_1-0_WR05_Aug2008.txt">here</a>.</p>
<p><i class="fa-solid fa-lightbulb" aria-label="lightbulb"></i> &nbsp; Use the function <a href="https://rdrr.io/r/utils/download.file.html"><code>download.file()</code></a> to download the dataset</p>
<p><br></p>
<p><strong>Part 2</strong>: Download <a href="https://www.gbif.org/">GBIF</a> occurrences for two bat species endemic to the islands of New Zealand:</p>
<ul>
<li><p><em>Mystacina tuberculata</em> (New Zealand lesser short-tailed bat) &nbsp;<a href="https://en.wikipedia.org/wiki/New_Zealand_lesser_short-tailed_bat"><i class="fa-brands fa-wikipedia-w" aria-label="wikipedia-w"></i></a></p></li>
<li><p><em>Chalinolobus tuberculatus</em> (New Zealand long-tailed bat) &nbsp;<a href="https://en.wikipedia.org/wiki/New_Zealand_long-tailed_bat"><i class="fa-brands fa-wikipedia-w" aria-label="wikipedia-w"></i></a></p>
<p><i class="fa-solid fa-lightbulb" aria-label="lightbulb"></i> &nbsp; Use the function <a href="https://docs.ropensci.org/rgbif/reference/occ_search.html"><code>rgbif::occ_search()</code></a> to download species occurrences<br> <i class="fa-solid fa-triangle-exclamation" aria-label="triangle-exclamation"></i> &nbsp; Do not forget to <strong>export the data</strong></p></li>
</ul>
<p><br></p>
<p><strong>Bonus A</strong>: Download New Zealand boundaries from <a href="https://gadm.org/">GADM</a> (<strong>GeoJSON Level 0</strong>).</p>
<p><i class="fa-solid fa-lightbulb" aria-label="lightbulb"></i> &nbsp; Use the function <a href="https://rdrr.io/r/utils/download.file.html"><code>download.file()</code></a></p>
<p><br></p>
<p><strong>Bonus B</strong>: Plot a New Zealand map with GBIF occurrences.</p>
<p><i class="fa-solid fa-lightbulb" aria-label="lightbulb"></i> &nbsp; Use the packages <a href="https://r-spatial.github.io/sf/"><code>sf</code></a> and <a href="https://ggplot2.tidyverse.org/"><code>ggplot2</code></a></p>
</section></section>
<section>
<section id="section" class="title-slide slide level1 center">
<h1></h1>

</section>
<section id="correction" class="slide level2">
<h2>Correction</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Part 1</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb81"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href=""></a><span class="do">## Download PanTHERIA database ----</span></span>
<span id="cb81-2"><a href=""></a></span>
<span id="cb81-3"><a href=""></a>esa_url  <span class="ot">&lt;-</span> <span class="st">"https://esapubs.org/archive/ecol/E090/184/"</span></span>
<span id="cb81-4"><a href=""></a>filename <span class="ot">&lt;-</span> <span class="st">"PanTHERIA_1-0_WR05_Aug2008.txt"</span></span>
<span id="cb81-5"><a href=""></a></span>
<span id="cb81-6"><a href=""></a><span class="fu">download.file</span>(</span>
<span id="cb81-7"><a href=""></a>  <span class="at">url =</span> <span class="fu">paste0</span>(esa_url, filename), </span>
<span id="cb81-8"><a href=""></a>  <span class="at">destfile =</span> filename,</span>
<span id="cb81-9"><a href=""></a>  <span class="at">mode =</span> <span class="st">"wb"</span></span>
<span id="cb81-10"><a href=""></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Part 2</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb82"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href=""></a><span class="do">## Species names ----</span></span>
<span id="cb82-2"><a href=""></a></span>
<span id="cb82-3"><a href=""></a>species_names <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb82-4"><a href=""></a>  <span class="st">"Mystacina tuberculata"</span>, </span>
<span id="cb82-5"><a href=""></a>  <span class="st">"Chalinolobus tuberculatus"</span></span>
<span id="cb82-6"><a href=""></a>)</span>
<span id="cb82-7"><a href=""></a></span>
<span id="cb82-8"><a href=""></a><span class="do">## Download GBIF occurrences ----</span></span>
<span id="cb82-9"><a href=""></a></span>
<span id="cb82-10"><a href=""></a>occ <span class="ot">&lt;-</span> rgbif<span class="sc">::</span><span class="fu">occ_search</span>(</span>
<span id="cb82-11"><a href=""></a>  <span class="at">scientificName =</span> species_names, </span>
<span id="cb82-12"><a href=""></a>  <span class="at">fields =</span> <span class="st">"minimal"</span>,</span>
<span id="cb82-13"><a href=""></a>  <span class="at">hasCoordinate =</span> <span class="cn">TRUE</span>,</span>
<span id="cb82-14"><a href=""></a>  <span class="at">hasGeospatialIssue =</span> <span class="cn">FALSE</span></span>
<span id="cb82-15"><a href=""></a>)</span>
<span id="cb82-16"><a href=""></a></span>
<span id="cb82-17"><a href=""></a><span class="do">## Append occurrences -----</span></span>
<span id="cb82-18"><a href=""></a></span>
<span id="cb82-19"><a href=""></a>occ <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb82-20"><a href=""></a>  occ<span class="sc">$</span><span class="st">`</span><span class="at">Mystacina tuberculata</span><span class="st">`</span><span class="sc">$</span><span class="st">"data"</span>,</span>
<span id="cb82-21"><a href=""></a>  occ<span class="sc">$</span><span class="st">`</span><span class="at">Chalinolobus tuberculatus</span><span class="st">`</span><span class="sc">$</span><span class="st">"data"</span></span>
<span id="cb82-22"><a href=""></a>)</span>
<span id="cb82-23"><a href=""></a></span>
<span id="cb82-24"><a href=""></a><span class="do">## Export occurrences ----</span></span>
<span id="cb82-25"><a href=""></a></span>
<span id="cb82-26"><a href=""></a><span class="fu">write.csv</span>(</span>
<span id="cb82-27"><a href=""></a>  <span class="at">x =</span> occ,</span>
<span id="cb82-28"><a href=""></a>  <span class="at">file =</span> <span class="st">"gbif_occurrences.csv"</span>,</span>
<span id="cb82-29"><a href=""></a>  <span class="at">row.names =</span> <span class="cn">FALSE</span></span>
<span id="cb82-30"><a href=""></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div></div>
</section>
<section id="correction-1" class="slide level2">
<h2>Correction</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Bonus A</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href=""></a><span class="do">## Download administrative boundaries of NZL ----</span></span>
<span id="cb83-2"><a href=""></a></span>
<span id="cb83-3"><a href=""></a>gadm_url <span class="ot">&lt;-</span> <span class="st">"https://geodata.ucdavis.edu/gadm/gadm4.1/json/"</span></span>
<span id="cb83-4"><a href=""></a>filename <span class="ot">&lt;-</span> <span class="st">"gadm41_NZL_0.json"</span></span>
<span id="cb83-5"><a href=""></a></span>
<span id="cb83-6"><a href=""></a><span class="fu">download.file</span>(</span>
<span id="cb83-7"><a href=""></a>  <span class="at">url  =</span> <span class="fu">paste0</span>(gadm_url, filename), </span>
<span id="cb83-8"><a href=""></a>  <span class="at">destfile =</span> filename,</span>
<span id="cb83-9"><a href=""></a>  <span class="at">mode =</span> <span class="st">"wb"</span></span>
<span id="cb83-10"><a href=""></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column center" style="width:50%;">

</div></div>
</section>
<section id="correction-2" class="slide level2">
<h2>Correction</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Bonus B</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb84"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href=""></a><span class="do">## Import NZL shapefile ----</span></span>
<span id="cb84-2"><a href=""></a></span>
<span id="cb84-3"><a href=""></a>nzl <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_read</span>(<span class="st">"gadm41_NZL_0.json"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb84-4"><a href=""></a>  sf<span class="sc">::</span><span class="fu">st_transform</span>(<span class="at">crs =</span> <span class="dv">27200</span>)</span>
<span id="cb84-5"><a href=""></a></span>
<span id="cb84-6"><a href=""></a></span>
<span id="cb84-7"><a href=""></a><span class="do">## Convert occurrences into sf object ----</span></span>
<span id="cb84-8"><a href=""></a></span>
<span id="cb84-9"><a href=""></a>occ_sf <span class="ot">&lt;-</span> occ <span class="sc">|&gt;</span> </span>
<span id="cb84-10"><a href=""></a>  sf<span class="sc">::</span><span class="fu">st_as_sf</span>(</span>
<span id="cb84-11"><a href=""></a>    <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">"decimalLongitude"</span>, <span class="st">"decimalLatitude"</span>),</span>
<span id="cb84-12"><a href=""></a>    <span class="at">crs =</span> <span class="dv">4326</span></span>
<span id="cb84-13"><a href=""></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb84-14"><a href=""></a>  sf<span class="sc">::</span><span class="fu">st_transform</span>(<span class="at">crs =</span> <span class="dv">27200</span>)</span>
<span id="cb84-15"><a href=""></a></span>
<span id="cb84-16"><a href=""></a></span>
<span id="cb84-17"><a href=""></a><span class="do">## Map occurrences ----</span></span>
<span id="cb84-18"><a href=""></a></span>
<span id="cb84-19"><a href=""></a><span class="fu">library</span>(<span class="st">"ggplot2"</span>)</span>
<span id="cb84-20"><a href=""></a></span>
<span id="cb84-21"><a href=""></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb84-22"><a href=""></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> nzl) <span class="sc">+</span></span>
<span id="cb84-23"><a href=""></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> occ_sf, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> scientificName)) <span class="sc">+</span></span>
<span id="cb84-24"><a href=""></a>  <span class="fu">theme_bw</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column center" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/ggplot-map.png" class="quarto-figure quarto-figure-center" style="width:90.0%"></p>
</figure>
</div>
</div></div>
<!-- Insert section 'Web scraping' -->
</section></section>
<section>
<section id="web-scraping" class="title-slide slide level1 center">
<h1><i class="fa-brands fa-css3 fa-1x" aria-label="css3"></i> &nbsp;&nbsp;Web scraping</h1>

</section>
<section id="what-is-web-scraping" class="slide level2">
<h2>What is web scraping?</h2>
<ul>
<li>A method to automatically extract data from web pages</li>
<li>Converts unstructured web content into structured data</li>
<li>Also known as <strong><em>screen scraping</em></strong></li>
</ul>
<p><br></p>
<div class="fragment">
<blockquote>
<p><i class="fa-solid fa-triangle-exclamation" aria-label="triangle-exclamation"></i> &nbsp;If available, you should use API: it will give you more reliable data.</p>
</blockquote>
</div>
<div class="fragment">
<p><br></p>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;<strong>What is a web page?</strong></p>
</div>
<div class="fragment">
<p><br><br></p>
<div class="columns">
<div class="column center" style="width:33%;">
<p><i class="fa-brands fa-html5 fa-2x" aria-label="html5"></i> <strong>HTML</strong> <br></p>
<p>Content structuration</p>
</div><div class="column center" style="width:33%;">
<p><i class="fa-brands fa-css3-alt fa-2x" aria-label="css3-alt"></i> <strong>CSS</strong> <br></p>
<p>Formatting</p>
</div><div class="column center" style="width:33%;">
<p><i class="fa-brands fa-js fa-2x" aria-label="js"></i> <strong>JavaScript</strong> <br></p>
<p>Dynamism &amp; interactivity</p>
</div></div>
</div>
</section>
<section id="html-basics" class="slide level2">
<h2>HTML basics</h2>
<p>A web page is described and structured by the <strong>HTML</strong> language (<strong>H</strong>yper<strong>T</strong>ext <strong>M</strong>arkup <strong>L</strong>anguage)</p>
<p><br></p>
<div class="columns">
<div class="column" style="width:45%;">
<p><strong>HTML code</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb85"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb85-1"><a href=""></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb85-2"><a href=""></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb85-3"><a href=""></a>  </span>
<span id="cb85-4"><a href=""></a>  ...</span>
<span id="cb85-5"><a href=""></a>      </span>
<span id="cb85-6"><a href=""></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:45%;">
<p><br></p>
<p>An HTML page has always this structure</p>
</div></div>
</section>
<section id="html-basics-1" class="slide level2">
<h2>HTML basics</h2>
<p>A web page is described and structured by the <strong>HTML</strong> language (<strong>H</strong>yper<strong>T</strong>ext <strong>M</strong>arkup <strong>L</strong>anguage)</p>
<p><br></p>
<div class="columns">
<div class="column" style="width:45%;">
<p><strong>HTML code</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb86"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb86-1"><a href=""></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb86-2"><a href=""></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb86-3"><a href=""></a>  </span>
<span id="cb86-4"><a href=""></a>  <span class="co">&lt;!-- Document metadata --&gt;</span></span>
<span id="cb86-5"><a href=""></a>  <span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb86-6"><a href=""></a>    ...</span>
<span id="cb86-7"><a href=""></a>  <span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb86-8"><a href=""></a>  </span>
<span id="cb86-9"><a href=""></a>  <span class="co">&lt;!-- Document content --&gt;</span></span>
<span id="cb86-10"><a href=""></a>  <span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb86-11"><a href=""></a>    ...</span>
<span id="cb86-12"><a href=""></a>  <span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb86-13"><a href=""></a>      </span>
<span id="cb86-14"><a href=""></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:45%;">
<p><br></p>
<p>The tag <code>&lt;html&gt;</code> contains two children:</p>
<ul>
<li><code>&lt;head&gt;</code> contains page metadata</li>
<li><code>&lt;body&gt;</code> contains page content</li>
</ul>
</div></div>
</section>
<section id="html-basics-2" class="slide level2">
<h2>HTML basics</h2>
<p>A web page is described and structured by the <strong>HTML</strong> language (<strong>H</strong>yper<strong>T</strong>ext <strong>M</strong>arkup <strong>L</strong>anguage)</p>
<p><br></p>
<div class="columns">
<div class="column" style="width:45%;">
<p><strong>HTML code</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb87"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb87-1"><a href=""></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb87-2"><a href=""></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb87-3"><a href=""></a>  </span>
<span id="cb87-4"><a href=""></a>  <span class="co">&lt;!-- Document metadata --&gt;</span></span>
<span id="cb87-5"><a href=""></a>  <span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb87-6"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">meta</span><span class="ot"> charset</span><span class="op">=</span><span class="st">"UTF-8"</span><span class="dt">&gt;</span></span>
<span id="cb87-7"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Page title<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb87-8"><a href=""></a>  <span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb87-9"><a href=""></a>  </span>
<span id="cb87-10"><a href=""></a>  <span class="co">&lt;!-- Document content --&gt;</span></span>
<span id="cb87-11"><a href=""></a>  <span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb87-12"><a href=""></a>    ...</span>
<span id="cb87-13"><a href=""></a>  <span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb87-14"><a href=""></a>      </span>
<span id="cb87-15"><a href=""></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:45%;">
<p><br></p>
<p>The tag <code>&lt;head&gt;</code> can contain different metadata:</p>
<ul>
<li><code>&lt;title&gt;</code> contains the page title</li>
<li><code>&lt;meta&gt;</code> is used to specify the encoding, authors, keywords, etc.</li>
<li><code>&lt;link&gt;</code> is used to call external resources</li>
</ul>
<p><strong>N.B.</strong> This section is not necessary interesting for web scraping</p>
</div></div>
</section>
<section id="html-basics-3" class="slide level2">
<h2>HTML basics</h2>
<p>A web page is described and structured by the <strong>HTML</strong> language (<strong>H</strong>yper<strong>T</strong>ext <strong>M</strong>arkup <strong>L</strong>anguage)</p>
<p><br></p>
<div class="columns">
<div class="column" style="width:45%;">
<p><strong>HTML code</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb88"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb88-1"><a href=""></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb88-2"><a href=""></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb88-3"><a href=""></a>  </span>
<span id="cb88-4"><a href=""></a>  <span class="co">&lt;!-- Document metadata --&gt;</span></span>
<span id="cb88-5"><a href=""></a>  <span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb88-6"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">meta</span><span class="ot"> charset</span><span class="op">=</span><span class="st">"UTF-8"</span><span class="dt">&gt;</span></span>
<span id="cb88-7"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Page title<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb88-8"><a href=""></a>  <span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb88-9"><a href=""></a>  </span>
<span id="cb88-10"><a href=""></a>  <span class="co">&lt;!-- Document content --&gt;</span></span>
<span id="cb88-11"><a href=""></a>  <span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb88-12"><a href=""></a>  </span>
<span id="cb88-13"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">h1</span><span class="ot"> id</span><span class="op">=</span><span class="st">'section-1'</span><span class="dt">&gt;</span>Header A<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<span id="cb88-14"><a href=""></a>    </span>
<span id="cb88-15"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="ot"> class</span><span class="op">=</span><span class="st">'my-class'</span><span class="dt">&gt;</span>A paragraph with <span class="dt">&lt;</span><span class="kw">b</span><span class="dt">&gt;</span>bold text<span class="dt">&lt;/</span><span class="kw">b</span><span class="dt">&gt;</span>.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb88-16"><a href=""></a>    </span>
<span id="cb88-17"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb88-18"><a href=""></a>      A second paragraph with a </span>
<span id="cb88-19"><a href=""></a>      <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">'https://google.com'</span><span class="dt">&gt;</span>link<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span>.</span>
<span id="cb88-20"><a href=""></a>    <span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb88-21"><a href=""></a>    </span>
<span id="cb88-22"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">img</span><span class="ot"> src</span><span class="op">=</span><span class="st">'images/my-img.png'</span><span class="ot"> width</span><span class="op">=</span><span class="st">'150'</span><span class="ot"> height</span><span class="op">=</span><span class="st">'150'</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb88-23"><a href=""></a>    </span>
<span id="cb88-24"><a href=""></a>  <span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb88-25"><a href=""></a>      </span>
<span id="cb88-26"><a href=""></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:45%;">

</div></div>
</section>
<section id="html-basics-4" class="slide level2">
<h2>HTML basics</h2>
<p>A web page is described and structured by the <strong>HTML</strong> language (<strong>H</strong>yper<strong>T</strong>ext <strong>M</strong>arkup <strong>L</strong>anguage)</p>
<p><br></p>
<div class="columns">
<div class="column" style="width:45%;">
<p><strong>HTML code</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb89"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb89-1"><a href=""></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb89-2"><a href=""></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb89-3"><a href=""></a>  </span>
<span id="cb89-4"><a href=""></a>  <span class="co">&lt;!-- Document metadata --&gt;</span></span>
<span id="cb89-5"><a href=""></a>  <span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb89-6"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">meta</span><span class="ot"> charset</span><span class="op">=</span><span class="st">"UTF-8"</span><span class="dt">&gt;</span></span>
<span id="cb89-7"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Page title<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb89-8"><a href=""></a>  <span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb89-9"><a href=""></a>  </span>
<span id="cb89-10"><a href=""></a>  <span class="co">&lt;!-- Document content --&gt;</span></span>
<span id="cb89-11"><a href=""></a>  <span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb89-12"><a href=""></a>  </span>
<span id="cb89-13"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">h1</span><span class="ot"> id</span><span class="op">=</span><span class="st">'section-1'</span><span class="dt">&gt;</span>Header A<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<span id="cb89-14"><a href=""></a>    </span>
<span id="cb89-15"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="ot"> class</span><span class="op">=</span><span class="st">'my-class'</span><span class="dt">&gt;</span>A paragraph with <span class="dt">&lt;</span><span class="kw">b</span><span class="dt">&gt;</span>bold text<span class="dt">&lt;/</span><span class="kw">b</span><span class="dt">&gt;</span>.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb89-16"><a href=""></a>    </span>
<span id="cb89-17"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb89-18"><a href=""></a>      A second paragraph with a </span>
<span id="cb89-19"><a href=""></a>      <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">'https://google.com'</span><span class="dt">&gt;</span>link<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span>.</span>
<span id="cb89-20"><a href=""></a>    <span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb89-21"><a href=""></a>    </span>
<span id="cb89-22"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">img</span><span class="ot"> src</span><span class="op">=</span><span class="st">'images/my-img.png'</span><span class="ot"> width</span><span class="op">=</span><span class="st">'150'</span><span class="ot"> height</span><span class="op">=</span><span class="st">'150'</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb89-23"><a href=""></a>    </span>
<span id="cb89-24"><a href=""></a>  <span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb89-25"><a href=""></a>      </span>
<span id="cb89-26"><a href=""></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:45%;">
<p><br></p>
<ul>
<li>Except for some elements (<code>&lt;img /&gt;</code>), all HTML tags are <strong>double</strong>.</li>
<li>Some elements are <strong>block</strong> tags (<code>&lt;h1&gt;</code>, <code>&lt;p&gt;</code>, etc.), other are <strong>inline</strong> tags (<code>&lt;b&gt;</code>, <code>&lt;a&gt;</code>, etc.)</li>
<li>Some elements can have <strong>attributes</strong>: <code>id</code>, <code>class</code>, <code>href</code>, <code>src</code>, etc.</li>
</ul>
<p><br></p>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Web scraping consists in detecting HTML elements by the <code>tag</code>, <code>class</code> or the <code>id</code> (unique) to extract contents or attributes (<code>href</code>, <code>src</code>, etc.).</p>
</div></div>
</section>
<section id="the-rvest-package" class="slide level2">
<h2>The rvest package</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="images/rvest-screenshot.png"></p>
<p><br></p>
<p>Available at: <a href="https://rvest.tidyverse.org/" class="uri">https://rvest.tidyverse.org/</a></p>
</div><div class="column" style="width:50%;">
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb90"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href=""></a><span class="co"># Install 'rvest' package ----</span></span>
<span id="cb90-2"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"rvest"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><br></p>
<table class="caption-top">
<caption>Table: Main functions of <code>rvest</code></caption>
<thead>
<tr class="header">
<th style="text-align: left;">Function</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>read_html()</code></td>
<td style="text-align: left;">Read and parse HTML content</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>html_element()</code></td>
<td style="text-align: left;">Extract an HTML element(s)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>html_attr()</code></td>
<td style="text-align: left;">Extract an HTML attribute(s)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>html_text2()</code></td>
<td style="text-align: left;">Extract the content of element(s)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>html_table()</code></td>
<td style="text-align: left;">Extract a table &amp; convert into a <code>data.frame</code></td>
</tr>
</tbody>
</table>
</div></div>
</section>
<section id="scrap-a-table" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>0. Install additional packages</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb91"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href=""></a><span class="co"># 'janitor' to clean dirty data ----</span></span>
<span id="cb91-2"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"janitor"</span>)</span>
<span id="cb91-3"><a href=""></a></span>
<span id="cb91-4"><a href=""></a><span class="co"># 'dplyr' to handle data ----</span></span>
<span id="cb91-5"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="scrap-a-table-1" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>0. Install additional packages</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb92"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href=""></a><span class="co"># 'janitor' to clean dirty data ----</span></span>
<span id="cb92-2"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"janitor"</span>)</span>
<span id="cb92-3"><a href=""></a></span>
<span id="cb92-4"><a href=""></a><span class="co"># 'dplyr' to handle data ----</span></span>
<span id="cb92-5"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><br></p>
<p><strong>1. Build the HTTP request</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb93"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href=""></a><span class="co"># Wikipedia URL ----</span></span>
<span id="cb93-2"><a href=""></a>base_url <span class="ot">&lt;-</span> <span class="st">"https://fr.wikipedia.org"</span></span>
<span id="cb93-3"><a href=""></a></span>
<span id="cb93-4"><a href=""></a><span class="co"># Page URL ----</span></span>
<span id="cb93-5"><a href=""></a>page_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(base_url,</span>
<span id="cb93-6"><a href=""></a>                   <span class="st">"/wiki/"</span>,</span>
<span id="cb93-7"><a href=""></a>                   <span class="st">"Liste_des_communes_de_France_les_plus_peuplées"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code>https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peuplées</code></pre>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="scrap-a-table-2" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>0. Install additional packages</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb95"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href=""></a><span class="co"># 'janitor' to clean dirty data ----</span></span>
<span id="cb95-2"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"janitor"</span>)</span>
<span id="cb95-3"><a href=""></a></span>
<span id="cb95-4"><a href=""></a><span class="co"># 'dplyr' to handle data ----</span></span>
<span id="cb95-5"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><br></p>
<p><strong>1. Build the HTTP request</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb96"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href=""></a><span class="co"># Wikipedia URL ----</span></span>
<span id="cb96-2"><a href=""></a>base_url <span class="ot">&lt;-</span> <span class="st">"https://fr.wikipedia.org"</span></span>
<span id="cb96-3"><a href=""></a></span>
<span id="cb96-4"><a href=""></a><span class="co"># Page URL ----</span></span>
<span id="cb96-5"><a href=""></a>page_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(base_url,</span>
<span id="cb96-6"><a href=""></a>                   <span class="st">"/wiki/"</span>,</span>
<span id="cb96-7"><a href=""></a>                   <span class="st">"Liste_des_communes_de_France_les_plus_peuplées"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code>https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peuplées</code></pre>
<p><br></p>
<p><strong>2. Scrap the HTML page</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb98"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href=""></a><span class="co"># Scrap web page ----</span></span>
<span id="cb98-2"><a href=""></a>content <span class="ot">&lt;-</span> rvest<span class="sc">::</span><span class="fu">read_html</span>(page_url)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code>{html_document}</code></pre>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="scrap-a-table-3" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>0. Install additional packages</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb100"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href=""></a><span class="co"># 'janitor' to clean dirty data ----</span></span>
<span id="cb100-2"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"janitor"</span>)</span>
<span id="cb100-3"><a href=""></a></span>
<span id="cb100-4"><a href=""></a><span class="co"># 'dplyr' to handle data ----</span></span>
<span id="cb100-5"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><br></p>
<p><strong>1. Build the HTTP request</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb101"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href=""></a><span class="co"># Wikipedia URL ----</span></span>
<span id="cb101-2"><a href=""></a>base_url <span class="ot">&lt;-</span> <span class="st">"https://fr.wikipedia.org"</span></span>
<span id="cb101-3"><a href=""></a></span>
<span id="cb101-4"><a href=""></a><span class="co"># Page URL ----</span></span>
<span id="cb101-5"><a href=""></a>page_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(base_url,</span>
<span id="cb101-6"><a href=""></a>                   <span class="st">"/wiki/"</span>,</span>
<span id="cb101-7"><a href=""></a>                   <span class="st">"Liste_des_communes_de_France_les_plus_peuplées"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code>https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peuplées</code></pre>
<p><br></p>
<p><strong>2. Scrap the HTML page</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb103"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href=""></a><span class="co"># Scrap web page ----</span></span>
<span id="cb103-2"><a href=""></a>content <span class="ot">&lt;-</span> rvest<span class="sc">::</span><span class="fu">read_html</span>(page_url)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code>{html_document}</code></pre>
</div><div class="column" style="width:50%;">
<p><strong>3. Extract HTML tables</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb105"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href=""></a><span class="co"># Scrap web page ----</span></span>
<span id="cb105-2"><a href=""></a>tables <span class="ot">&lt;-</span> rvest<span class="sc">::</span><span class="fu">html_table</span>(content)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div></div>
</section>
<section id="scrap-a-table-4" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>0. Install additional packages</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb106"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href=""></a><span class="co"># 'janitor' to clean dirty data ----</span></span>
<span id="cb106-2"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"janitor"</span>)</span>
<span id="cb106-3"><a href=""></a></span>
<span id="cb106-4"><a href=""></a><span class="co"># 'dplyr' to handle data ----</span></span>
<span id="cb106-5"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><br></p>
<p><strong>1. Build the HTTP request</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb107"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href=""></a><span class="co"># Wikipedia URL ----</span></span>
<span id="cb107-2"><a href=""></a>base_url <span class="ot">&lt;-</span> <span class="st">"https://fr.wikipedia.org"</span></span>
<span id="cb107-3"><a href=""></a></span>
<span id="cb107-4"><a href=""></a><span class="co"># Page URL ----</span></span>
<span id="cb107-5"><a href=""></a>page_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(base_url,</span>
<span id="cb107-6"><a href=""></a>                   <span class="st">"/wiki/"</span>,</span>
<span id="cb107-7"><a href=""></a>                   <span class="st">"Liste_des_communes_de_France_les_plus_peuplées"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code>https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peuplées</code></pre>
<p><br></p>
<p><strong>2. Scrap the HTML page</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb109"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href=""></a><span class="co"># Scrap web page ----</span></span>
<span id="cb109-2"><a href=""></a>content <span class="ot">&lt;-</span> rvest<span class="sc">::</span><span class="fu">read_html</span>(page_url)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code>{html_document}</code></pre>
</div><div class="column" style="width:50%;">
<p><strong>3. Extract HTML tables</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb111"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href=""></a><span class="co"># Scrap web page ----</span></span>
<span id="cb111-2"><a href=""></a>tables <span class="ot">&lt;-</span> rvest<span class="sc">::</span><span class="fu">html_table</span>(content)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb112"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href=""></a><span class="co"># Type of output ----</span></span>
<span id="cb112-2"><a href=""></a><span class="fu">class</span>(tables)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "list"</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb114"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href=""></a><span class="co"># Element length ----</span></span>
<span id="cb114-2"><a href=""></a><span class="fu">length</span>(tables)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] 7</code></pre>
</div>
</div>
</div></div>
</section>
<section id="scrap-a-table-5" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>0. Install additional packages</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb116"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href=""></a><span class="co"># 'janitor' to clean dirty data ----</span></span>
<span id="cb116-2"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"janitor"</span>)</span>
<span id="cb116-3"><a href=""></a></span>
<span id="cb116-4"><a href=""></a><span class="co"># 'dplyr' to handle data ----</span></span>
<span id="cb116-5"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><br></p>
<p><strong>1. Build the HTTP request</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb117"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href=""></a><span class="co"># Wikipedia URL ----</span></span>
<span id="cb117-2"><a href=""></a>base_url <span class="ot">&lt;-</span> <span class="st">"https://fr.wikipedia.org"</span></span>
<span id="cb117-3"><a href=""></a></span>
<span id="cb117-4"><a href=""></a><span class="co"># Page URL ----</span></span>
<span id="cb117-5"><a href=""></a>page_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(base_url,</span>
<span id="cb117-6"><a href=""></a>                   <span class="st">"/wiki/"</span>,</span>
<span id="cb117-7"><a href=""></a>                   <span class="st">"Liste_des_communes_de_France_les_plus_peuplées"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code>https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peuplées</code></pre>
<p><br></p>
<p><strong>2. Scrap the HTML page</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb119"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href=""></a><span class="co"># Scrap web page ----</span></span>
<span id="cb119-2"><a href=""></a>content <span class="ot">&lt;-</span> rvest<span class="sc">::</span><span class="fu">read_html</span>(page_url)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<pre><code>{html_document}</code></pre>
</div><div class="column" style="width:50%;">
<p><strong>3. Extract HTML tables</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb121"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href=""></a><span class="co"># Scrap web page ----</span></span>
<span id="cb121-2"><a href=""></a>tables <span class="ot">&lt;-</span> rvest<span class="sc">::</span><span class="fu">html_table</span>(content)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb122"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href=""></a><span class="co"># Type of output ----</span></span>
<span id="cb122-2"><a href=""></a><span class="fu">class</span>(tables)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "list"</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb124"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href=""></a><span class="co"># Element length ----</span></span>
<span id="cb124-2"><a href=""></a><span class="fu">length</span>(tables)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] 7</code></pre>
</div>
</div>
<p><br></p>
<p><strong>4. Extract the good table</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb126"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href=""></a><span class="co"># Extract second table ----</span></span>
<span id="cb126-2"><a href=""></a>datas <span class="ot">&lt;-</span> tables[[<span class="dv">2</span>]]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div></div>
</section>
<section id="scrap-a-table-6" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>5. Clean output</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb127"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href=""></a><span class="co"># Explore data ----</span></span>
<span id="cb127-2"><a href=""></a>datas</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 288 × 15
##    Rang2022 CodeInsee Commune     Département  Statut Région `Population légale`
##    &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;              
##  1 Rang2022 CodeInsee Commune     Département  Statut Région 2022[1]            
##  2 1        75056     Paris[d]    Paris[d]     Préfe… Île-d… 2&nbsp;113&nbsp;705          
##  3 2        13055     Marseille   Bouches-du-… Préfe… Prove… 877&nbsp;215            
##  4 3        69123     Lyon        Métropole d… Préfe… Auver… 520&nbsp;774            
##  5 4        31555     Toulouse    Haute-Garon… Préfe… Occit… 511&nbsp;684            
##  6 5        06088     Nice        Alpes-Marit… Préfe… Prove… 353&nbsp;701            
##  7 6        44109     Nantes      Loire-Atlan… Préfe… Pays … 325&nbsp;070            
##  8 7        34172     Montpellier Hérault      Préfe… Occit… 307&nbsp;101            
##  9 8        67482     Strasbourg  Bas-Rhin     Préfe… Grand… 291&nbsp;709            
## 10 9        33063     Bordeaux    Gironde      Préfe… Nouve… 265&nbsp;328            
## # ℹ 278 more rows
## # ℹ 8 more variables: `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;,
## #   `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;,
## #   `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;,
## #   `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="scrap-a-table-7" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>5. Clean output</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb129"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href=""></a><span class="co"># Explore data ----</span></span>
<span id="cb129-2"><a href=""></a>datas</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 288 × 15
##    Rang2022 CodeInsee Commune     Département  Statut Région `Population légale`
##    &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;              
##  1 Rang2022 CodeInsee Commune     Département  Statut Région 2022[1]            
##  2 1        75056     Paris[d]    Paris[d]     Préfe… Île-d… 2&nbsp;113&nbsp;705          
##  3 2        13055     Marseille   Bouches-du-… Préfe… Prove… 877&nbsp;215            
##  4 3        69123     Lyon        Métropole d… Préfe… Auver… 520&nbsp;774            
##  5 4        31555     Toulouse    Haute-Garon… Préfe… Occit… 511&nbsp;684            
##  6 5        06088     Nice        Alpes-Marit… Préfe… Prove… 353&nbsp;701            
##  7 6        44109     Nantes      Loire-Atlan… Préfe… Pays … 325&nbsp;070            
##  8 7        34172     Montpellier Hérault      Préfe… Occit… 307&nbsp;101            
##  9 8        67482     Strasbourg  Bas-Rhin     Préfe… Grand… 291&nbsp;709            
## 10 9        33063     Bordeaux    Gironde      Préfe… Nouve… 265&nbsp;328            
## # ℹ 278 more rows
## # ℹ 8 more variables: `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;,
## #   `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;,
## #   `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;,
## #   `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb131"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href=""></a><span class="co"># Select top 10 cities ----</span></span>
<span id="cb131-2"><a href=""></a>top10 <span class="ot">&lt;-</span> datas[<span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>, ]</span>
<span id="cb131-3"><a href=""></a></span>
<span id="cb131-4"><a href=""></a><span class="co"># Filter columns ----</span></span>
<span id="cb131-5"><a href=""></a>top10 <span class="ot">&lt;-</span> top10[ , <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">7</span>)]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="scrap-a-table-8" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>5. Clean output</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb132"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href=""></a><span class="co"># Explore data ----</span></span>
<span id="cb132-2"><a href=""></a>datas</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 288 × 15
##    Rang2022 CodeInsee Commune     Département  Statut Région `Population légale`
##    &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;              
##  1 Rang2022 CodeInsee Commune     Département  Statut Région 2022[1]            
##  2 1        75056     Paris[d]    Paris[d]     Préfe… Île-d… 2&nbsp;113&nbsp;705          
##  3 2        13055     Marseille   Bouches-du-… Préfe… Prove… 877&nbsp;215            
##  4 3        69123     Lyon        Métropole d… Préfe… Auver… 520&nbsp;774            
##  5 4        31555     Toulouse    Haute-Garon… Préfe… Occit… 511&nbsp;684            
##  6 5        06088     Nice        Alpes-Marit… Préfe… Prove… 353&nbsp;701            
##  7 6        44109     Nantes      Loire-Atlan… Préfe… Pays … 325&nbsp;070            
##  8 7        34172     Montpellier Hérault      Préfe… Occit… 307&nbsp;101            
##  9 8        67482     Strasbourg  Bas-Rhin     Préfe… Grand… 291&nbsp;709            
## 10 9        33063     Bordeaux    Gironde      Préfe… Nouve… 265&nbsp;328            
## # ℹ 278 more rows
## # ℹ 8 more variables: `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;,
## #   `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;,
## #   `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;,
## #   `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb134"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href=""></a><span class="co"># Select top 10 cities ----</span></span>
<span id="cb134-2"><a href=""></a>top10 <span class="ot">&lt;-</span> datas[<span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>, ]</span>
<span id="cb134-3"><a href=""></a></span>
<span id="cb134-4"><a href=""></a><span class="co"># Filter columns ----</span></span>
<span id="cb134-5"><a href=""></a>top10 <span class="ot">&lt;-</span> top10[ , <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">7</span>)]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column" style="width:50%;">
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb135"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href=""></a><span class="co"># Clean column names ----</span></span>
<span id="cb135-2"><a href=""></a>top10 <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(top10)</span>
<span id="cb135-3"><a href=""></a>top10</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 10 × 4
##    rang2022 commune     departement          population_legale
##    &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;                &lt;chr&gt;            
##  1 1        Paris[d]    Paris[d]             2&nbsp;113&nbsp;705        
##  2 2        Marseille   Bouches-du-Rhône     877&nbsp;215          
##  3 3        Lyon        Métropole de Lyon[e] 520&nbsp;774          
##  4 4        Toulouse    Haute-Garonne        511&nbsp;684          
##  5 5        Nice        Alpes-Maritimes      353&nbsp;701          
##  6 6        Nantes      Loire-Atlantique     325&nbsp;070          
##  7 7        Montpellier Hérault              307&nbsp;101          
##  8 8        Strasbourg  Bas-Rhin             291&nbsp;709          
##  9 9        Bordeaux    Gironde              265&nbsp;328          
## 10 10       Lille       Nord                 238&nbsp;695</code></pre>
</div>
</div>
</div></div>
</section>
<section id="scrap-a-table-9" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>5. Clean output</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb137"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href=""></a><span class="co"># Explore data ----</span></span>
<span id="cb137-2"><a href=""></a>datas</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 288 × 15
##    Rang2022 CodeInsee Commune     Département  Statut Région `Population légale`
##    &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;              
##  1 Rang2022 CodeInsee Commune     Département  Statut Région 2022[1]            
##  2 1        75056     Paris[d]    Paris[d]     Préfe… Île-d… 2&nbsp;113&nbsp;705          
##  3 2        13055     Marseille   Bouches-du-… Préfe… Prove… 877&nbsp;215            
##  4 3        69123     Lyon        Métropole d… Préfe… Auver… 520&nbsp;774            
##  5 4        31555     Toulouse    Haute-Garon… Préfe… Occit… 511&nbsp;684            
##  6 5        06088     Nice        Alpes-Marit… Préfe… Prove… 353&nbsp;701            
##  7 6        44109     Nantes      Loire-Atlan… Préfe… Pays … 325&nbsp;070            
##  8 7        34172     Montpellier Hérault      Préfe… Occit… 307&nbsp;101            
##  9 8        67482     Strasbourg  Bas-Rhin     Préfe… Grand… 291&nbsp;709            
## 10 9        33063     Bordeaux    Gironde      Préfe… Nouve… 265&nbsp;328            
## # ℹ 278 more rows
## # ℹ 8 more variables: `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;,
## #   `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;,
## #   `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;,
## #   `Population légale` &lt;chr&gt;, `Population légale` &lt;chr&gt;</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb139"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href=""></a><span class="co"># Select top 10 cities ----</span></span>
<span id="cb139-2"><a href=""></a>top10 <span class="ot">&lt;-</span> datas[<span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>, ]</span>
<span id="cb139-3"><a href=""></a></span>
<span id="cb139-4"><a href=""></a><span class="co"># Filter columns ----</span></span>
<span id="cb139-5"><a href=""></a>top10 <span class="ot">&lt;-</span> top10[ , <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">7</span>)]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column" style="width:50%;">
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb140"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href=""></a><span class="co"># Clean column names ----</span></span>
<span id="cb140-2"><a href=""></a>top10 <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(top10)</span>
<span id="cb140-3"><a href=""></a>top10</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 10 × 4
##    rang2022 commune     departement          population_legale
##    &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;                &lt;chr&gt;            
##  1 1        Paris[d]    Paris[d]             2&nbsp;113&nbsp;705        
##  2 2        Marseille   Bouches-du-Rhône     877&nbsp;215          
##  3 3        Lyon        Métropole de Lyon[e] 520&nbsp;774          
##  4 4        Toulouse    Haute-Garonne        511&nbsp;684          
##  5 5        Nice        Alpes-Maritimes      353&nbsp;701          
##  6 6        Nantes      Loire-Atlantique     325&nbsp;070          
##  7 7        Montpellier Hérault              307&nbsp;101          
##  8 8        Strasbourg  Bas-Rhin             291&nbsp;709          
##  9 9        Bordeaux    Gironde              265&nbsp;328          
## 10 10       Lille       Nord                 238&nbsp;695</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb142"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href=""></a><span class="co"># Rename specific column ----</span></span>
<span id="cb142-2"><a href=""></a>top10 <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">rename</span>(top10,</span>
<span id="cb142-3"><a href=""></a>                       <span class="at">pop2021 =</span> population_legale)</span>
<span id="cb142-4"><a href=""></a></span>
<span id="cb142-5"><a href=""></a><span class="fu">colnames</span>(top10)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "rang2022"    "commune"     "departement" "pop2021"</code></pre>
</div>
</div>
</div></div>
</section>
<section id="scrap-a-table-10" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>5. Clean output (continued)</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb144"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href=""></a><span class="co"># Explore data ----</span></span>
<span id="cb144-2"><a href=""></a>top10</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 10 × 4
##    rang2022 commune     departement          pop2021  
##    &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;                &lt;chr&gt;    
##  1 1        Paris[d]    Paris[d]             2&nbsp;113&nbsp;705
##  2 2        Marseille   Bouches-du-Rhône     877&nbsp;215  
##  3 3        Lyon        Métropole de Lyon[e] 520&nbsp;774  
##  4 4        Toulouse    Haute-Garonne        511&nbsp;684  
##  5 5        Nice        Alpes-Maritimes      353&nbsp;701  
##  6 6        Nantes      Loire-Atlantique     325&nbsp;070  
##  7 7        Montpellier Hérault              307&nbsp;101  
##  8 8        Strasbourg  Bas-Rhin             291&nbsp;709  
##  9 9        Bordeaux    Gironde              265&nbsp;328  
## 10 10       Lille       Nord                 238&nbsp;695</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="scrap-a-table-11" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>5. Clean output (continued)</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb146"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href=""></a><span class="co"># Explore data ----</span></span>
<span id="cb146-2"><a href=""></a>top10</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 10 × 4
##    rang2022 commune     departement          pop2021  
##    &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;                &lt;chr&gt;    
##  1 1        Paris[d]    Paris[d]             2&nbsp;113&nbsp;705
##  2 2        Marseille   Bouches-du-Rhône     877&nbsp;215  
##  3 3        Lyon        Métropole de Lyon[e] 520&nbsp;774  
##  4 4        Toulouse    Haute-Garonne        511&nbsp;684  
##  5 5        Nice        Alpes-Maritimes      353&nbsp;701  
##  6 6        Nantes      Loire-Atlantique     325&nbsp;070  
##  7 7        Montpellier Hérault              307&nbsp;101  
##  8 8        Strasbourg  Bas-Rhin             291&nbsp;709  
##  9 9        Bordeaux    Gironde              265&nbsp;328  
## 10 10       Lille       Nord                 238&nbsp;695</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb148"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href=""></a><span class="co"># Convert 'rang2022' to numeric ----</span></span>
<span id="cb148-2"><a href=""></a>top10<span class="sc">$</span><span class="st">"rang2022"</span> <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(top10<span class="sc">$</span><span class="st">"rang2022"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="scrap-a-table-12" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>5. Clean output (continued)</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb149"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href=""></a><span class="co"># Explore data ----</span></span>
<span id="cb149-2"><a href=""></a>top10</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 10 × 4
##    rang2022 commune     departement          pop2021  
##    &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;                &lt;chr&gt;    
##  1 1        Paris[d]    Paris[d]             2&nbsp;113&nbsp;705
##  2 2        Marseille   Bouches-du-Rhône     877&nbsp;215  
##  3 3        Lyon        Métropole de Lyon[e] 520&nbsp;774  
##  4 4        Toulouse    Haute-Garonne        511&nbsp;684  
##  5 5        Nice        Alpes-Maritimes      353&nbsp;701  
##  6 6        Nantes      Loire-Atlantique     325&nbsp;070  
##  7 7        Montpellier Hérault              307&nbsp;101  
##  8 8        Strasbourg  Bas-Rhin             291&nbsp;709  
##  9 9        Bordeaux    Gironde              265&nbsp;328  
## 10 10       Lille       Nord                 238&nbsp;695</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb151"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href=""></a><span class="co"># Convert 'rang2022' to numeric ----</span></span>
<span id="cb151-2"><a href=""></a>top10<span class="sc">$</span><span class="st">"rang2022"</span> <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(top10<span class="sc">$</span><span class="st">"rang2022"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div><div class="column" style="width:50%;">
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb152"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href=""></a><span class="co"># Remove footnotes in 'commune' ----</span></span>
<span id="cb152-2"><a href=""></a>top10<span class="sc">$</span><span class="st">"commune"</span>     <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">[[a-z]</span><span class="sc">\\</span><span class="st">]"</span>, <span class="st">""</span>, top10<span class="sc">$</span><span class="st">"commune"</span>)</span>
<span id="cb152-3"><a href=""></a></span>
<span id="cb152-4"><a href=""></a><span class="co"># Remove footnotes in 'departement' ----</span></span>
<span id="cb152-5"><a href=""></a>top10<span class="sc">$</span><span class="st">"departement"</span> <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">[[a-z]</span><span class="sc">\\</span><span class="st">]"</span>, <span class="st">""</span>, top10<span class="sc">$</span><span class="st">"departement"</span>)</span>
<span id="cb152-6"><a href=""></a></span>
<span id="cb152-7"><a href=""></a>top10</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 10 × 4
##    rang2022 commune     departement       pop2021  
##       &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;             &lt;chr&gt;    
##  1        1 Paris       Paris             2&nbsp;113&nbsp;705
##  2        2 Marseille   Bouches-du-Rhône  877&nbsp;215  
##  3        3 Lyon        Métropole de Lyon 520&nbsp;774  
##  4        4 Toulouse    Haute-Garonne     511&nbsp;684  
##  5        5 Nice        Alpes-Maritimes   353&nbsp;701  
##  6        6 Nantes      Loire-Atlantique  325&nbsp;070  
##  7        7 Montpellier Hérault           307&nbsp;101  
##  8        8 Strasbourg  Bas-Rhin          291&nbsp;709  
##  9        9 Bordeaux    Gironde           265&nbsp;328  
## 10       10 Lille       Nord              238&nbsp;695</code></pre>
</div>
</div>
</div></div>
</section>
<section id="scrap-a-table-13" class="slide level2">
<h2>Scrap a table</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Example with the <strong>Wikipedia</strong> page <a href="https://fr.wikipedia.org/wiki/Liste_des_communes_de_France_les_plus_peupl%C3%A9es">Liste des communes de France les plus peuplées</a></p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>5. Clean output (continued)</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb154"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href=""></a><span class="co"># Convert 'pop2021' to numeric ----</span></span>
<span id="cb154-2"><a href=""></a>top10<span class="sc">$</span><span class="st">"pop2021"</span> <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"&nbsp;"</span>, <span class="st">""</span>, top10<span class="sc">$</span><span class="st">"pop2021"</span>)</span>
<span id="cb154-3"><a href=""></a>top10<span class="sc">$</span><span class="st">"pop2021"</span> <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(top10<span class="sc">$</span><span class="st">"pop2021"</span>)</span>
<span id="cb154-4"><a href=""></a></span>
<span id="cb154-5"><a href=""></a>top10</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## # A tibble: 10 × 4
##    rang2022 commune     departement       pop2021
##       &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;               &lt;dbl&gt;
##  1        1 Paris       Paris             2113705
##  2        2 Marseille   Bouches-du-Rhône   877215
##  3        3 Lyon        Métropole de Lyon  520774
##  4        4 Toulouse    Haute-Garonne      511684
##  5        5 Nice        Alpes-Maritimes    353701
##  6        6 Nantes      Loire-Atlantique   325070
##  7        7 Montpellier Hérault            307101
##  8        8 Strasbourg  Bas-Rhin           291709
##  9        9 Bordeaux    Gironde            265328
## 10       10 Lille       Nord               238695</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="scrap-other-elements" class="slide level2">
<h2>Scrap other elements</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Detect HTML element by tag</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb156"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href=""></a><span class="co"># Extract content of h1 element ----</span></span>
<span id="cb156-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"h1"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb156-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Liste des communes de France les plus peuplées"</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="scrap-other-elements-1" class="slide level2">
<h2>Scrap other elements</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Detect HTML element by tag</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb158"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href=""></a><span class="co"># Extract content of h1 element ----</span></span>
<span id="cb158-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"h1"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb158-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Liste des communes de France les plus peuplées"</code></pre>
</div>
</div>
<p><br></p>
<p><strong>Detect HTML elements by tag</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb160"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href=""></a><span class="co"># Extract content of the first h2 element ----</span></span>
<span id="cb160-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"h2"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb160-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Sommaire"</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb162"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href=""></a><span class="co"># Extract content of all h2 elements ----</span></span>
<span id="cb162-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_elements</span>(content, <span class="at">css =</span> <span class="st">"h2"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb162-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Sommaire"                                                 
## [2] "Cadre des données"                                        
## [3] "Vue d'ensemble"                                           
## [4] "Communes de plus de 30 000 habitants"                     
## [5] "Communes ayant compté plus de 30 000 habitants avant 2025"
## [6] "Notes et références"                                      
## [7] "Voir aussi"</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="scrap-other-elements-2" class="slide level2">
<h2>Scrap other elements</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Detect HTML element by tag</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb164"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href=""></a><span class="co"># Extract content of h1 element ----</span></span>
<span id="cb164-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"h1"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb164-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Liste des communes de France les plus peuplées"</code></pre>
</div>
</div>
<p><br></p>
<p><strong>Detect HTML elements by tag</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb166"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href=""></a><span class="co"># Extract content of the first h2 element ----</span></span>
<span id="cb166-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"h2"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb166-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Sommaire"</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb168"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href=""></a><span class="co"># Extract content of all h2 elements ----</span></span>
<span id="cb168-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_elements</span>(content, <span class="at">css =</span> <span class="st">"h2"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb168-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Sommaire"                                                 
## [2] "Cadre des données"                                        
## [3] "Vue d'ensemble"                                           
## [4] "Communes de plus de 30 000 habitants"                     
## [5] "Communes ayant compté plus de 30 000 habitants avant 2025"
## [6] "Notes et références"                                      
## [7] "Voir aussi"</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Detect HTML element by ID</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb170"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href=""></a><span class="co"># Extract content of the h2 element detected by its id ----</span></span>
<span id="cb170-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"#Cadre_des_données"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb170-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Cadre des données"</code></pre>
</div>
</div>
</div></div>
</section>
<section id="scrap-other-elements-3" class="slide level2">
<h2>Scrap other elements</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Detect HTML element by tag</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb172"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb172-1"><a href=""></a><span class="co"># Extract content of h1 element ----</span></span>
<span id="cb172-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"h1"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb172-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Liste des communes de France les plus peuplées"</code></pre>
</div>
</div>
<p><br></p>
<p><strong>Detect HTML elements by tag</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb174"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href=""></a><span class="co"># Extract content of the first h2 element ----</span></span>
<span id="cb174-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"h2"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb174-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Sommaire"</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb176"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href=""></a><span class="co"># Extract content of all h2 elements ----</span></span>
<span id="cb176-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_elements</span>(content, <span class="at">css =</span> <span class="st">"h2"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb176-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Sommaire"                                                 
## [2] "Cadre des données"                                        
## [3] "Vue d'ensemble"                                           
## [4] "Communes de plus de 30 000 habitants"                     
## [5] "Communes ayant compté plus de 30 000 habitants avant 2025"
## [6] "Notes et références"                                      
## [7] "Voir aussi"</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Detect HTML element by ID</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb178"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href=""></a><span class="co"># Extract content of the h2 element detected by its id ----</span></span>
<span id="cb178-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"#Cadre_des_données"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb178-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Cadre des données"</code></pre>
</div>
</div>
<p><br></p>
<p><strong>Extract attribute</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb180"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href=""></a><span class="co"># Extract URL of the first image ----</span></span>
<span id="cb180-2"><a href=""></a>image_url <span class="ot">&lt;-</span> rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"img"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb180-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_attr</span>(<span class="at">name =</span> <span class="st">"src"</span>)</span>
<span id="cb180-4"><a href=""></a>image_url</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "/static/images/icons/wikipedia.png"</code></pre>
</div>
</div>
</div></div>
</section>
<section id="scrap-other-elements-4" class="slide level2">
<h2>Scrap other elements</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Detect HTML element by tag</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb182"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb182-1"><a href=""></a><span class="co"># Extract content of h1 element ----</span></span>
<span id="cb182-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"h1"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb182-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Liste des communes de France les plus peuplées"</code></pre>
</div>
</div>
<p><br></p>
<p><strong>Detect HTML elements by tag</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb184"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb184-1"><a href=""></a><span class="co"># Extract content of the first h2 element ----</span></span>
<span id="cb184-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"h2"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb184-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Sommaire"</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb186"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href=""></a><span class="co"># Extract content of all h2 elements ----</span></span>
<span id="cb186-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_elements</span>(content, <span class="at">css =</span> <span class="st">"h2"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb186-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Sommaire"                                                 
## [2] "Cadre des données"                                        
## [3] "Vue d'ensemble"                                           
## [4] "Communes de plus de 30 000 habitants"                     
## [5] "Communes ayant compté plus de 30 000 habitants avant 2025"
## [6] "Notes et références"                                      
## [7] "Voir aussi"</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Detect HTML element by ID</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb188"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href=""></a><span class="co"># Extract content of the h2 element detected by its id ----</span></span>
<span id="cb188-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"#Cadre_des_données"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb188-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Cadre des données"</code></pre>
</div>
</div>
<p><br></p>
<p><strong>Extract attribute</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb190"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href=""></a><span class="co"># Extract URL of the first image ----</span></span>
<span id="cb190-2"><a href=""></a>image_url <span class="ot">&lt;-</span> rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"img"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb190-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_attr</span>(<span class="at">name =</span> <span class="st">"src"</span>)</span>
<span id="cb190-4"><a href=""></a>image_url</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "/static/images/icons/wikipedia.png"</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb192"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a href=""></a><span class="co"># Build image full URL ----</span></span>
<span id="cb192-2"><a href=""></a>image_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(base_url, image_url)</span>
<span id="cb192-3"><a href=""></a>image_url</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "https://fr.wikipedia.org/static/images/icons/wikipedia.png"</code></pre>
</div>
</div>
</div></div>
</section>
<section id="scrap-other-elements-5" class="slide level2">
<h2>Scrap other elements</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Detect HTML element by tag</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb194"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb194-1"><a href=""></a><span class="co"># Extract content of h1 element ----</span></span>
<span id="cb194-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"h1"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb194-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Liste des communes de France les plus peuplées"</code></pre>
</div>
</div>
<p><br></p>
<p><strong>Detect HTML elements by tag</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb196"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb196-1"><a href=""></a><span class="co"># Extract content of the first h2 element ----</span></span>
<span id="cb196-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"h2"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb196-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Sommaire"</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb198"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb198-1"><a href=""></a><span class="co"># Extract content of all h2 elements ----</span></span>
<span id="cb198-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_elements</span>(content, <span class="at">css =</span> <span class="st">"h2"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb198-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Sommaire"                                                 
## [2] "Cadre des données"                                        
## [3] "Vue d'ensemble"                                           
## [4] "Communes de plus de 30 000 habitants"                     
## [5] "Communes ayant compté plus de 30 000 habitants avant 2025"
## [6] "Notes et références"                                      
## [7] "Voir aussi"</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Detect HTML element by ID</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb200"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb200-1"><a href=""></a><span class="co"># Extract content of the h2 element detected by its id ----</span></span>
<span id="cb200-2"><a href=""></a>rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"#Cadre_des_données"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb200-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_text2</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "Cadre des données"</code></pre>
</div>
</div>
<p><br></p>
<p><strong>Extract attribute</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb202"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb202-1"><a href=""></a><span class="co"># Extract URL of the first image ----</span></span>
<span id="cb202-2"><a href=""></a>image_url <span class="ot">&lt;-</span> rvest<span class="sc">::</span><span class="fu">html_element</span>(content, <span class="at">css =</span> <span class="st">"img"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb202-3"><a href=""></a>  rvest<span class="sc">::</span><span class="fu">html_attr</span>(<span class="at">name =</span> <span class="st">"src"</span>)</span>
<span id="cb202-4"><a href=""></a>image_url</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "/static/images/icons/wikipedia.png"</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb204"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb204-1"><a href=""></a><span class="co"># Build image full URL ----</span></span>
<span id="cb204-2"><a href=""></a>image_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(base_url, image_url)</span>
<span id="cb204-3"><a href=""></a>image_url</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>## [1] "https://fr.wikipedia.org/static/images/icons/wikipedia.png"</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb206"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a href=""></a><span class="co"># Download image ----</span></span>
<span id="cb206-2"><a href=""></a><span class="fu">download.file</span>(<span class="at">url      =</span> image_url,</span>
<span id="cb206-3"><a href=""></a>              <span class="at">destfile =</span> <span class="st">"wikipedia_logo.png"</span>,</span>
<span id="cb206-4"><a href=""></a>              <span class="at">mode     =</span> <span class="st">"wb"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div></div>
</section>
<section id="getting-the-good-selector" class="slide level2">
<h2>Getting the good selector</h2>
<ul>
<li>Press <code>CTRL</code> + <code>U</code> (Firefox) to display the HTML code of the page</li>
<li>Right click on a page element and click on <code>Inspect</code></li>
<li>Install <a href="https://rvest.tidyverse.org/articles/selectorgadget.html"><strong>SelectorGadget</strong></a> bookmarklet in your browser</li>
</ul>
<div class="fragment">
<p><br></p>
<p><strong>Dynamic web pages</strong></p>
<ul>
<li>Have a look at the function <a href="https://rvest.tidyverse.org/reference/session.html"><code>session()</code></a> of the package <code>rvest</code>.</li>
<li>Have a look at the package <a href="https://docs.ropensci.org/RSelenium/"><strong><code>RSelenium</code></strong></a></li>
</ul>
</div>
</section>
<section id="ethics-and-legalities" class="slide level2">
<h2>Ethics and legalities</h2>
<p>Well… it’s complicated.</p>
<p><br> <br></p>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Read the <a href="https://r4ds.hadley.nz/webscraping#scraping-ethics-and-legalities"><strong>Chapter 24.2</strong></a> of the book <a href="https://r4ds.hadley.nz/">R for Data Science</a> by Wickham, Cetinkaya-Rundel &amp; Grolemund.</p>
<div class="fragment">
<p><br></p>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Be nice on the web with the package <a href="https://dmi3kno.github.io/polite/"><strong><code>polite</code></strong></a></p>
</div>
</section>
<section id="links" class="slide level2">
<h2>Links</h2>
<p><i class="fa-solid fa-circle-right" aria-label="circle-right"></i> &nbsp;Some resources</p>
<ul>
<li><a href="https://rvest.tidyverse.org/articles/rvest.html"><strong>Web scraping 101</strong></a> by H. Wickham</li>
<li><a href="https://r4ds.hadley.nz/webscraping"><strong>R for Data Science</strong></a> (Chapter 24.2) by H. Wickham, M. Cetinkaya-Rundel &amp; G. Grolemund</li>
<li><a href="https://jakobtures.github.io/web-scraping/"><strong>Web Scraping using R</strong></a> by J. Tures</li>
<li><a href="https://bookdown.org/f_lennert/workshop-ukraine/introduction-to-how-the-web-is-written-and-rvest.html"><strong>Intermediate Web Scraping</strong></a> by F. Lennert</li>
</ul>
</section></section>
<section id="thanks" class="title-slide slide level1 center">
<h1>Thanks</h1>

</section>


    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="images/logo-affiliation.png" class="slide-logo"></p>
<div class="footer footer-default">
<p><i class="fa-brands fa-github" aria-label="github"></i> &nbsp;<a href="https://github.com/biodiversitydata/data-access"><code>biodiversitydata/data-access</code></a> &nbsp; • &nbsp; <i class="fa-brands fa-creative-commons" aria-label="creative-commons"></i> <i class="fa-brands fa-creative-commons-by" aria-label="creative-commons-by"></i> &nbsp;<a href="https://creativecommons.org/licenses/by/4.0/deed.en"><code>cc-by-4.0</code></a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="index_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="index_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="index_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="index_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="index_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="index_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="index_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': true,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
          const outerScaffold = trigger.parentElement.cloneNode(true);
          const codeEl = outerScaffold.querySelector('code');
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>